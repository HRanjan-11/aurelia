{"version":3,"file":"index.js","sources":["../../src/index.ts"],"sourcesContent":[null],"names":["lookup","Map","notImplemented","name","Error","Platform","constructor","g","overrides","this","globalThis","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","Date","Reflect","clearInterval","bind","clearTimeout","queueMicrotask","setInterval","setTimeout","console","performanceNow","performance","now","flushMacroTask","taskQueue","TaskQueue","requestMacroTask","cancelMacroTask","getOrCreate","platform","get","set","macroTaskRequested","macroTaskHandle","flush","isPersistent","task","persistent","$request","$cancel","flushRequested","_lastRequest","_tracer","Tracer","isEmpty","_pendingAsyncCount","processing","length","pending","delayed","P","every","time","_lastFlush","_suspenderTask","push","i","queueTime","splice","cur","shift","run","status","suspend","_requestFlush","_yieldPromise","_hasNoMoreFiniteWork","p","resolve","cancel","yield","createExposedPromise","queueTask","callback","opts","delay","preempt","reusable","defaultQueueTaskOptions","taskPool","index","_taskPoolSize","reuse","Task","remove","idx","indexOf","id","returnToPool","resetPersistentTask","reset","createdTime","completeAsyncTask","TaskAbortError","super","TaskStatus","tracer","result","_result","_status","promise","_resolve","_reject","reject","Promise","R","A","ret","then","$ret","dispose","enabled","catch","err","taskStatus","enter","obj","method","log","repeat","depth","leave","trace","prefix","flushReq","susTask","info","created","Math","round","queue","TaskQueuePriority","$resolve","$reject","executor"],"mappings":"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"}