export{Platform,Task,TaskAbortError,TaskQueue,TaskQueuePriority,TaskStatus}from"../../../platform/dist/native-modules/index.js";import{BrowserPlatform as e}from"../../../platform-browser/dist/native-modules/index.js";export{BrowserPlatform}from"../../../platform-browser/dist/native-modules/index.js";import{Protocol as t,getPrototypeChain as s,Metadata as i,firstDefined as n,kebabCase as r,noop as o,emptyArray as a,DI as l,all as c,Registration as h,IPlatform as u,mergeArrays as d,fromDefinitionOrDefault as p,pascalCase as g,fromAnnotationOrTypeOrDefault as f,fromAnnotationOrDefinitionOrTypeOrDefault as v,IContainer as m,nextId as b,InstanceProvider as y,optional as w,ILogger as x,isObject as k,onResolve as C,resolveAll as T,camelCase as A,toArray as $,emptyObject as E,IServiceLocator as S,compareNumber as O,transient as P}from"../../../kernel/dist/native-modules/index.js";import{BindingMode as R,subscriberCollection as M,withFlushQueue as B,connectable as L,registerAliases as j,Scope as V,ConnectableSwitcher as I,ProxyObservable as N,IObserverLocator as q,IExpressionParser as D,AccessScopeExpression as F,DelegationStrategy as z,BindingBehaviorExpression as U,BindingBehaviorFactory as K,PrimitiveLiteralExpression as W,bindingBehavior as H,BindingInterceptor as G,ISignaler as _,PropertyAccessor as Q,INodeObserverLocator as X,SetterObserver as Y,IDirtyChecker as Z,alias as J,applyMutationsToIndices as ee,getCollectionObserver as te,BindingContext as se,synchronizeIndices as ie,OverrideContext as ne,valueConverter as re}from"../../../runtime/dist/native-modules/index.js";export{Access,AccessKeyedExpression,AccessMemberExpression,AccessScopeExpression,AccessThisExpression,AccessorType,ArrayBindingPattern,ArrayIndexObserver,ArrayLiteralExpression,ArrayObserver,AssignExpression,BinaryExpression,BindingBehavior,BindingBehaviorDefinition,BindingBehaviorExpression,BindingBehaviorFactory,BindingBehaviorStrategy,BindingContext,BindingIdentifier,BindingInterceptor,BindingMediator,BindingMode,BindingType,CallFunctionExpression,CallMemberExpression,CallScopeExpression,Char,CollectionKind,CollectionLengthObserver,CollectionSizeObserver,ComputedObserver,ConditionalExpression,CustomExpression,DelegationStrategy,DirtyCheckProperty,DirtyCheckSettings,ExpressionKind,ForOfStatement,HtmlLiteralExpression,IDirtyChecker,IExpressionParser,INodeObserverLocator,IObserverLocator,ISignaler,Interpolation,LifecycleFlags,MapObserver,ObjectBindingPattern,ObjectLiteralExpression,ObserverLocator,OverrideContext,ParserState,Precedence,PrimitiveLiteralExpression,PrimitiveObserver,PropertyAccessor,Scope,SetObserver,SetterObserver,TaggedTemplateExpression,TemplateExpression,UnaryExpression,ValueConverter,ValueConverterDefinition,ValueConverterExpression,alias,applyMutationsToIndices,bindingBehavior,cloneIndexMap,connectable,copyIndexMap,createIndexMap,disableArrayObservation,disableMapObservation,disableSetObservation,enableArrayObservation,enableMapObservation,enableSetObservation,getCollectionObserver,isIndexMap,observable,parse,parseExpression,registerAliases,subscriberCollection,synchronizeIndices,valueConverter}from"../../../runtime/dist/native-modules/index.js";
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function oe(e,t,s,i){var n,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,s,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(r<3?n(o):r>3?n(t,s,o):n(t,s))||o);return r>3&&o&&Object.defineProperty(t,s,o),o}function ae(e,t){return function(s,i){t(s,i,e)}}function le(e,s){let n;function r(e,s){arguments.length>1&&(n.property=s),i.define(he.name,ue.create(s,n),e.constructor,s),t.annotation.appendTo(e.constructor,he.keyFrom(s))}return arguments.length>1?(n={},void r(e,s)):"string"==typeof e?(n={},r):(n=void 0===e?{}:e,r)}function ce(e){return e.startsWith(he.name)}const he={name:t.annotation.keyFor("bindable"),keyFrom:e=>`${he.name}:${e}`,from(...e){const t={},s=Array.isArray;function i(e){t[e]=ue.create(e)}return e.forEach((function(e){s(e)?e.forEach(i):e instanceof ue?t[e.property]=e:void 0!==e&&Object.keys(e).forEach((s=>function(e,s){t[e]=s instanceof ue?s:ue.create(e,s)}(s,e[s])))})),t},for(e){let s;const n={add(r){let o,a;return"string"==typeof r?(o=r,a={property:o}):(o=r.property,a=r),s=ue.create(o,a),i.hasOwn(he.name,e,o)||t.annotation.appendTo(e,he.keyFrom(o)),i.define(he.name,s,e,o),n},mode:e=>(s.mode=e,n),callback:e=>(s.callback=e,n),attribute:e=>(s.attribute=e,n),primary:()=>(s.primary=!0,n),set:e=>(s.set=e,n)};return n},getAll(e){const n=he.name.length+1,r=[],o=s(e);let a,l,c,h=o.length,u=0;for(;--h>=0;){c=o[h],a=t.annotation.getKeys(c).filter(ce),l=a.length;for(let e=0;e<l;++e)r[u++]=i.getOwn(he.name,c,a[e].slice(n))}return r}};class ue{constructor(e,t,s,i,n,r){this.attribute=e,this.callback=t,this.mode=s,this.primary=i,this.property=n,this.set=r}static create(e,t={}){return new ue(n(t.attribute,r(e)),n(t.callback,`${e}Changed`),n(t.mode,R.toView),n(t.primary,!1),n(t.property,e),n(t.set,o))}}class de{constructor(e,t,s,i,n){this.obj=e,this.propertyKey=t,this.set=i,this.$controller=n,this.value=void 0,this.oldValue=void 0,this.f=0;const r=e[s],a=e.propertyChanged,l=this.hasCb="function"==typeof r,c=this.hasCbAll="function"==typeof a,h=this.hasSetter=i!==o;if(this.cb=l?r:o,this.cbAll=c?a:o,void 0!==this.cb||c||h){this.observing=!0;const s=e[t];this.value=h&&void 0!==s?i(s):s,this.createGetterSetter()}else this.observing=!1}get type(){return 1}getValue(){return this.value}setValue(e,t){if(this.hasSetter&&(e=this.set(e)),this.observing){const s=this.value;if(Object.is(e,s))return;this.value=e,this.oldValue=s,this.f=t,(null==this.$controller||this.$controller.isBound)&&(this.hasCb&&this.cb.call(this.obj,e,s,t),this.hasCbAll&&this.cbAll.call(this.obj,this.propertyKey,e,s,t)),this.queue.add(this)}else this.obj[this.propertyKey]=e}subscribe(e){if(!1==!this.observing){this.observing=!0;const e=this.obj[this.propertyKey];this.value=this.hasSetter?this.set(e):e,this.createGetterSetter()}this.subs.add(e)}flush(){pe=this.oldValue,this.oldValue=this.value,this.subs.notify(this.value,pe,this.f)}createGetterSetter(){Reflect.defineProperty(this.obj,this.propertyKey,{enumerable:!0,configurable:!0,get:()=>this.value,set:e=>{this.setValue(e,0)}})}}let pe;M(de),B(de);class ge{constructor(e,t,s,i){if(this.chars=e,this.repeat=t,this.isSymbol=s,this.isInverted=i,i)switch(e.length){case 0:this.has=this.hasOfNoneInverse;break;case 1:this.has=this.hasOfSingleInverse;break;default:this.has=this.hasOfMultipleInverse}else switch(e.length){case 0:this.has=this.hasOfNone;break;case 1:this.has=this.hasOfSingle;break;default:this.has=this.hasOfMultiple}}equals(e){return this.chars===e.chars&&this.repeat===e.repeat&&this.isSymbol===e.isSymbol&&this.isInverted===e.isInverted}hasOfMultiple(e){return this.chars.includes(e)}hasOfSingle(e){return this.chars===e}hasOfNone(e){return!1}hasOfMultipleInverse(e){return!this.chars.includes(e)}hasOfSingleInverse(e){return this.chars!==e}hasOfNoneInverse(e){return!0}}class fe{constructor(){this.parts=a,this._pattern="",this.currentRecord={},this.partsRecord={}}get pattern(){const e=this._pattern;return""===e?null:e}set pattern(e){null==e?(this._pattern="",this.parts=a):(this._pattern=e,this.parts=this.partsRecord[e])}append(e,t){const{currentRecord:s}=this;void 0===s[e]?s[e]=t:s[e]+=t}next(e){const{currentRecord:t}=this;if(void 0!==t[e]){const{partsRecord:s}=this;void 0===s[e]?s[e]=[t[e]]:s[e].push(t[e]),t[e]=void 0}}}class ve{constructor(e,...t){this.charSpec=e,this.nextStates=[],this.types=null,this.isEndpoint=!1,this.patterns=t}get pattern(){return this.isEndpoint?this.patterns[0]:null}findChild(e){const t=this.nextStates,s=t.length;let i=null;for(let n=0;n<s;++n)if(i=t[n],e.equals(i.charSpec))return i;return null}append(e,t){const{patterns:s}=this;s.includes(t)||s.push(t);let i=this.findChild(e);return null==i&&(i=new ve(e,t),this.nextStates.push(i),e.repeat&&i.nextStates.push(i)),i}findMatches(e,t){const s=[],i=this.nextStates,n=i.length;let r=0,o=null,a=0,l=0;for(;a<n;++a)if(o=i[a],o.charSpec.has(e))if(s.push(o),r=o.patterns.length,l=0,o.charSpec.isSymbol)for(;l<r;++l)t.next(o.patterns[l]);else for(;l<r;++l)t.append(o.patterns[l],e);return s}}class me{constructor(e){this.text=e;const t=this.len=e.length,s=this.specs=[];for(let i=0;i<t;++i)s.push(new ge(e[i],!1,!1,!1))}eachChar(e){const{len:t,specs:s}=this;for(let i=0;i<t;++i)e(s[i])}}class be{constructor(e){this.text="PART",this.spec=new ge(e,!0,!1,!0)}eachChar(e){e(this.spec)}}class ye{constructor(e){this.text=e,this.spec=new ge(e,!1,!0,!1)}eachChar(e){e(this.spec)}}class we{constructor(){this.statics=0,this.dynamics=0,this.symbols=0}}const xe=l.createInterface("ISyntaxInterpreter",(e=>e.singleton(ke)));class ke{constructor(){this.rootState=new ve(null),this.initialStates=[this.rootState]}add(e){let t=0;if(Array.isArray(e)){const s=e.length;for(;t<s;++t)this.add(e[t]);return}let s=this.rootState;const i=e,n=i.pattern,r=new we,o=this.parse(i,r),a=o.length,l=e=>{s=s.append(e,n)};for(t=0;t<a;++t)o[t].eachChar(l);s.types=r,s.isEndpoint=!0}interpret(e){const t=new fe;let s=this.initialStates;const i=e.length;for(let n=0;n<i&&(s=this.getNextStates(s,e.charAt(n),t),0!==s.length);++n);if(s.sort(((e,t)=>{if(!e.isEndpoint)return t.isEndpoint?1:0;if(!t.isEndpoint)return-1;const s=e.types,i=t.types;return s.statics!==i.statics?i.statics-s.statics:s.dynamics!==i.dynamics?i.dynamics-s.dynamics:s.symbols!==i.symbols?i.symbols-s.symbols:0})),s.length>0){const e=s[0];e.charSpec.isSymbol||t.next(e.pattern),t.pattern=e.pattern}return t}getNextStates(e,t,s){const i=[];let n=null;const r=e.length;for(let o=0;o<r;++o)n=e[o],i.push(...n.findMatches(t,s));return i}parse(e,t){const s=[],i=e.pattern,n=i.length;let r=0,o=0,a="";for(;r<n;)a=i.charAt(r),e.symbols.includes(a)?r!==o?(s.push(new me(i.slice(o,r))),++t.statics,o=r):(s.push(new ye(i.slice(o,r+1))),++t.symbols,o=++r):r===o&&"P"===a&&"PART"===i.slice(r,r+4)?(o=r+=4,s.push(new be(e.symbols)),++t.dynamics):++r;return o!==r&&(s.push(new me(i.slice(o,r))),++t.statics),s}}class Ce{constructor(e,t,s,i){this.rawName=e,this.rawValue=t,this.target=s,this.command=i}}const Te=l.createInterface("IAttributePattern"),Ae=l.createInterface("IAttributeParser",(e=>e.singleton($e)));let $e=class{constructor(e,t){this.interpreter=e,this.cache={};const s=this.patterns={};t.forEach((t=>{const i=Oe.getPatternDefinitions(t.constructor);e.add(i),i.forEach((e=>{s[e.pattern]=t}))}))}parse(e,t){let s=this.cache[e];null==s&&(s=this.cache[e]=this.interpreter.interpret(e));const i=s.pattern;return null==i?new Ce(e,t,e,null):this.patterns[i][i](e,t,s.parts)}};function Ee(...e){return function(t){return Oe.define(e,t)}}$e=oe([ae(0,xe),ae(1,c(Te))],$e);class Se{constructor(e){this.Type=e,this.name=void 0}register(e){h.singleton(Te,this.Type).register(e)}}const Oe=Object.freeze({name:t.resource.keyFor("attribute-pattern"),definitionAnnotationKey:"attribute-pattern-definitions",define(e,s){const n=new Se(s),{name:r,definitionAnnotationKey:o}=Oe;return i.define(r,n,s),t.resource.appendTo(s,r),t.annotation.set(s,o,e),t.annotation.appendTo(s,o),s},getPatternDefinitions:e=>t.annotation.get(e,Oe.definitionAnnotationKey)});let Pe=class{"PART.PART"(e,t,s){return new Ce(e,t,s[0],s[1])}"PART.PART.PART"(e,t,s){return new Ce(e,t,s[0],s[2])}};Pe=oe([Ee({pattern:"PART.PART",symbols:"."},{pattern:"PART.PART.PART",symbols:"."})],Pe);let Re=class{ref(e,t,s){return new Ce(e,t,"element","ref")}"PART.ref"(e,t,s){return new Ce(e,t,s[0],"ref")}};Re=oe([Ee({pattern:"ref",symbols:""},{pattern:"PART.ref",symbols:"."})],Re);let Me=class{":PART"(e,t,s){return new Ce(e,t,s[0],"bind")}};Me=oe([Ee({pattern:":PART",symbols:":"})],Me);let Be=class{"@PART"(e,t,s){return new Ce(e,t,s[0],"trigger")}};Be=oe([Ee({pattern:"@PART",symbols:"@"})],Be);const Le=Ve();function je(e,t,s){if(!0===Le[t])return!0;if("string"!=typeof t)return!1;const i=t.slice(0,5);return Le[t]="aria-"===i||"data-"===i||s.isStandardSvgAttribute(e,t)}function Ve(){return Object.create(null)}const Ie=u,Ne=l.createInterface("ISVGAnalyzer",(e=>e.singleton(qe)));class qe{isStandardSvgAttribute(e,t){return!1}}function De(e){const t=Ve();let s;for(s of e)t[s]=!0;return t}class Fe{constructor(e){this.svgElements=Object.assign(Ve(),{a:De(["class","externalResourcesRequired","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","requiredExtensions","requiredFeatures","style","systemLanguage","target","transform","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space"]),altGlyph:De(["class","dx","dy","externalResourcesRequired","format","glyphRef","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","requiredExtensions","requiredFeatures","rotate","style","systemLanguage","x","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space","y"]),altglyph:Ve(),altGlyphDef:De(["id","xml:base","xml:lang","xml:space"]),altglyphdef:Ve(),altGlyphItem:De(["id","xml:base","xml:lang","xml:space"]),altglyphitem:Ve(),animate:De(["accumulate","additive","attributeName","attributeType","begin","by","calcMode","dur","end","externalResourcesRequired","fill","from","id","keySplines","keyTimes","max","min","onbegin","onend","onload","onrepeat","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","systemLanguage","to","values","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space"]),animateColor:De(["accumulate","additive","attributeName","attributeType","begin","by","calcMode","dur","end","externalResourcesRequired","fill","from","id","keySplines","keyTimes","max","min","onbegin","onend","onload","onrepeat","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","systemLanguage","to","values","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space"]),animateMotion:De(["accumulate","additive","begin","by","calcMode","dur","end","externalResourcesRequired","fill","from","id","keyPoints","keySplines","keyTimes","max","min","onbegin","onend","onload","onrepeat","origin","path","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","rotate","systemLanguage","to","values","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space"]),animateTransform:De(["accumulate","additive","attributeName","attributeType","begin","by","calcMode","dur","end","externalResourcesRequired","fill","from","id","keySplines","keyTimes","max","min","onbegin","onend","onload","onrepeat","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","systemLanguage","to","type","values","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space"]),circle:De(["class","cx","cy","externalResourcesRequired","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","r","requiredExtensions","requiredFeatures","style","systemLanguage","transform","xml:base","xml:lang","xml:space"]),clipPath:De(["class","clipPathUnits","externalResourcesRequired","id","requiredExtensions","requiredFeatures","style","systemLanguage","transform","xml:base","xml:lang","xml:space"]),"color-profile":De(["id","local","name","rendering-intent","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space"]),cursor:De(["externalResourcesRequired","id","requiredExtensions","requiredFeatures","systemLanguage","x","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space","y"]),defs:De(["class","externalResourcesRequired","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","requiredExtensions","requiredFeatures","style","systemLanguage","transform","xml:base","xml:lang","xml:space"]),desc:De(["class","id","style","xml:base","xml:lang","xml:space"]),ellipse:De(["class","cx","cy","externalResourcesRequired","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","requiredExtensions","requiredFeatures","rx","ry","style","systemLanguage","transform","xml:base","xml:lang","xml:space"]),feBlend:De(["class","height","id","in","in2","mode","result","style","width","x","xml:base","xml:lang","xml:space","y"]),feColorMatrix:De(["class","height","id","in","result","style","type","values","width","x","xml:base","xml:lang","xml:space","y"]),feComponentTransfer:De(["class","height","id","in","result","style","width","x","xml:base","xml:lang","xml:space","y"]),feComposite:De(["class","height","id","in","in2","k1","k2","k3","k4","operator","result","style","width","x","xml:base","xml:lang","xml:space","y"]),feConvolveMatrix:De(["bias","class","divisor","edgeMode","height","id","in","kernelMatrix","kernelUnitLength","order","preserveAlpha","result","style","targetX","targetY","width","x","xml:base","xml:lang","xml:space","y"]),feDiffuseLighting:De(["class","diffuseConstant","height","id","in","kernelUnitLength","result","style","surfaceScale","width","x","xml:base","xml:lang","xml:space","y"]),feDisplacementMap:De(["class","height","id","in","in2","result","scale","style","width","x","xChannelSelector","xml:base","xml:lang","xml:space","y","yChannelSelector"]),feDistantLight:De(["azimuth","elevation","id","xml:base","xml:lang","xml:space"]),feFlood:De(["class","height","id","result","style","width","x","xml:base","xml:lang","xml:space","y"]),feFuncA:De(["amplitude","exponent","id","intercept","offset","slope","tableValues","type","xml:base","xml:lang","xml:space"]),feFuncB:De(["amplitude","exponent","id","intercept","offset","slope","tableValues","type","xml:base","xml:lang","xml:space"]),feFuncG:De(["amplitude","exponent","id","intercept","offset","slope","tableValues","type","xml:base","xml:lang","xml:space"]),feFuncR:De(["amplitude","exponent","id","intercept","offset","slope","tableValues","type","xml:base","xml:lang","xml:space"]),feGaussianBlur:De(["class","height","id","in","result","stdDeviation","style","width","x","xml:base","xml:lang","xml:space","y"]),feImage:De(["class","externalResourcesRequired","height","id","preserveAspectRatio","result","style","width","x","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space","y"]),feMerge:De(["class","height","id","result","style","width","x","xml:base","xml:lang","xml:space","y"]),feMergeNode:De(["id","xml:base","xml:lang","xml:space"]),feMorphology:De(["class","height","id","in","operator","radius","result","style","width","x","xml:base","xml:lang","xml:space","y"]),feOffset:De(["class","dx","dy","height","id","in","result","style","width","x","xml:base","xml:lang","xml:space","y"]),fePointLight:De(["id","x","xml:base","xml:lang","xml:space","y","z"]),feSpecularLighting:De(["class","height","id","in","kernelUnitLength","result","specularConstant","specularExponent","style","surfaceScale","width","x","xml:base","xml:lang","xml:space","y"]),feSpotLight:De(["id","limitingConeAngle","pointsAtX","pointsAtY","pointsAtZ","specularExponent","x","xml:base","xml:lang","xml:space","y","z"]),feTile:De(["class","height","id","in","result","style","width","x","xml:base","xml:lang","xml:space","y"]),feTurbulence:De(["baseFrequency","class","height","id","numOctaves","result","seed","stitchTiles","style","type","width","x","xml:base","xml:lang","xml:space","y"]),filter:De(["class","externalResourcesRequired","filterRes","filterUnits","height","id","primitiveUnits","style","width","x","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space","y"]),font:De(["class","externalResourcesRequired","horiz-adv-x","horiz-origin-x","horiz-origin-y","id","style","vert-adv-y","vert-origin-x","vert-origin-y","xml:base","xml:lang","xml:space"]),"font-face":De(["accent-height","alphabetic","ascent","bbox","cap-height","descent","font-family","font-size","font-stretch","font-style","font-variant","font-weight","hanging","id","ideographic","mathematical","overline-position","overline-thickness","panose-1","slope","stemh","stemv","strikethrough-position","strikethrough-thickness","underline-position","underline-thickness","unicode-range","units-per-em","v-alphabetic","v-hanging","v-ideographic","v-mathematical","widths","x-height","xml:base","xml:lang","xml:space"]),"font-face-format":De(["id","string","xml:base","xml:lang","xml:space"]),"font-face-name":De(["id","name","xml:base","xml:lang","xml:space"]),"font-face-src":De(["id","xml:base","xml:lang","xml:space"]),"font-face-uri":De(["id","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space"]),foreignObject:De(["class","externalResourcesRequired","height","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","requiredExtensions","requiredFeatures","style","systemLanguage","transform","width","x","xml:base","xml:lang","xml:space","y"]),g:De(["class","externalResourcesRequired","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","requiredExtensions","requiredFeatures","style","systemLanguage","transform","xml:base","xml:lang","xml:space"]),glyph:De(["arabic-form","class","d","glyph-name","horiz-adv-x","id","lang","orientation","style","unicode","vert-adv-y","vert-origin-x","vert-origin-y","xml:base","xml:lang","xml:space"]),glyphRef:De(["class","dx","dy","format","glyphRef","id","style","x","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space","y"]),glyphref:Ve(),hkern:De(["g1","g2","id","k","u1","u2","xml:base","xml:lang","xml:space"]),image:De(["class","externalResourcesRequired","height","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","preserveAspectRatio","requiredExtensions","requiredFeatures","style","systemLanguage","transform","width","x","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space","y"]),line:De(["class","externalResourcesRequired","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","requiredExtensions","requiredFeatures","style","systemLanguage","transform","x1","x2","xml:base","xml:lang","xml:space","y1","y2"]),linearGradient:De(["class","externalResourcesRequired","gradientTransform","gradientUnits","id","spreadMethod","style","x1","x2","xlink:arcrole","xlink:href","xlink:role","xlink:title","xlink:type","xml:base","xml:lang","xml:space","y1","y2"]),marker:De(["class","externalResourcesRequired","id","markerHeight","markerUnits","markerWidth","orient","preserveAspectRatio","refX","refY","style","viewBox","xml:base","xml:lang","xml:space"]),mask:De(["class","externalResourcesRequired","height","id","maskContentUnits","maskUnits","requiredExtensions","requiredFeatures","style","systemLanguage","width","x","xml:base","xml:lang","xml:space","y"]),metadata:De(["id","xml:base","xml:lang","xml:space"]),"missing-glyph":De(["class","d","horiz-adv-x","id","style","vert-adv-y","vert-origin-x","vert-origin-y","xml:base","xml:lang","xml:space"]),mpath:De(["externalResourcesRequired","id","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space"]),path:De(["class","d","externalResourcesRequired","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","pathLength","requiredExtensions","requiredFeatures","style","systemLanguage","transform","xml:base","xml:lang","xml:space"]),pattern:De(["class","externalResourcesRequired","height","id","patternContentUnits","patternTransform","patternUnits","preserveAspectRatio","requiredExtensions","requiredFeatures","style","systemLanguage","viewBox","width","x","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space","y"]),polygon:De(["class","externalResourcesRequired","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","points","requiredExtensions","requiredFeatures","style","systemLanguage","transform","xml:base","xml:lang","xml:space"]),polyline:De(["class","externalResourcesRequired","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","points","requiredExtensions","requiredFeatures","style","systemLanguage","transform","xml:base","xml:lang","xml:space"]),radialGradient:De(["class","cx","cy","externalResourcesRequired","fx","fy","gradientTransform","gradientUnits","id","r","spreadMethod","style","xlink:arcrole","xlink:href","xlink:role","xlink:title","xlink:type","xml:base","xml:lang","xml:space"]),rect:De(["class","externalResourcesRequired","height","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","requiredExtensions","requiredFeatures","rx","ry","style","systemLanguage","transform","width","x","xml:base","xml:lang","xml:space","y"]),script:De(["externalResourcesRequired","id","type","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space"]),set:De(["attributeName","attributeType","begin","dur","end","externalResourcesRequired","fill","id","max","min","onbegin","onend","onload","onrepeat","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","systemLanguage","to","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space"]),stop:De(["class","id","offset","style","xml:base","xml:lang","xml:space"]),style:De(["id","media","title","type","xml:base","xml:lang","xml:space"]),svg:De(["baseProfile","class","contentScriptType","contentStyleType","externalResourcesRequired","height","id","onabort","onactivate","onclick","onerror","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","onresize","onscroll","onunload","onzoom","preserveAspectRatio","requiredExtensions","requiredFeatures","style","systemLanguage","version","viewBox","width","x","xml:base","xml:lang","xml:space","y","zoomAndPan"]),switch:De(["class","externalResourcesRequired","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","requiredExtensions","requiredFeatures","style","systemLanguage","transform","xml:base","xml:lang","xml:space"]),symbol:De(["class","externalResourcesRequired","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","preserveAspectRatio","style","viewBox","xml:base","xml:lang","xml:space"]),text:De(["class","dx","dy","externalResourcesRequired","id","lengthAdjust","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","requiredExtensions","requiredFeatures","rotate","style","systemLanguage","textLength","transform","x","xml:base","xml:lang","xml:space","y"]),textPath:De(["class","externalResourcesRequired","id","lengthAdjust","method","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","requiredExtensions","requiredFeatures","spacing","startOffset","style","systemLanguage","textLength","xlink:arcrole","xlink:href","xlink:role","xlink:title","xlink:type","xml:base","xml:lang","xml:space"]),title:De(["class","id","style","xml:base","xml:lang","xml:space"]),tref:De(["class","dx","dy","externalResourcesRequired","id","lengthAdjust","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","requiredExtensions","requiredFeatures","rotate","style","systemLanguage","textLength","x","xlink:arcrole","xlink:href","xlink:role","xlink:title","xlink:type","xml:base","xml:lang","xml:space","y"]),tspan:De(["class","dx","dy","externalResourcesRequired","id","lengthAdjust","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","requiredExtensions","requiredFeatures","rotate","style","systemLanguage","textLength","x","xml:base","xml:lang","xml:space","y"]),use:De(["class","externalResourcesRequired","height","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","requiredExtensions","requiredFeatures","style","systemLanguage","transform","width","x","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space","y"]),view:De(["externalResourcesRequired","id","preserveAspectRatio","viewBox","viewTarget","xml:base","xml:lang","xml:space","zoomAndPan"]),vkern:De(["g1","g2","id","k","u1","u2","xml:base","xml:lang","xml:space"])}),this.svgPresentationElements=De(["a","altGlyph","animate","animateColor","circle","clipPath","defs","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feFlood","feGaussianBlur","feImage","feMerge","feMorphology","feOffset","feSpecularLighting","feTile","feTurbulence","filter","font","foreignObject","g","glyph","glyphRef","image","line","linearGradient","marker","mask","missing-glyph","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","switch","symbol","text","textPath","tref","tspan","use"]),this.svgPresentationAttributes=De(["alignment-baseline","baseline-shift","clip-path","clip-rule","clip","color-interpolation-filters","color-interpolation","color-profile","color-rendering","color","cursor","direction","display","dominant-baseline","enable-background","fill-opacity","fill-rule","fill","filter","flood-color","flood-opacity","font-family","font-size-adjust","font-size","font-stretch","font-style","font-variant","font-weight","glyph-orientation-horizontal","glyph-orientation-vertical","image-rendering","kerning","letter-spacing","lighting-color","marker-end","marker-mid","marker-start","mask","opacity","overflow","pointer-events","shape-rendering","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","stroke","text-anchor","text-decoration","text-rendering","unicode-bidi","visibility","word-spacing","writing-mode"]),this.SVGElement=e.globalThis.SVGElement;const t=e.document.createElement("div");if(t.innerHTML="<svg><altGlyph /></svg>","altglyph"===t.firstElementChild.nodeName){const e=this.svgElements;let t=e.altGlyph;e.altGlyph=e.altglyph,e.altglyph=t,t=e.altGlyphDef,e.altGlyphDef=e.altglyphdef,e.altglyphdef=t,t=e.altGlyphItem,e.altGlyphItem=e.altglyphitem,e.altglyphitem=t,t=e.glyphRef,e.glyphRef=e.glyphref,e.glyphref=t}}static register(e){return h.singleton(Ne,this).register(e)}isStandardSvgAttribute(e,t){var s;return e instanceof this.SVGElement&&(!0===this.svgPresentationElements[e.nodeName]&&!0===this.svgPresentationAttributes[t]||!0===(null===(s=this.svgElements[e.nodeName])||void 0===s?void 0:s[t]))}}Fe.inject=[Ie];const ze=l.createInterface("IAttrMapper",(e=>e.singleton(Ue)));class Ue{constructor(e){this.svg=e,this.fns=[],this.tagAttrMap=Ve(),this.globalAttrMap=Ve(),this.useMapping({LABEL:{for:"htmlFor"},IMG:{usemap:"useMap"},INPUT:{maxlength:"maxLength",minlength:"minLength",formaction:"formAction",formenctype:"formEncType",formmethod:"formMethod",formnovalidate:"formNoValidate",formtarget:"formTarget",inputmode:"inputMode"},TEXTAREA:{maxlength:"maxLength"},TD:{rowspan:"rowSpan",colspan:"colSpan"},TH:{rowspan:"rowSpan",colspan:"colSpan"}}),this.useGlobalMapping({accesskey:"accessKey",contenteditable:"contentEditable",tabindex:"tabIndex",textcontent:"textContent",innerhtml:"innerHTML",scrolltop:"scrollTop",scrollleft:"scrollLeft",readonly:"readOnly"})}static get inject(){return[Ne]}useMapping(e){var t,s;let i,n,r,o;for(r in e)for(o in i=e[r],n=null!==(t=(s=this.tagAttrMap)[r])&&void 0!==t?t:s[r]=Ve(),i){if(void 0!==n[o])throw Ke(o,r);n[o]=i[o]}}useGlobalMapping(e){const t=this.globalAttrMap;for(const s in e){if(void 0!==t[s])throw Ke(s,"*");t[s]=e[s]}}useTwoWay(e){this.fns.push(e)}isTwoWay(e,t){return function(e,t){switch(e.nodeName){case"INPUT":switch(e.type){case"checkbox":case"radio":return"checked"===t;default:return"value"===t||"files"===t||"value-as-number"===t||"value-as-date"===t}case"TEXTAREA":case"SELECT":return"value"===t;default:switch(t){case"textcontent":case"innerhtml":return e.hasAttribute("contenteditable");case"scrolltop":case"scrollleft":return!0;default:return!1}}}(e,t)||this.fns.length>0&&this.fns.some((s=>s(e,t)))}map(e,t){var s,i,n;return null!==(n=null!==(i=null===(s=this.tagAttrMap[e.nodeName])||void 0===s?void 0:s[t])&&void 0!==i?i:this.globalAttrMap[t])&&void 0!==n?n:je(e,t,this.svg)?t:null}}function Ke(e,t){return new Error(`Attribute ${e} has been already registered for ${"*"===t?"all elements":`<${t}/>`}`)}class We{constructor(e,t,s,i,n){this.sourceExpression=e,this.target=t,this.targetProperty=s,this.locator=n,this.interceptor=this,this.isBound=!1,this.targetObserver=i.getAccessor(t,s)}callSource(e){const t=this.$scope.overrideContext;t.$event=e;const s=this.sourceExpression.evaluate(8,this.$scope,this.locator,null);return Reflect.deleteProperty(t,"$event"),s}$bind(e,t){if(this.isBound){if(this.$scope===t)return;this.interceptor.$unbind(2|e)}this.$scope=t,this.sourceExpression.hasBind&&this.sourceExpression.bind(e,t,this.interceptor),this.targetObserver.setValue((e=>this.interceptor.callSource(e)),e,this.target,this.targetProperty),this.isBound=!0}$unbind(e){this.isBound&&(this.sourceExpression.hasUnbind&&this.sourceExpression.unbind(e,this.$scope,this.interceptor),this.$scope=void 0,this.targetObserver.setValue(null,e,this.target,this.targetProperty),this.isBound=!1)}observeProperty(e,t){}handleChange(e,t,s){}}class He{constructor(e,t,s,i,n){this.platform=e,this.observerLocator=t,this.obj=s,this.propertyKey=i,this.targetAttribute=n,this.value=null,this.oldValue=null,this.hasChanges=!1,this.type=7,this.f=0}getValue(){return this.value}setValue(e,t){this.value=e,this.hasChanges=e!==this.oldValue,0==(256&t)&&this.flushChanges(t)}flushChanges(e){if(this.hasChanges){this.hasChanges=!1;const e=this.value,t=this.targetAttribute;switch(this.oldValue=e,t){case"class":this.obj.classList.toggle(this.propertyKey,!!e);break;case"style":{let t="",s=e;"string"==typeof s&&s.includes("!important")&&(t="important",s=s.replace("!important","")),this.obj.style.setProperty(this.propertyKey,s,t);break}default:null==e?this.obj.removeAttribute(t):this.obj.setAttribute(t,String(e))}}}handleMutation(e){let t=!1;for(let s=0,i=e.length;i>s;++s){const i=e[s];if("attributes"===i.type&&i.attributeName===this.propertyKey){t=!0;break}}if(t){let e;switch(this.targetAttribute){case"class":e=this.obj.classList.contains(this.propertyKey);break;case"style":e=this.obj.style.getPropertyValue(this.propertyKey);break;default:throw new Error(`Unsupported observation of attribute: ${this.targetAttribute}`)}e!==this.value&&(this.oldValue=this.value,this.value=e,this.hasChanges=!1,this.f=0,this.queue.add(this))}}subscribe(e){this.subs.add(e)&&1===this.subs.count&&(this.value=this.oldValue=this.obj.getAttribute(this.propertyKey),Ge(this.obj.ownerDocument.defaultView.MutationObserver,this.obj,this))}unsubscribe(e){this.subs.remove(e)&&0===this.subs.count&&_e(this.obj,this)}flush(){Ye=this.oldValue,this.oldValue=this.value,this.subs.notify(this.value,Ye,this.f)}}M(He),B(He);const Ge=(e,t,s)=>{void 0===t.$eMObservers&&(t.$eMObservers=new Set),void 0===t.$mObserver&&(t.$mObserver=new e(Qe)).observe(t,{attributes:!0}),t.$eMObservers.add(s)},_e=(e,t)=>{const s=e.$eMObservers;return!(!s||!s.delete(t))&&(0===s.size&&(e.$mObserver.disconnect(),e.$mObserver=void 0),!0)},Qe=e=>{e[0].target.$eMObservers.forEach(Xe,e)};function Xe(e){e.handleMutation(this)}let Ye;class Ze{constructor(e){this.b=e}handleChange(e,t,s){const i=this.b;e!==i.sourceExpression.evaluate(s,i.$scope,i.locator,null)&&i.updateSource(e,s)}}const{oneTime:Je,toView:et,fromView:tt}=R,st=et|Je,it={reusable:!1,preempt:!0};class nt{constructor(e,t,s,i,n,r,o){this.sourceExpression=e,this.targetAttribute=s,this.targetProperty=i,this.mode=n,this.observerLocator=r,this.locator=o,this.interceptor=this,this.isBound=!1,this.$scope=null,this.task=null,this.targetSubscriber=null,this.persistentFlags=0,this.value=void 0,this.target=t,this.$platform=o.get(Ie)}updateTarget(e,t){this.targetObserver.setValue(e,t|=this.persistentFlags,this.target,this.targetProperty)}updateSource(e,t){this.sourceExpression.assign(t|=this.persistentFlags,this.$scope,this.locator,e)}handleChange(e,t,s){if(!this.isBound)return;const i=this.interceptor,n=this.sourceExpression,r=this.$scope,o=this.locator,a=0==(2&(s|=this.persistentFlags))&&(4&this.targetObserver.type)>0;if(10082!==n.$kind||this.obs.count>1){const t=0==(this.mode&Je);t&&this.obs.version++,e=n.evaluate(s,r,o,i),t&&this.obs.clear(!1)}let l;e!==this.value&&(this.value=e,a?(l=this.task,this.task=this.$platform.domWriteQueue.queueTask((()=>{this.task=null,i.updateTarget(e,s)}),it),null==l||l.cancel()):i.updateTarget(e,s))}$bind(e,t,s){var i;if(this.isBound){if(this.$scope===t)return;this.interceptor.$unbind(2|e)}this.persistentFlags=961&e,this.$scope=t,this.projection=s;let n=this.sourceExpression;n.hasBind&&n.bind(e,t,this.interceptor);let r=this.targetObserver;r||(r=this.targetObserver=new He(this.$platform,this.observerLocator,this.target,this.targetProperty,this.targetAttribute)),n=this.sourceExpression;const o=this.mode,a=this.interceptor;if(o&st){a.updateTarget(this.value=n.evaluate(e,t,this.locator,(o&et)>0?a:null),e)}o&tt&&r.subscribe(null!==(i=this.targetSubscriber)&&void 0!==i?i:this.targetSubscriber=new Ze(a)),this.isBound=!0}$unbind(e){var t;this.isBound&&(this.persistentFlags=0,this.sourceExpression.hasUnbind&&this.sourceExpression.unbind(e,this.$scope,this.interceptor),this.$scope=null,this.value=void 0,this.targetSubscriber&&this.targetObserver.unsubscribe(this.targetSubscriber),null===(t=this.task)||void 0===t||t.cancel(),this.task=null,this.obs.clear(!0),this.isBound=!1)}}L(nt);const{toView:rt}=R,ot={reusable:!1,preempt:!0};class at{constructor(e,t,s,i,n,r,o){this.observerLocator=e,this.interpolation=t,this.target=s,this.targetProperty=i,this.mode=n,this.locator=r,this.taskQueue=o,this.interceptor=this,this.isBound=!1,this.$scope=void 0,this.task=null,this.targetObserver=e.getAccessor(s,i);const a=t.expressions,l=this.partBindings=Array(a.length);for(let t=0,n=a.length;t<n;++t)l[t]=new lt(a[t],s,i,r,e,this)}updateTarget(e,t){const s=this.partBindings,i=this.interpolation.parts,n=s.length;let r="";if(1===n)r=i[0]+s[0].value+i[1];else{r=i[0];for(let e=0;n>e;++e)r+=s[e].value+i[e+1]}const o=this.targetObserver;if(0==(2&t)&&(4&o.type)>0){const e=this.task;this.task=this.taskQueue.queueTask((()=>{this.task=null,o.setValue(r,t,this.target,this.targetProperty)}),ot),null==e||e.cancel()}else o.setValue(r,t,this.target,this.targetProperty)}$bind(e,t){if(this.isBound){if(this.$scope===t)return;this.interceptor.$unbind(e)}this.isBound=!0,this.$scope=t;const s=this.partBindings;for(let i=0,n=s.length;n>i;++i)s[i].$bind(e,t);this.updateTarget(void 0,e)}$unbind(e){var t;if(!this.isBound)return;this.isBound=!1,this.$scope=void 0;const s=this.partBindings;for(let t=0,i=s.length;t<i;++t)s[t].interceptor.$unbind(e);null===(t=this.task)||void 0===t||t.cancel(),this.task=null}}class lt{constructor(e,t,s,i,n,r){this.sourceExpression=e,this.target=t,this.targetProperty=s,this.locator=i,this.observerLocator=n,this.owner=r,this.interceptor=this,this.mode=R.toView,this.value="",this.task=null,this.isBound=!1}handleChange(e,t,s){if(!this.isBound)return;const i=this.sourceExpression,n=this.obs;if(!(10082===i.$kind&&1===n.count)){const t=(this.mode&rt)>0;t&&n.version++,e=i.evaluate(s,this.$scope,this.locator,t?this.interceptor:null),t&&n.clear(!1)}e!=this.value&&(this.value=e,e instanceof Array&&this.observeCollection(e),this.owner.updateTarget(e,s))}handleCollectionChange(e,t){this.owner.updateTarget(void 0,t)}$bind(e,t){if(this.isBound){if(this.$scope===t)return;this.interceptor.$unbind(e)}this.isBound=!0,this.$scope=t,this.sourceExpression.hasBind&&this.sourceExpression.bind(e,t,this.interceptor);const s=this.value=this.sourceExpression.evaluate(e,t,this.locator,(this.mode&rt)>0?this.interceptor:null);s instanceof Array&&this.observeCollection(s)}$unbind(e){this.isBound&&(this.isBound=!1,this.sourceExpression.hasUnbind&&this.sourceExpression.unbind(e,this.$scope,this.interceptor),this.$scope=void 0,this.obs.clear(!0))}}L(lt);class ct{constructor(e,t,s,i,n,r){this.sourceExpression=e,this.target=t,this.locator=s,this.observerLocator=i,this.p=n,this.strict=r,this.interceptor=this,this.mode=R.toView,this.value="",this.task=null,this.isBound=!1}updateTarget(e,t){var s,i;const n=this.target,r=this.p.Node,o=this.value;this.value=e,o instanceof r&&(null===(s=o.parentNode)||void 0===s||s.removeChild(o)),e instanceof r?(n.textContent="",null===(i=n.parentNode)||void 0===i||i.insertBefore(e,n)):n.textContent=String(e)}handleChange(e,t,s){var i;if(!this.isBound)return;const n=this.sourceExpression,r=this.obs;if(!(10082===n.$kind&&1===r.count)){const t=(this.mode&rt)>0;t&&r.version++,e=n.evaluate(s|=this.strict?1:0,this.$scope,this.locator,t?this.interceptor:null),t&&r.clear(!1)}if(e===this.value)return null===(i=this.task)||void 0===i||i.cancel(),void(this.task=null);0==(2&s)?this.queueUpdate(e,s):this.updateTarget(e,s)}handleCollectionChange(){this.queueUpdate(this.value,0)}$bind(e,t){if(this.isBound){if(this.$scope===t)return;this.interceptor.$unbind(e)}this.isBound=!0,this.$scope=t,this.sourceExpression.hasBind&&this.sourceExpression.bind(e,t,this.interceptor);const s=this.value=this.sourceExpression.evaluate(e|=this.strict?1:0,t,this.locator,(this.mode&rt)>0?this.interceptor:null);s instanceof Array&&this.observeCollection(s),this.updateTarget(s,e)}$unbind(e){var t;this.isBound&&(this.isBound=!1,this.sourceExpression.hasUnbind&&this.sourceExpression.unbind(e,this.$scope,this.interceptor),this.$scope=void 0,this.obs.clear(!0),null===(t=this.task)||void 0===t||t.cancel(),this.task=null)}queueUpdate(e,t){const s=this.task;this.task=this.p.domWriteQueue.queueTask((()=>{this.task=null,this.updateTarget(e,t)}),ot),null==s||s.cancel()}}L(ct);class ht{constructor(e,t,s,i,n=!1){this.sourceExpression=e,this.targetProperty=t,this.observerLocator=s,this.locator=i,this.toBindingContext=n,this.interceptor=this,this.isBound=!1,this.$scope=void 0,this.task=null,this.target=null}handleChange(e,t,s){if(!this.isBound)return;const i=this.target,n=this.targetProperty,r=i[n];this.obs.version++,e=this.sourceExpression.evaluate(s,this.$scope,this.locator,this.interceptor),this.obs.clear(!1),e!==r&&(i[n]=e)}$bind(e,t){if(this.isBound){if(this.$scope===t)return;this.interceptor.$unbind(2|e)}this.$scope=t,this.target=this.toBindingContext?t.bindingContext:t.overrideContext;const s=this.sourceExpression;s.hasBind&&s.bind(e,t,this.interceptor),this.target[this.targetProperty]=this.sourceExpression.evaluate(2|e,t,this.locator,this.interceptor),this.isBound=!0}$unbind(e){if(!this.isBound)return;const t=this.sourceExpression;t.hasUnbind&&t.unbind(e,this.$scope,this.interceptor),this.$scope=void 0,this.obs.clear(!0),this.isBound=!1}}L(ht);const{oneTime:ut,toView:dt,fromView:pt}=R,gt=dt|ut,ft={reusable:!1,preempt:!0};class vt{constructor(e,t,s,i,n,r,o){this.sourceExpression=e,this.target=t,this.targetProperty=s,this.mode=i,this.observerLocator=n,this.locator=r,this.taskQueue=o,this.interceptor=this,this.isBound=!1,this.$scope=void 0,this.targetObserver=void 0,this.persistentFlags=0,this.task=null,this.targetSubscriber=null}updateTarget(e,t){this.targetObserver.setValue(e,t|=this.persistentFlags,this.target,this.targetProperty)}updateSource(e,t){this.sourceExpression.assign(t|=this.persistentFlags,this.$scope,this.locator,e)}handleChange(e,t,s){if(!this.isBound)return;const i=this.interceptor,n=this.sourceExpression,r=this.$scope,o=this.locator,a=0==(2&(s|=this.persistentFlags))&&(4&this.targetObserver.type)>0,l=this.obs;if(10082!==n.$kind||l.count>1){const t=this.mode>ut;t&&l.version++,e=n.evaluate(s,r,o,i),t&&l.clear(!1)}if(a){const t=this.task;this.task=this.taskQueue.queueTask((()=>{i.updateTarget(e,s),this.task=null}),ft),null==t||t.cancel()}else i.updateTarget(e,s)}$bind(e,t){var s;if(this.isBound){if(this.$scope===t)return;this.interceptor.$unbind(2|e)}this.persistentFlags=961&(e|=1),this.$scope=t;let i=this.sourceExpression;i.hasBind&&i.bind(e,t,this.interceptor);const n=this.mode;let r=this.targetObserver;if(!r){const e=this.observerLocator;r=n&pt?e.getObserver(this.target,this.targetProperty):e.getAccessor(this.target,this.targetProperty),this.targetObserver=r}i=this.sourceExpression;const o=this.interceptor,a=(n&dt)>0;n&gt&&o.updateTarget(i.evaluate(e,t,this.locator,a?o:null),e),n&pt&&(r.subscribe(null!==(s=this.targetSubscriber)&&void 0!==s?s:this.targetSubscriber=new Ze(o)),a||o.updateSource(r.getValue(this.target,this.targetProperty),e)),this.isBound=!0}$unbind(e){if(!this.isBound)return;this.persistentFlags=0,this.sourceExpression.hasUnbind&&this.sourceExpression.unbind(e,this.$scope,this.interceptor),this.$scope=void 0;const t=this.task;this.targetSubscriber&&this.targetObserver.unsubscribe(this.targetSubscriber),null!=t&&(t.cancel(),this.task=null),this.obs.clear(!0),this.isBound=!1}}L(vt);class mt{constructor(e,t,s){this.sourceExpression=e,this.target=t,this.locator=s,this.interceptor=this,this.isBound=!1,this.$scope=void 0}$bind(e,t){if(this.isBound){if(this.$scope===t)return;this.interceptor.$unbind(2|e)}this.$scope=t,this.sourceExpression.hasBind&&this.sourceExpression.bind(e,t,this),this.sourceExpression.assign(e,this.$scope,this.locator,this.target),this.isBound=!0}$unbind(e){if(!this.isBound)return;let t=this.sourceExpression;t.evaluate(e,this.$scope,this.locator,null)===this.target&&t.assign(e,this.$scope,this.locator,null),t=this.sourceExpression,t.hasUnbind&&t.unbind(e,this.$scope,this.interceptor),this.$scope=void 0,this.isBound=!1}observeProperty(e,t){}handleChange(e,t,s){}}const bt=l.createInterface("IAppTask");class yt{constructor(e,t,s){this.c=void 0,this.slot=e,this.k=t,this.cb=s}register(e){return this.c=e.register(h.instance(bt,this))}run(){const e=this.k,t=this.cb;return null===e?t():t(this.c.get(e))}}const wt=Object.freeze({beforeCreate:xt("beforeCreate"),hydrating:xt("hydrating"),hydrated:xt("hydrated"),beforeActivate:xt("beforeActivate"),afterActivate:xt("afterActivate"),beforeDeactivate:xt("beforeDeactivate"),afterDeactivate:xt("afterDeactivate")});function xt(e){return function(t,s){return"function"==typeof s?new yt(e,t,s):new yt(e,null,t)}}function kt(e,s){let n;function r(e,s){arguments.length>1&&(n.property=s),i.define(Tt.name,$t.create(s,n),e.constructor,s),t.annotation.appendTo(e.constructor,Tt.keyFrom(s))}return arguments.length>1?(n={},void r(e,s)):"string"==typeof e?(n={},r):(n=void 0===e?{}:e,r)}function Ct(e){return e.startsWith(Tt.name)}const Tt={name:t.annotation.keyFor("children-observer"),keyFrom:e=>`${Tt.name}:${e}`,from(...e){const t={},s=Array.isArray;function i(e){t[e]=$t.create(e)}return e.forEach((function(e){s(e)?e.forEach(i):e instanceof $t?t[e.property]=e:void 0!==e&&Object.keys(e).forEach((s=>function(e,s){t[e]=$t.create(e,s)}(s,e)))})),t},getAll(e){const n=Tt.name.length+1,r=[],o=s(e);let a,l,c,h=o.length,u=0;for(;--h>=0;){c=o[h],a=t.annotation.getKeys(c).filter(Ct),l=a.length;for(let e=0;e<l;++e)r[u++]=i.getOwn(Tt.name,c,a[e].slice(n))}return r}},At={childList:!0};class $t{constructor(e,t,s,i,n,r){this.callback=e,this.property=t,this.options=s,this.query=i,this.filter=n,this.map=r}static create(e,t={}){var s;return new $t(n(t.callback,`${e}Changed`),n(t.property,e),null!==(s=t.options)&&void 0!==s?s:At,t.query,t.filter,t.map)}}let Et=class{constructor(e,t,s,i,n=St,r=Ot,o=Pt,a){this.controller=e,this.obj=t,this.propertyKey=s,this.query=n,this.filter=r,this.map=o,this.options=a,this.observing=!1,this.children=void 0,this.observer=void 0,this.callback=t[i],Reflect.defineProperty(this.obj,this.propertyKey,{enumerable:!0,configurable:!0,get:()=>this.getValue(),set:()=>{}})}getValue(){return this.observing?this.children:this.get()}setValue(e){}start(){var e;this.observing||(this.observing=!0,this.children=this.get(),(null!==(e=this.observer)&&void 0!==e?e:this.observer=new this.controller.host.ownerDocument.defaultView.MutationObserver((()=>{this.onChildrenChanged()}))).observe(this.controller.host,this.options))}stop(){this.observing&&(this.observing=!1,this.observer.disconnect(),this.children=a)}onChildrenChanged(){this.children=this.get(),void 0!==this.callback&&this.callback.call(this.obj),this.subs.notify(this.children,void 0,0)}get(){return function(e,t,s,i){var n;const r=t(e),o=r.length,a=[];let l,c,h,u=0;for(;u<o;++u)l=r[u],c=Ht.for(l,Rt),h=null!==(n=null==c?void 0:c.viewModel)&&void 0!==n?n:null,s(l,c,h)&&a.push(i(l,c,h));return a}(this.controller,this.query,this.filter,this.map)}};function St(e){return e.host.childNodes}function Ot(e,t,s){return!!s}function Pt(e,t,s){return s}Et=oe([M()],Et);const Rt={optional:!0};function Mt(e){return function(t){return jt.define(e,t)}}function Bt(e){return function(t){return jt.define("string"==typeof e?{isTemplateController:!0,name:e}:{isTemplateController:!0,...e},t)}}class Lt{constructor(e,t,s,i,n,r,o,a,l){this.Type=e,this.name=t,this.aliases=s,this.key=i,this.defaultBindingMode=n,this.isTemplateController=r,this.bindables=o,this.noMultiBindings=a,this.watches=l}static create(e,t){let s,i;return"string"==typeof e?(s=e,i={name:s}):(s=e.name,i=e),new Lt(t,n(jt.getAnnotation(t,"name"),s),d(jt.getAnnotation(t,"aliases"),i.aliases,t.aliases),jt.keyFrom(s),n(jt.getAnnotation(t,"defaultBindingMode"),i.defaultBindingMode,t.defaultBindingMode,R.toView),n(jt.getAnnotation(t,"isTemplateController"),i.isTemplateController,t.isTemplateController,!1),he.from(...he.getAll(t),jt.getAnnotation(t,"bindables"),t.bindables,i.bindables),n(jt.getAnnotation(t,"noMultiBindings"),i.noMultiBindings,t.noMultiBindings,!1),d(qt.getAnnotation(t),t.watches))}register(e){const{Type:t,key:s,aliases:i}=this;h.transient(s,t).register(e),h.aliasTo(s,t).register(e),j(i,jt,s,e)}}const jt={name:t.resource.keyFor("custom-attribute"),keyFrom:e=>`${jt.name}:${e}`,isType:e=>"function"==typeof e&&i.hasOwn(jt.name,e),for(e,t){var s;return null!==(s=pi(e,jt.keyFrom(t)))&&void 0!==s?s:void 0},define(e,s){const n=Lt.create(e,s);return i.define(jt.name,n,n.Type),i.define(jt.name,n,n),t.resource.appendTo(s,jt.name),n.Type},getDefinition(e){const t=i.getOwn(jt.name,e);if(void 0===t)throw new Error(`No definition found for type ${e.name}`);return t},annotate(e,s,n){i.define(t.annotation.keyFor(s),n,e)},getAnnotation:(e,s)=>i.getOwn(t.annotation.keyFor(s),e)};function Vt(e,t){if(!e)throw new Error("Invalid watch config. Expected an expression or a fn");return function(s,i,n){const r=null==i,o=r?s:s.constructor,a=new It(e,r?t:n.value);if(r){if("function"!=typeof t&&(null==t||!(t in o.prototype)))throw new Error(`Invalid change handler config. Method "${String(t)}" not found in class ${o.name}`)}else if("function"!=typeof(null==n?void 0:n.value))throw new Error(`decorated target ${String(i)} is not a class method.`);qt.add(o,a),jt.isType(o)&&jt.getDefinition(o).watches.push(a),Ht.isType(o)&&Ht.getDefinition(o).watches.push(a)}}class It{constructor(e,t){this.expression=e,this.callback=t}}const Nt=a,qt={name:t.annotation.keyFor("watch"),add(e,t){let s=i.getOwn(qt.name,e);null==s&&i.define(qt.name,s=[],e),s.push(t)},getAnnotation(e){var t;return null!==(t=i.getOwn(qt.name,e))&&void 0!==t?t:Nt}};function Dt(e){return function(t){return Ht.define(e,t)}}function Ft(e){return void 0===e?function(e){Ht.annotate(e,"shadowOptions",{mode:"open"})}:"function"!=typeof e?function(t){Ht.annotate(t,"shadowOptions",e)}:void Ht.annotate(e,"shadowOptions",{mode:"open"})}function zt(e){if(void 0===e)return function(e){Ht.annotate(e,"containerless",!0)};Ht.annotate(e,"containerless",!0)}const Ut=new WeakMap;class Kt{constructor(e,t,s,i,n,r,o,a,l,c,h,u,d,p,g,f,v,m,b,y){this.Type=e,this.name=t,this.aliases=s,this.key=i,this.cache=n,this.template=r,this.instructions=o,this.dependencies=a,this.injectable=l,this.needsCompile=c,this.surrogates=h,this.bindables=u,this.childrenObservers=d,this.containerless=p,this.isStrictBinding=g,this.shadowOptions=f,this.hasSlots=v,this.enhance=m,this.watches=b,this.processContent=y}static create(e,t=null){if(null===t){const s=e;if("string"==typeof s)throw new Error(`Cannot create a custom element definition with only a name and no type: ${e}`);const i=p("name",s,Ht.generateName);return t="function"==typeof s.Type?s.Type:Ht.generateType(g(i)),new Kt(t,i,d(s.aliases),p("key",s,(()=>Ht.keyFrom(i))),p("cache",s,(()=>0)),p("template",s,(()=>null)),d(s.instructions),d(s.dependencies),p("injectable",s,(()=>null)),p("needsCompile",s,(()=>!0)),d(s.surrogates),he.from(s.bindables),Tt.from(s.childrenObservers),p("containerless",s,(()=>!1)),p("isStrictBinding",s,(()=>!1)),p("shadowOptions",s,(()=>null)),p("hasSlots",s,(()=>!1)),p("enhance",s,(()=>!1)),p("watches",s,(()=>a)),f("processContent",t,(()=>null)))}if("string"==typeof e)return new Kt(t,e,d(Ht.getAnnotation(t,"aliases"),t.aliases),Ht.keyFrom(e),f("cache",t,(()=>0)),f("template",t,(()=>null)),d(Ht.getAnnotation(t,"instructions"),t.instructions),d(Ht.getAnnotation(t,"dependencies"),t.dependencies),f("injectable",t,(()=>null)),f("needsCompile",t,(()=>!0)),d(Ht.getAnnotation(t,"surrogates"),t.surrogates),he.from(...he.getAll(t),Ht.getAnnotation(t,"bindables"),t.bindables),Tt.from(...Tt.getAll(t),Ht.getAnnotation(t,"childrenObservers"),t.childrenObservers),f("containerless",t,(()=>!1)),f("isStrictBinding",t,(()=>!1)),f("shadowOptions",t,(()=>null)),f("hasSlots",t,(()=>!1)),f("enhance",t,(()=>!1)),d(qt.getAnnotation(t),t.watches),f("processContent",t,(()=>null)));const s=p("name",e,Ht.generateName);return new Kt(t,s,d(Ht.getAnnotation(t,"aliases"),e.aliases,t.aliases),Ht.keyFrom(s),v("cache",e,t,(()=>0)),v("template",e,t,(()=>null)),d(Ht.getAnnotation(t,"instructions"),e.instructions,t.instructions),d(Ht.getAnnotation(t,"dependencies"),e.dependencies,t.dependencies),v("injectable",e,t,(()=>null)),v("needsCompile",e,t,(()=>!0)),d(Ht.getAnnotation(t,"surrogates"),e.surrogates,t.surrogates),he.from(...he.getAll(t),Ht.getAnnotation(t,"bindables"),t.bindables,e.bindables),Tt.from(...Tt.getAll(t),Ht.getAnnotation(t,"childrenObservers"),t.childrenObservers,e.childrenObservers),v("containerless",e,t,(()=>!1)),v("isStrictBinding",e,t,(()=>!1)),v("shadowOptions",e,t,(()=>null)),v("hasSlots",e,t,(()=>!1)),v("enhance",e,t,(()=>!1)),d(e.watches,qt.getAnnotation(t),t.watches),v("processContent",e,t,(()=>null)))}static getOrCreate(e){if(e instanceof Kt)return e;if(Ut.has(e))return Ut.get(e);const t=Kt.create(e);return Ut.set(e,t),i.define(Ht.name,t,t.Type),t}register(e){const{Type:t,key:s,aliases:i}=this;e.has(s,!1)||(h.transient(s,t).register(e),h.aliasTo(s,t).register(e),j(i,Ht,s,e))}}const Wt={name:void 0,searchParents:!1,optional:!1},Ht={name:t.resource.keyFor("custom-element"),keyFrom:e=>`${Ht.name}:${e}`,isType:e=>"function"==typeof e&&i.hasOwn(Ht.name,e),for(e,t=Wt){if(void 0===t.name&&!0!==t.searchParents){const s=pi(e,Ht.name);if(null===s){if(!0===t.optional)return null;throw new Error("The provided node is not a custom element or containerless host.")}return s}if(void 0!==t.name){if(!0!==t.searchParents){const s=pi(e,Ht.name);if(null===s)throw new Error("The provided node is not a custom element or containerless host.");return s.is(t.name)?s:void 0}let s=e,i=!1;for(;null!==s;){const e=pi(s,Ht.name);if(null!==e&&(i=!0,e.is(t.name)))return e;s=wi(s)}if(i)return;throw new Error("The provided node does does not appear to be part of an Aurelia app DOM tree, or it was added to the DOM in a way that Aurelia cannot properly resolve its position in the component tree.")}let s=e;for(;null!==s;){const e=pi(s,Ht.name);if(null!==e)return e;s=wi(s)}throw new Error("The provided node does does not appear to be part of an Aurelia app DOM tree, or it was added to the DOM in a way that Aurelia cannot properly resolve its position in the component tree.")},define(e,s){const n=Kt.create(e,s);return i.define(Ht.name,n,n.Type),i.define(Ht.name,n,n),t.resource.appendTo(n.Type,Ht.name),n.Type},getDefinition(e){const t=i.getOwn(Ht.name,e);if(void 0===t)throw new Error(`No definition found for type ${e.name}`);return t},annotate(e,s,n){i.define(t.annotation.keyFor(s),n,e)},getAnnotation:(e,s)=>i.getOwn(t.annotation.keyFor(s),e),generateName:function(){let e=0;return function(){return"unnamed-"+ ++e}}(),createInjectable(){const e=function(t,s,i){return l.getOrCreateAnnotationParamTypes(t)[i]=e,t};return e.register=function(t){return{resolve:(t,s)=>s.has(e,!0)?s.get(e):null}},e},generateType:function(){const e={value:"",writable:!1,enumerable:!1,configurable:!0},t={};return function(s,i=t){const n=class{};return e.value=s,Reflect.defineProperty(n,"name",e),i!==t&&Object.assign(n.prototype,i),n}}()},Gt=t.annotation.keyFor("processContent");function _t(e){return void 0===e?function(e,t,s){i.define(Gt,Qt(e,t),e)}:function(t){e=Qt(t,e);const s=i.getOwn(Ht.name,t);return void 0!==s?s.processContent=e:i.define(Gt,e,t),t}}function Qt(e,t){"string"==typeof t&&(t=e[t]);const s=typeof t;if("function"!==s)throw new Error(`Invalid @processContent hook. Expected the hook to be a function (when defined in a class, it needs to be a static function) but got a ${s}.`);return t}const Xt=l.createInterface("IViewFactory");class Yt{constructor(e,t){this.name=e,this.context=t,this.isCaching=!1,this.cache=null,this.cacheSize=-1,this.container=t.container}setCacheSize(e,t){e&&("*"===e?e=Yt.maxCacheSize:"string"==typeof e&&(e=parseInt(e,10)),-1!==this.cacheSize&&t||(this.cacheSize=e)),this.cache=this.cacheSize>0?[]:null,this.isCaching=this.cacheSize>0}canReturnToCache(e){return null!=this.cache&&this.cache.length<this.cacheSize}tryReturnToCache(e){return!!this.canReturnToCache(e)&&(this.cache.push(e),!0)}create(e,t){const s=this.cache;let i;return null!=s&&s.length>0?(i=s.pop(),i):(i=Ws.forSyntheticView(null,this.context,this,e,t),i)}}Yt.maxCacheSize=65535;const Zt=new WeakSet;function Jt(e){return!Zt.has(e)}function es(e){return Zt.add(e),Kt.create(e)}const ts={name:t.resource.keyFor("views"),has:e=>"function"==typeof e&&(i.hasOwn(ts.name,e)||"$views"in e),get(e){if("function"==typeof e&&"$views"in e){const t=e.$views.filter(Jt).map(es);for(const s of t)ts.add(e,s)}let t=i.getOwn(ts.name,e);return void 0===t&&i.define(ts.name,t=[],e),t},add(e,t){const s=Kt.create(t);let n=i.getOwn(ts.name,e);return void 0===n?i.define(ts.name,n=[s],e):n.push(s),n}};function ss(e){return function(t){ts.add(t,e)}}const is=l.createInterface("IViewLocator",(e=>e.singleton(ns)));class ns{constructor(){this.modelInstanceToBoundComponent=new WeakMap,this.modelTypeToUnboundComponent=new Map}getViewComponentForObject(e,t){if(e){const s=ts.has(e.constructor)?ts.get(e.constructor):[],i="function"==typeof t?t(e,s):this.getViewName(s,t);return this.getOrCreateBoundComponent(e,s,i)}return null}getOrCreateBoundComponent(e,t,s){let i,n=this.modelInstanceToBoundComponent.get(e);if(void 0===n?(n={},this.modelInstanceToBoundComponent.set(e,n)):i=n[s],void 0===i){const r=this.getOrCreateUnboundComponent(e,t,s);i=Ht.define(Ht.getDefinition(r),class extends r{constructor(){super(e)}}),n[s]=i}return i}getOrCreateUnboundComponent(e,t,s){let i,n=this.modelTypeToUnboundComponent.get(e.constructor);if(void 0===n?(n={},this.modelTypeToUnboundComponent.set(e.constructor,n)):i=n[s],void 0===i){i=Ht.define(this.getView(t,s),class{constructor(e){this.viewModel=e}define(e,t,s){const i=this.viewModel;if(e.scope=V.fromParent(e.scope,i),void 0!==i.define)return i.define(e,t,s)}});const r=i.prototype;"hydrating"in e&&(r.hydrating=function(e){this.viewModel.hydrating(e)}),"hydrated"in e&&(r.hydrated=function(e){this.viewModel.hydrated(e)}),"created"in e&&(r.created=function(e){this.viewModel.created(e)}),"binding"in e&&(r.binding=function(e,t,s){return this.viewModel.binding(e,t,s)}),"bound"in e&&(r.bound=function(e,t,s){return this.viewModel.bound(e,t,s)}),"attaching"in e&&(r.attaching=function(e,t,s){return this.viewModel.attaching(e,t,s)}),"attached"in e&&(r.attached=function(e,t){return this.viewModel.attached(e,t)}),"detaching"in e&&(r.detaching=function(e,t,s){return this.viewModel.detaching(e,t,s)}),"unbinding"in e&&(r.unbinding=function(e,t,s){return this.viewModel.unbinding(e,t,s)}),"dispose"in e&&(r.dispose=function(){this.viewModel.dispose()}),n[s]=i}return i}getViewName(e,t){return t||(1===e.length?e[0].name:"default-view")}getView(e,t){const s=e.find((e=>e.name===t));if(void 0===s)throw new Error(`Could not find view: ${t}`);return s}}const rs=new WeakMap,os=new WeakMap;function as(e){return e instanceof ps}let ls=0;function cs(e,t){const s=Kt.getOrCreate(e);let i=rs.get(s);void 0===i&&rs.set(s,i=new WeakMap);let n=i.get(t);return void 0===n&&i.set(t,n=new ps(s,t)),n}cs.count=0,Reflect.defineProperty(cs,"count",{get:()=>ls});const hs=new WeakMap,us=Symbol(),ds=new WeakMap;class ps{constructor(e,t){var s,i;this.definition=e,this.fragment=null,this.factory=void 0,this.isCompiled=!1,this.renderers=Object.create(null),this.compiledDefinition=void 0,++ls,this.container=t;const n=null!==(s=(i=t.root)[us])&&void 0!==s?s:i[us]=t.root.getAll(ln);let r,o=0;for(;o<n.length;++o)r=n[o],this.renderers[r.instructionType]=r;this.root=t.root,this.platform=t.get(Ie)}get id(){return this.container.id}compile(e){let t;if(this.isCompiled)return this;this.isCompiled=!0;const s=this.definition;if(s.needsCompile){const i=this.container,n=i.get(an);let r=ds.get(i.root);null==r&&ds.set(i.root,r=new WeakMap);let o=r.get(s);null==o?r.set(s,o=n.compile(s,i,e)):i.register(...o.dependencies),t=this.compiledDefinition=o}else t=this.compiledDefinition=s;if(t.register(this.container),os.has(t))this.fragment=os.get(t);else{const e=this.platform.document,s=t.template;if(null===s||!0===this.definition.enhance)this.fragment=null;else if(s instanceof this.platform.Node)"TEMPLATE"===s.nodeName?this.fragment=e.adoptNode(s.content):(this.fragment=e.adoptNode(e.createDocumentFragment())).appendChild(s);else{const t=e.createElement("template");e.adoptNode(t.content),"string"==typeof s&&(t.innerHTML=s),this.fragment=t.content}os.set(t,this.fragment)}return this}getViewFactory(e){let t=this.factory;return void 0===t&&(void 0===e&&(e=this.definition.name),t=this.factory=new Yt(e,this)),t}createNodes(){if(!0===this.compiledDefinition.enhance)return new Ti(this.platform,this.compiledDefinition.template);if(null===this.fragment){let e=hs.get(this.platform);return void 0===e&&hs.set(this.platform,e=new Ti(this.platform,this.platform.document.createDocumentFragment())),e}return new Ti(this.platform,this.fragment.cloneNode(!0))}render(e,t,s,i,n){if(s.length!==i.instructions.length)throw new Error(`The compiled template is not aligned with the render instructions. There are ${s.length} targets and ${i.instructions.length} instructions.`);for(let n=0;n<s.length;++n)this.renderChildren(e,i.instructions[n],t,s[n]);null!=n&&this.renderChildren(e,i.surrogates,t,n)}renderChildren(e,t,s,i){for(let n=0;n<t.length;++n){const r=t[n];this.renderers[r.type].render(e,this,s,i,r)}}dispose(){throw new Error("Cannot dispose a render context")}}class gs{constructor(e){this.obj=e,this.value="",this.oldValue="",this.doNotCache=!0,this.nameIndex={},this.version=0,this.hasChanges=!1,this.isActive=!1,this.type=6}getValue(){return this.value}setValue(e,t){this.value=e,this.hasChanges=e!==this.oldValue,0==(256&t)&&this.flushChanges(t)}flushChanges(e){if(this.hasChanges){this.hasChanges=!1;const e=this.value,t=this.nameIndex;let s=this.version;this.oldValue=e;const i=fs(e);if(i.length>0&&this.addClassesAndUpdateIndex(i),this.version+=1,0===s)return;s-=1;for(const e in t)Object.prototype.hasOwnProperty.call(t,e)&&t[e]===s&&this.obj.classList.remove(e)}}addClassesAndUpdateIndex(e){const t=this.obj;for(let s=0,i=e.length;s<i;s++){const i=e[s];0!==i.length&&(this.nameIndex[i]=this.version,t.classList.add(i))}}}function fs(e){if("string"==typeof e)return vs(e);if("object"!=typeof e)return a;if(e instanceof Array){const t=e.length;if(t>0){const s=[];for(let i=0;i<t;++i)s.push(...fs(e[i]));return s}return a}const t=[];for(const s in e)Boolean(e[s])&&(s.includes(" ")?t.push(...vs(s)):t.push(s));return t}function vs(e){const t=e.match(/\S+/g);return null===t?a:t}function ms(...e){return new bs(e)}class bs{constructor(e){this.modules=e}register(e){var t;const s=Object.assign({},...this.modules),i=jt.define({name:"class",bindables:["value"]},((t=class{constructor(e){this.element=e}binding(){this.valueChanged()}valueChanged(){this.element.className=this.value?fs(this.value).map((e=>s[e]||e)).join(" "):""}}).inject=[fi],t));e.register(i)}}function ys(...e){return new xs(e)}const ws=l.createInterface("IShadowDOMStyleFactory",(e=>e.cachedCallback((e=>$s.supported(e.get(Ie))?e.get(ks):e.get(Cs)))));class xs{constructor(e){this.css=e}register(e){const t=e.get(As),s=e.get(ws);e.register(h.instance(Ts,s.createStyles(this.css,t)))}}let ks=class{constructor(e){this.p=e,this.cache=new Map}createStyles(e,t){return new $s(this.p,e,this.cache,t)}};ks=oe([ae(0,Ie)],ks);let Cs=class{constructor(e){this.p=e}createStyles(e,t){return new Es(this.p,e,t)}};Cs=oe([ae(0,Ie)],Cs);const Ts=l.createInterface("IShadowDOMStyles"),As=l.createInterface("IShadowDOMGlobalStyles",(e=>e.instance({applyTo:o})));class $s{constructor(e,t,s,i=null){this.sharedStyles=i,this.styleSheets=t.map((t=>{let i;return t instanceof e.CSSStyleSheet?i=t:(i=s.get(t),void 0===i&&(i=new e.CSSStyleSheet,i.replaceSync(t),s.set(t,i))),i}))}static supported(e){return"adoptedStyleSheets"in e.ShadowRoot.prototype}applyTo(e){null!==this.sharedStyles&&this.sharedStyles.applyTo(e),e.adoptedStyleSheets=[...e.adoptedStyleSheets,...this.styleSheets]}}class Es{constructor(e,t,s=null){this.p=e,this.localStyles=t,this.sharedStyles=s}applyTo(e){const t=this.localStyles,s=this.p;for(let i=t.length-1;i>-1;--i){const n=s.document.createElement("style");n.innerHTML=t[i],e.prepend(n)}null!==this.sharedStyles&&this.sharedStyles.applyTo(e)}}const Ss={shadowDOM:e=>wt.beforeCreate(m,(t=>{if(null!=e.sharedStyles){const s=t.get(ws);t.register(h.instance(As,s.createStyles(e.sharedStyles,null)))}}))},{enter:Os,exit:Ps}=I,{wrap:Rs,unwrap:Ms}=N;class Bs{constructor(e,t,s,i,n){this.obj=e,this.observerLocator=t,this.get=s,this.cb=i,this.useProxy=n,this.interceptor=this,this.value=void 0,this.isBound=!1,this.running=!1}handleChange(){this.run()}handleCollectionChange(){this.run()}$bind(){this.isBound||(this.isBound=!0,this.compute())}$unbind(){this.isBound&&(this.isBound=!1,this.obs.clear(!0))}run(){if(!this.isBound||this.running)return;const e=this.obj,t=this.value,s=this.compute();Object.is(s,t)||this.cb.call(e,s,t,e)}compute(){this.running=!0,this.obs.version++;try{return Os(this),this.value=Ms(this.get.call(void 0,this.useProxy?Rs(this.obj):this.obj,this))}finally{this.obs.clear(!1),this.running=!1,Ps(this)}}}class Ls{constructor(e,t,s,i,n){this.scope=e,this.locator=t,this.observerLocator=s,this.expression=i,this.callback=n,this.interceptor=this,this.isBound=!1,this.obj=e.bindingContext}handleChange(e){const t=this.expression,s=this.obj,i=this.value;10082===t.$kind&&1===this.obs.count||(this.obs.version++,e=t.evaluate(0,this.scope,this.locator,this),this.obs.clear(!1)),Object.is(e,i)||(this.value=e,this.callback.call(s,e,i,s))}$bind(){this.isBound||(this.isBound=!0,this.obs.version++,this.value=this.expression.evaluate(0,this.scope,this.locator,this),this.obs.clear(!1))}$unbind(){this.isBound&&(this.isBound=!1,this.obs.clear(!0),this.value=void 0)}}L(Bs),L(Ls);const js=l.createInterface("ILifecycleHooks");class Vs{constructor(e,t){this.definition=e,this.instance=t}}class Is{constructor(e,t){this.Type=e,this.propertyNames=t}static create(e,t){const s=new Set;let i=t.prototype;for(;i!==Object.prototype;){for(const e of Object.getOwnPropertyNames(i))"constructor"!==e&&s.add(e);i=Object.getPrototypeOf(i)}return new Is(t,s)}register(e){h.singleton(js,this.Type).register(e)}}const Ns=new WeakMap,qs={name:t.annotation.keyFor("lifecycle-hooks"),define(e,s){const n=Is.create(e,s);return i.define(qs.name,n,s),t.resource.appendTo(s,qs.name),n.Type},resolve(e){let t=Ns.get(e);if(void 0===t){t=new Ds;const s=e.root,n=s.id===e.id?e.getAll(js):e.has(js,!1)?[...s.getAll(js),...e.getAll(js)]:s.getAll(js);let r,o,a,l,c;for(r of n)for(l of(o=i.getOwn(qs.name,r.constructor),a=new Vs(o,r),o.propertyNames))c=t[l],void 0===c?t[l]=[a]:c.push(a)}return t}};class Ds{}function Fs(){return function(e){return qs.define({},e)}}var zs;!function(e){e[e.none=0]="none",e[e.host=1]="host",e[e.shadowRoot=2]="shadowRoot",e[e.location=3]="location"}(zs||(zs={}));const Us={optional:!0},Ks=new WeakMap;class Ws{constructor(e,t,s,i,n,r,o,l,c){switch(this.root=e,this.ctxCt=t,this.container=s,this.vmKind=i,this.flags=n,this.definition=r,this.viewFactory=o,this.viewModel=l,this.host=c,this.id=b("au$component"),this.head=null,this.tail=null,this.next=null,this.parent=null,this.bindings=null,this.children=null,this.hasLockedScope=!1,this.isStrictBinding=!1,this.scope=null,this.isBound=!1,this.hostController=null,this.mountTarget=0,this.shadowRoot=null,this.nodes=null,this.context=null,this.location=null,this.lifecycleHooks=null,this.state=0,this.logger=null,this.debug=!1,this.fullyNamed=!1,this.childrenObs=a,this.$initiator=null,this.$flags=0,this.$resolve=void 0,this.$reject=void 0,this.$promise=void 0,this.activatingStack=0,this.detachingStack=0,this.unbindingStack=0,null===e&&s.has(li,!0)&&(this.root=s.get(li)),this.platform=s.get(Ie),i){case 1:case 0:this.hooks=new Js(l);break;case 2:this.hooks=Js.none}}get isActive(){return(3&this.state)>0&&0==(4&this.state)}get name(){var e;if(null===this.parent)switch(this.vmKind){case 1:return`[${this.definition.name}]`;case 0:return this.definition.name;case 2:return this.viewFactory.name}switch(this.vmKind){case 1:return`${this.parent.name}>[${this.definition.name}]`;case 0:return`${this.parent.name}>${this.definition.name}`;case 2:return this.viewFactory.name===(null===(e=this.parent.definition)||void 0===e?void 0:e.name)?`${this.parent.name}[view]`:`${this.parent.name}[view:${this.viewFactory.name}]`}}static getCached(e){return Ks.get(e)}static getCachedOrThrow(e){const t=Ws.getCached(e);if(void 0===t)throw new Error(`There is no cached controller for the provided ViewModel: ${String(e)}`);return t}static forCustomElement(e,t,s,i,n,r,o=0,a=!0,l){if(Ks.has(i))return Ks.get(i);l=null!=l?l:Ht.getDefinition(i.constructor);const c=new Ws(e,t,s,0,o,l,null,i,n);return s.register(...l.dependencies),s.registerResolver(ri,new y("IHydrationContext",new oi(c,r,t.get(w(ri))))),Ks.set(i,c),a&&c.hydrateCustomElement(r),c}static forCustomAttribute(e,t,s,i,n=0,r){if(Ks.has(s))return Ks.get(s);r=null!=r?r:jt.getDefinition(s.constructor);const o=new Ws(e,t,t,1,n,r,null,s,i);return Ks.set(s,o),o.hydrateCustomAttribute(),o}static forSyntheticView(e,t,s,i=0,n){const r=new Ws(e,t.container,t.container,2,i,null,s,null,null);return r.parent=null!=n?n:null,r.hydrateSynthetic(t),r}hydrateCustomElement(e){var t;this.logger=this.container.get(x).root,this.debug=this.logger.config.level<=1,this.debug&&(this.logger=this.logger.scopeTo(this.name));const s=this.container,i=this.flags,n=this.viewModel;let r=this.definition;if(this.scope=V.create(n,null,!0),r.watches.length>0&&Xs(this,s,r,n),Gs(this,r,i,n),this.childrenObs=function(e,t,s,i){const n=t.childrenObservers,r=Object.getOwnPropertyNames(n),o=r.length;if(o>0){const t=Hs(i),s=[];let a,l,c=0;for(;c<o;++c)a=r[c],null==t[a]&&(l=n[a],s[s.length]=t[a]=new Et(e,i,a,l.callback,l.query,l.filter,l.map,l.options));return s}return a}(this,r,0,n),this.hooks.hasDefine){this.debug&&this.logger.trace("invoking define() hook");const e=n.define(this,this.ctxCt,r);void 0!==e&&e!==r&&(r=Kt.getOrCreate(e))}this.context=cs(r,s),this.lifecycleHooks=qs.resolve(s),r.register(s),null!==r.injectable&&s.registerResolver(r.injectable,new y("definition.injectable",n)),(null===(t=this.root)||void 0===t?void 0:t.controller)!==this&&(this.hydrate(e),this.hydrateChildren())}hydrate(e){this.hooks.hasHydrating&&(this.debug&&this.logger.trace("invoking hydrating() hook"),this.viewModel.hydrating(this));const t=this.context.compile(e),{shadowOptions:s,isStrictBinding:i,hasSlots:n,containerless:r}=t.compiledDefinition;if(this.isStrictBinding=i,null!==(this.hostController=Ht.for(this.host,Us))&&(this.host=this.platform.document.createElement(this.context.definition.name)),gi(this.host,Ht.name,this),gi(this.host,this.definition.key,this),null!==s||n){if(r)throw new Error("You cannot combine the containerless custom element option with Shadow DOM.");gi(this.shadowRoot=this.host.attachShadow(null!=s?s:ei),Ht.name,this),gi(this.shadowRoot,this.definition.key,this),this.mountTarget=2}else r?(gi(this.location=ki(this.host),Ht.name,this),gi(this.location,this.definition.key,this),this.mountTarget=3):this.mountTarget=1;this.viewModel.$controller=this,this.nodes=t.createNodes(),this.hooks.hasHydrated&&(this.debug&&this.logger.trace("invoking hydrated() hook"),this.viewModel.hydrated(this))}hydrateChildren(){const e=this.nodes.findTargets();this.context.render(this.flags,this,e,this.context.compiledDefinition,this.host),this.hooks.hasCreated&&(this.debug&&this.logger.trace("invoking created() hook"),this.viewModel.created(this))}hydrateCustomAttribute(){const e=this.definition,t=this.viewModel;e.watches.length>0&&Xs(this,this.container,e,t),Gs(this,e,this.flags,t),t.$controller=this,this.lifecycleHooks=qs.resolve(this.container),this.hooks.hasCreated&&(this.debug&&this.logger.trace("invoking created() hook"),this.viewModel.created(this))}hydrateSynthetic(e){this.context=e;const t=e.compile(null),s=t.compiledDefinition;this.isStrictBinding=s.isStrictBinding;const i=(this.nodes=t.createNodes()).findTargets();t.render(this.flags,this,i,s,void 0)}activate(e,t,s,i){var n;switch(this.state){case 0:case 8:if(null!==t&&!t.isActive)return;this.state=1;break;case 2:return;case 32:throw new Error(`${this.name} trying to activate a controller that is disposed.`);default:throw new Error(`${this.name} unexpected state: ${ii(this.state)}.`)}switch(this.parent=t,this.debug&&!this.fullyNamed&&(this.fullyNamed=!0,(null!==(n=this.logger)&&void 0!==n?n:this.logger=this.container.get(x).root.scopeTo(this.name)).trace("activate()")),s|=2,this.vmKind){case 0:this.scope.parentScope=null!=i?i:null;break;case 1:this.scope=null!=i?i:null;break;case 2:if(null==i)throw new Error("Scope is null or undefined");this.hasLockedScope||(this.scope=i)}if(this.isStrictBinding&&(s|=1),this.$initiator=e,this.$flags=s,this.enterActivating(),this.hooks.hasBinding){this.debug&&this.logger.trace("binding()");const e=this.viewModel.binding(this.$initiator,this.parent,this.$flags);if(e instanceof Promise)return this.ensurePromise(),e.then((()=>{this.bind()})).catch((e=>{this.reject(e)})),this.$promise}return this.bind(),this.$promise}bind(){if(this.debug&&this.logger.trace("bind()"),this.childrenObs.length)for(let e=0;e<this.childrenObs.length;++e)this.childrenObs[e].start();if(null!==this.bindings)for(let e=0;e<this.bindings.length;++e)this.bindings[e].$bind(this.$flags,this.scope);if(this.hooks.hasBound){this.debug&&this.logger.trace("bound()");const e=this.viewModel.bound(this.$initiator,this.parent,this.$flags);if(e instanceof Promise)return this.ensurePromise(),void e.then((()=>{this.isBound=!0,this.attach()})).catch((e=>{this.reject(e)}))}this.isBound=!0,this.attach()}append(...e){switch(this.mountTarget){case 1:this.host.append(...e);break;case 2:this.shadowRoot.append(...e);break;case 3:for(let t=0;t<e.length;++t)this.location.parentNode.insertBefore(e[t],this.location)}}attach(){var e;if(this.debug&&this.logger.trace("attach()"),null!==this.hostController)switch(this.mountTarget){case 1:case 2:this.hostController.append(this.host);break;case 3:this.hostController.append(this.location.$start,this.location)}switch(this.mountTarget){case 1:this.nodes.appendTo(this.host,null===(e=this.definition)||void 0===e?void 0:e.enhance);break;case 2:{const e=this.container;(e.has(Ts,!1)?e.get(Ts):e.get(As)).applyTo(this.shadowRoot),this.nodes.appendTo(this.shadowRoot);break}case 3:this.nodes.insertBefore(this.location)}if(this.hooks.hasAttaching){this.debug&&this.logger.trace("attaching()");const e=this.viewModel.attaching(this.$initiator,this.parent,this.$flags);e instanceof Promise&&(this.ensurePromise(),this.enterActivating(),e.then((()=>{this.leaveActivating()})).catch((e=>{this.reject(e)})))}if(null!==this.children)for(let e=0;e<this.children.length;++e)this.children[e].activate(this.$initiator,this,this.$flags,this.scope);this.leaveActivating()}deactivate(e,t,s){switch(-17&this.state){case 2:this.state=4;break;case 0:case 8:case 32:case 40:return;default:throw new Error(`${this.name} unexpected state: ${ii(this.state)}.`)}if(this.debug&&this.logger.trace("deactivate()"),this.$initiator=e,this.$flags=s,e===this&&this.enterDetaching(),this.childrenObs.length)for(let e=0;e<this.childrenObs.length;++e)this.childrenObs[e].stop();if(null!==this.children)for(let t=0;t<this.children.length;++t)this.children[t].deactivate(e,this,s);if(this.hooks.hasDetaching){this.debug&&this.logger.trace("detaching()");const t=this.viewModel.detaching(this.$initiator,this.parent,this.$flags);t instanceof Promise&&(this.ensurePromise(),e.enterDetaching(),t.then((()=>{e.leaveDetaching()})).catch((t=>{e.reject(t)})))}if(null===e.head?e.head=this:e.tail.next=this,e.tail=this,e===this)return this.leaveDetaching(),this.$promise}removeNodes(){switch(this.vmKind){case 0:case 2:this.nodes.remove(),this.nodes.unlink()}if(null!==this.hostController)switch(this.mountTarget){case 1:case 2:this.host.remove();break;case 3:this.location.$start.remove(),this.location.remove()}}unbind(){this.debug&&this.logger.trace("unbind()");const e=4|this.$flags;if(null!==this.bindings)for(let t=0;t<this.bindings.length;++t)this.bindings[t].$unbind(e);switch(this.parent=null,this.vmKind){case 1:this.scope=null;break;case 2:this.hasLockedScope||(this.scope=null),16!=(16&this.state)||this.viewFactory.tryReturnToCache(this)||this.$initiator!==this||this.dispose();break;case 0:this.scope.parentScope=null}32==(32&e)&&this.$initiator===this&&this.dispose(),this.state=32&this.state|8,this.$initiator=null,this.resolve()}ensurePromise(){void 0===this.$promise&&(this.$promise=new Promise(((e,t)=>{this.$resolve=e,this.$reject=t})),this.$initiator!==this&&this.parent.ensurePromise())}resolve(){if(void 0!==this.$promise){const e=this.$resolve;this.$resolve=this.$reject=this.$promise=void 0,e()}}reject(e){if(void 0!==this.$promise){const t=this.$reject;this.$resolve=this.$reject=this.$promise=void 0,t(e)}this.$initiator!==this&&this.parent.reject(e)}enterActivating(){++this.activatingStack,this.$initiator!==this&&this.parent.enterActivating()}leaveActivating(){if(0==--this.activatingStack){if(this.hooks.hasAttached){this.debug&&this.logger.trace("attached()");const e=this.viewModel.attached(this.$initiator,this.$flags);if(e instanceof Promise)return this.ensurePromise(),void e.then((()=>{this.state=2,this.resolve(),this.$initiator!==this&&this.parent.leaveActivating()})).catch((e=>{this.reject(e)}))}this.state=2,this.resolve()}this.$initiator!==this&&this.parent.leaveActivating()}enterDetaching(){++this.detachingStack}leaveDetaching(){if(0==--this.detachingStack){this.debug&&this.logger.trace("detach()"),this.enterUnbinding(),this.removeNodes();let e=this.$initiator.head;for(;null!==e;){if(e!==this&&(e.debug&&e.logger.trace("detach()"),e.removeNodes()),e.hooks.hasUnbinding){e.debug&&e.logger.trace("unbinding()");const t=e.viewModel.unbinding(e.$initiator,e.parent,e.$flags);t instanceof Promise&&(this.ensurePromise(),this.enterUnbinding(),t.then((()=>{this.leaveUnbinding()})).catch((e=>{this.reject(e)})))}e=e.next}this.leaveUnbinding()}}enterUnbinding(){++this.unbindingStack}leaveUnbinding(){if(0==--this.unbindingStack){this.debug&&this.logger.trace("unbind()");let e=this.$initiator.head,t=null;for(;null!==e;)e!==this&&(e.isBound=!1,e.unbind()),t=e.next,e.next=null,e=t;this.head=this.tail=null,this.isBound=!1,this.unbind()}}addBinding(e){null===this.bindings?this.bindings=[e]:this.bindings[this.bindings.length]=e}addChild(e){null===this.children?this.children=[e]:this.children[this.children.length]=e}is(e){switch(this.vmKind){case 1:return jt.getDefinition(this.viewModel.constructor).name===e;case 0:return Ht.getDefinition(this.viewModel.constructor).name===e;case 2:return this.viewFactory.name===e}}lockScope(e){this.scope=e,this.hasLockedScope=!0}setHost(e){return 0===this.vmKind&&(gi(e,Ht.name,this),gi(e,this.definition.key,this)),this.host=e,this.mountTarget=1,this}setShadowRoot(e){return 0===this.vmKind&&(gi(e,Ht.name,this),gi(e,this.definition.key,this)),this.shadowRoot=e,this.mountTarget=2,this}setLocation(e){return 0===this.vmKind&&(gi(e,Ht.name,this),gi(e,this.definition.key,this)),this.location=e,this.mountTarget=3,this}release(){this.state|=16}dispose(){this.debug&&this.logger.trace("dispose()"),32!=(32&this.state)&&(this.state|=32,this.hooks.hasDispose&&this.viewModel.dispose(),null!==this.children&&(this.children.forEach(ai),this.children=null),this.hostController=null,this.scope=null,this.nodes=null,this.context=null,this.location=null,this.viewFactory=null,null!==this.viewModel&&(Ks.delete(this.viewModel),this.viewModel=null),this.viewModel=null,this.host=null,this.shadowRoot=null,this.root=null)}accept(e){if(!0===e(this))return!0;if(this.hooks.hasAccept&&!0===this.viewModel.accept(e))return!0;if(null!==this.children){const{children:t}=this;for(let s=0,i=t.length;s<i;++s)if(!0===t[s].accept(e))return!0}}}function Hs(e){let t=e.$observers;return void 0===t&&Reflect.defineProperty(e,"$observers",{enumerable:!1,value:t={}}),t}function Gs(e,t,s,i){const n=t.bindables,r=Object.getOwnPropertyNames(n),o=r.length;if(o>0){let t,s,a=0;const l=Hs(i);for(;a<o;++a)t=r[a],void 0===l[t]&&(s=n[t],l[t]=new de(i,t,s.callback,s.set,e))}}const _s=new Map,Qs=e=>{let t=_s.get(e);return null==t&&(t=new F(e,0),_s.set(e,t)),t};function Xs(e,t,s,i){const n=t.get(q),r=t.get(D),o=s.watches,a=0===e.vmKind?e.scope:V.create(i,null,!0),l=o.length;let c,h,u,d=0;for(;l>d;++d){if(({expression:c,callback:h}=o[d]),h="function"==typeof h?h:Reflect.get(i,h),"function"!=typeof h)throw new Error(`Invalid callback for @watch decorator: ${String(h)}`);"function"==typeof c?e.addBinding(new Bs(i,n,c,h,!0)):(u="string"==typeof c?r.parse(c,53):Qs(c),e.addBinding(new Ls(a,t,n,u,h)))}}function Ys(e){return e instanceof Ws&&0===e.vmKind}function Zs(e){return k(e)&&Ht.isType(e.constructor)}class Js{constructor(e){this.hasDefine="define"in e,this.hasHydrating="hydrating"in e,this.hasHydrated="hydrated"in e,this.hasCreated="created"in e,this.hasBinding="binding"in e,this.hasBound="bound"in e,this.hasAttaching="attaching"in e,this.hasAttached="attached"in e,this.hasDetaching="detaching"in e,this.hasUnbinding="unbinding"in e,this.hasDispose="dispose"in e,this.hasAccept="accept"in e}}Js.none=new Js({});const ei={mode:"open"};var ti,si;function ii(e){const t=[];return 1==(1&e)&&t.push("activating"),2==(2&e)&&t.push("activated"),4==(4&e)&&t.push("deactivating"),8==(8&e)&&t.push("deactivated"),16==(16&e)&&t.push("released"),32==(32&e)&&t.push("disposed"),0===t.length?"none":t.join("|")}!function(e){e[e.customElement=0]="customElement",e[e.customAttribute=1]="customAttribute",e[e.synthetic=2]="synthetic"}(ti||(ti={})),function(e){e[e.none=0]="none",e[e.activating=1]="activating",e[e.activated=2]="activated",e[e.deactivating=4]="deactivating",e[e.deactivated=8]="deactivated",e[e.released=16]="released",e[e.disposed=32]="disposed"}(si||(si={}));const ni=l.createInterface("IController"),ri=l.createInterface("IHydrationContext");class oi{constructor(e,t,s){this.instruction=t,this.parent=s,this.controller=e}}function ai(e){e.dispose()}const li=l.createInterface("IAppRoot"),ci=l.createInterface("IWorkTracker",(e=>e.singleton(hi)));let hi=class{constructor(e){this.logger=e,this.stack=0,this.promise=null,this.resolve=null,this.logger=e.scopeTo("WorkTracker")}start(){this.logger.trace(`start(stack:${this.stack})`),++this.stack}finish(){if(this.logger.trace(`finish(stack:${this.stack})`),0==--this.stack){const e=this.resolve;null!==e&&(this.resolve=this.promise=null,e())}}wait(){if(this.logger.trace(`wait(stack:${this.stack})`),null===this.promise){if(0===this.stack)return Promise.resolve();this.promise=new Promise((e=>{this.resolve=e}))}return this.promise}};hi=oe([ae(0,x)],hi);class ui{constructor(e,t,s,i,n=!1){if(this.config=e,this.platform=t,this.container=s,this.controller=void 0,this.hydratePromise=void 0,this.host=e.host,this.work=s.get(ci),i.prepare(this),this.container.register(h.instance(fi,e.host)),n){const t=e.component;this.enhanceDefinition=Ht.getDefinition(Ht.isType(t)?Ht.define({...Ht.getDefinition(t),template:this.host,enhance:!0},t):Ht.define({name:void 0,template:this.host,enhance:!0}))}this.hydratePromise=C(this.runAppTasks("beforeCreate"),(()=>{const t=e.component,i=s.createChild();let n;n=Ht.isType(t)?this.container.get(t):e.component;const r=this.controller=Ws.forCustomElement(this,s,i,n,this.host,null,0,!1,this.enhanceDefinition);return r.hydrateCustomElement(null),C(this.runAppTasks("hydrating"),(()=>(r.hydrate(null),C(this.runAppTasks("hydrated"),(()=>{r.hydrateChildren(),this.hydratePromise=void 0})))))}))}activate(){return C(this.hydratePromise,(()=>C(this.runAppTasks("beforeActivate"),(()=>C(this.controller.activate(this.controller,null,2,void 0),(()=>this.runAppTasks("afterActivate")))))))}deactivate(){return C(this.runAppTasks("beforeDeactivate"),(()=>C(this.controller.deactivate(this.controller,null,0),(()=>this.runAppTasks("afterDeactivate")))))}runAppTasks(e){return T(...this.container.getAll(bt).reduce(((t,s)=>(s.slot===e&&t.push(s.run()),t)),[]))}dispose(){var e;null===(e=this.controller)||void 0===e||e.dispose()}}class di{}function pi(e,t){var s,i;return null!==(i=null===(s=e.$au)||void 0===s?void 0:s[t])&&void 0!==i?i:null}function gi(e,t,s){var i,n;(null!==(i=(n=e).$au)&&void 0!==i?i:n.$au=new di)[t]=s}const fi=l.createInterface("INode"),vi=l.createInterface("IEventTarget",(e=>e.cachedCallback((e=>e.has(li,!0)?e.get(li).host:e.get(Ie).document)))),mi=l.createInterface("IRenderLocation");var bi;!function(e){e[e.Element=1]="Element",e[e.Attr=2]="Attr",e[e.Text=3]="Text",e[e.CDATASection=4]="CDATASection",e[e.EntityReference=5]="EntityReference",e[e.Entity=6]="Entity",e[e.ProcessingInstruction=7]="ProcessingInstruction",e[e.Comment=8]="Comment",e[e.Document=9]="Document",e[e.DocumentType=10]="DocumentType",e[e.DocumentFragment=11]="DocumentFragment",e[e.Notation=12]="Notation"}(bi||(bi={}));const yi=new WeakMap;function wi(e){if(yi.has(e))return yi.get(e);let t=0,s=e.nextSibling;for(;null!==s;){if(8===s.nodeType)switch(s.textContent){case"au-start":++t;break;case"au-end":if(0==t--)return s}s=s.nextSibling}if(null===e.parentNode&&11===e.nodeType){const t=Ht.for(e);if(void 0===t)return null;if(2===t.mountTarget)return wi(t.host)}return e.parentNode}function xi(e,t){if(void 0===e.platform||e instanceof e.platform.Node)yi.set(e,t);else{const s=e.childNodes;for(let e=0,i=s.length;e<i;++e)yi.set(s[e],t)}}function ki(e){if(Ci(e))return e;const t=e.ownerDocument.createComment("au-end"),s=e.ownerDocument.createComment("au-start");return null!==e.parentNode&&(e.parentNode.replaceChild(t,e),t.parentNode.insertBefore(s,t)),t.$start=s,t}function Ci(e){return"au-end"===e.textContent}class Ti{constructor(e,t){this.platform=e,this.fragment=t,this.isMounted=!1,this.isLinked=!1,this.next=void 0,this.refNode=void 0;const s=t.querySelectorAll(".au");let i=0,n=s.length;const r=this.targets=Array(n);for(;i<n;){const e=s[i];r[i]="AU-M"===e.nodeName?ki(e):e,++i}const o=t.childNodes;i=0,n=o.length;const a=this.childNodes=Array(n);for(;i<n;)a[i]=o[i],++i;this.firstChild=t.firstChild,this.lastChild=t.lastChild}findTargets(){return this.targets}insertBefore(e){if(this.isLinked&&this.refNode)this.addToLinked();else{const t=e.parentNode;if(this.isMounted){let s=this.firstChild;const i=this.lastChild;let n;for(;null!=s&&(n=s.nextSibling,t.insertBefore(s,e),s!==i);)s=n}else this.isMounted=!0,e.parentNode.insertBefore(this.fragment,e)}}appendTo(e,t=!1){if(this.isMounted){let t=this.firstChild;const s=this.lastChild;let i;for(;null!=t&&(i=t.nextSibling,e.appendChild(t),t!==s);)t=i}else this.isMounted=!0,t||e.appendChild(this.fragment)}remove(){if(this.isMounted){this.isMounted=!1;const e=this.fragment,t=this.lastChild;let s,i=this.firstChild;for(;null!==i&&(s=i.nextSibling,e.appendChild(i),i!==t);)i=s}}addToLinked(){const e=this.refNode,t=e.parentNode;if(this.isMounted){let s=this.firstChild;const i=this.lastChild;let n;for(;null!=s&&(n=s.nextSibling,t.insertBefore(s,e),s!==i);)s=n}else this.isMounted=!0,t.insertBefore(this.fragment,e)}unlink(){this.isLinked=!1,this.next=void 0,this.refNode=void 0}link(e){this.isLinked=!0,Ci(e)?this.refNode=e:(this.next=e,this.obtainRefNode())}obtainRefNode(){this.refNode=void 0!==this.next?this.next.firstChild:void 0}}const Ai=l.createInterface("IWindow",(e=>e.callback((e=>e.get(Ie).window)))),$i=l.createInterface("ILocation",(e=>e.callback((e=>e.get(Ai).location)))),Ei=l.createInterface("IHistory",(e=>e.callback((e=>e.get(Ai).history)))),Si={[z.capturing]:{capture:!0},[z.bubbling]:{capture:!1}};class Oi{constructor(e,t,s,i,n,r,o,a){this.platform=e,this.targetEvent=t,this.delegationStrategy=s,this.sourceExpression=i,this.target=n,this.preventDefault=r,this.eventDelegator=o,this.locator=a,this.interceptor=this,this.isBound=!1,this.handler=null}callSource(e){const t=this.$scope.overrideContext;t.$event=e;const s=this.sourceExpression.evaluate(8,this.$scope,this.locator,null);return Reflect.deleteProperty(t,"$event"),!0!==s&&this.preventDefault&&e.preventDefault(),s}handleEvent(e){this.interceptor.callSource(e)}$bind(e,t){if(this.isBound){if(this.$scope===t)return;this.interceptor.$unbind(2|e)}this.$scope=t;const s=this.sourceExpression;if(s.hasBind&&s.bind(e,t,this.interceptor),this.delegationStrategy===z.none)this.target.addEventListener(this.targetEvent,this);else{const e=this.locator.get(vi);this.handler=this.eventDelegator.addEventListener(e,this.target,this.targetEvent,this,Si[this.delegationStrategy])}this.isBound=!0}$unbind(e){if(!this.isBound)return;const t=this.sourceExpression;t.hasUnbind&&t.unbind(e,this.$scope,this.interceptor),this.$scope=null,this.delegationStrategy===z.none?this.target.removeEventListener(this.targetEvent,this):(this.handler.dispose(),this.handler=null),this.isBound=!1}observeProperty(e,t){}handleChange(e,t,s){}}const Pi={capture:!1};class Ri{constructor(e,t,s=Pi){this.publisher=e,this.eventName=t,this.options=s,this.count=0,this.captureLookups=new Map,this.bubbleLookups=new Map}increment(){1==++this.count&&this.publisher.addEventListener(this.eventName,this,this.options)}decrement(){0==--this.count&&this.publisher.removeEventListener(this.eventName,this,this.options)}dispose(){this.count>0&&(this.count=0,this.publisher.removeEventListener(this.eventName,this,this.options)),this.captureLookups.clear(),this.bubbleLookups.clear()}getLookup(e){const t=!0===this.options.capture?this.captureLookups:this.bubbleLookups;let s=t.get(e);return void 0===s&&t.set(e,s=Object.create(null)),s}handleEvent(e){const t=!0===this.options.capture?this.captureLookups:this.bubbleLookups,s=e.composedPath();!0===this.options.capture&&s.reverse();for(const i of s){const s=t.get(i);if(void 0===s)continue;const n=s[this.eventName];if(void 0!==n&&("function"==typeof n?n(e):n.handleEvent(e),!0===e.cancelBubble))return}}}class Mi{constructor(e,t,s,i){this.tracker=e,this.lookup=t,this.eventName=s,e.increment(),t[s]=i}dispose(){this.tracker.decrement(),this.lookup[this.eventName]=void 0}}class Bi{constructor(e){this.config=e,this.target=null,this.handler=null}subscribe(e,t){this.target=e,this.handler=t;for(const s of this.config.events)e.addEventListener(s,t)}dispose(){const{target:e,handler:t}=this;if(null!==e&&null!==t)for(const s of this.config.events)e.removeEventListener(s,t);this.target=this.handler=null}}const Li=l.createInterface("IEventDelegator",(e=>e.singleton(ji)));class ji{constructor(){this.trackerMaps=Object.create(null)}addEventListener(e,t,s,i,n){var r,o;const a=null!==(r=(o=this.trackerMaps)[s])&&void 0!==r?r:o[s]=new Map;let l=a.get(e);return void 0===l&&a.set(e,l=new Ri(e,s,n)),new Mi(l,l.getLookup(t),s,i)}dispose(){for(const e in this.trackerMaps){const t=this.trackerMaps[e];for(const e of t.values())e.dispose();t.clear()}}}const Vi=l.createInterface("IProjections"),Ii=l.createInterface("IAuSlotsInfo");class Ni{constructor(e){this.projectedSlots=e}}var qi;!function(e){e.hydrateElement="ra",e.hydrateAttribute="rb",e.hydrateTemplateController="rc",e.hydrateLetElement="rd",e.setProperty="re",e.interpolation="rf",e.propertyBinding="rg",e.callBinding="rh",e.letBinding="ri",e.refBinding="rj",e.iteratorBinding="rk",e.textBinding="ha",e.listenerBinding="hb",e.attributeBinding="hc",e.stylePropertyBinding="hd",e.setAttribute="he",e.setClassAttribute="hf",e.setStyleAttribute="hg"}(qi||(qi={}));const Di=l.createInterface("Instruction");function Fi(e){const t=e.type;return"string"==typeof t&&2===t.length}class zi{constructor(e,t){this.from=e,this.to=t}get type(){return"rf"}}class Ui{constructor(e,t,s){this.from=e,this.to=t,this.mode=s}get type(){return"rg"}}class Ki{constructor(e,t){this.from=e,this.to=t}get type(){return"rk"}}class Wi{constructor(e,t){this.from=e,this.to=t}get type(){return"rh"}}class Hi{constructor(e,t){this.from=e,this.to=t}get type(){return"rj"}}class Gi{constructor(e,t){this.value=e,this.to=t}get type(){return"re"}}class _i{constructor(e,t,s,i,n){this.res=e,this.alias=t,this.instructions=s,this.projections=i,this.containerless=n,this.auSlot=null}get type(){return"ra"}}class Qi{constructor(e,t,s){this.res=e,this.alias=t,this.instructions=s}get type(){return"rb"}}class Xi{constructor(e,t,s,i){this.def=e,this.res=t,this.alias=s,this.instructions=i}get type(){return"rc"}}class Yi{constructor(e,t){this.instructions=e,this.toBindingContext=t}get type(){return"rd"}}class Zi{constructor(e,t){this.from=e,this.to=t}get type(){return"ri"}}class Ji{constructor(e,t){this.from=e,this.strict=t}get type(){return"ha"}}class en{constructor(e,t,s,i){this.from=e,this.to=t,this.preventDefault=s,this.strategy=i}get type(){return"hb"}}class tn{constructor(e,t){this.from=e,this.to=t}get type(){return"hd"}}class sn{constructor(e,t){this.value=e,this.to=t}get type(){return"he"}}class nn{constructor(e){this.value=e,this.type="hf"}}class rn{constructor(e){this.value=e,this.type="hg"}}class on{constructor(e,t,s){this.attr=e,this.from=t,this.to=s}get type(){return"hc"}}const an=l.createInterface("ITemplateCompiler"),ln=l.createInterface("IRenderer");function cn(e){return function(t){const s=function(...s){const i=new t(...s);return i.instructionType=e,i};s.register=function(e){h.singleton(ln,s).register(e)};const n=i.getOwnKeys(t);for(const e of n)i.define(e,i.getOwn(e,t),s);const r=Object.getOwnPropertyDescriptors(t);return Object.keys(r).filter((e=>"prototype"!==e)).forEach((e=>{Reflect.defineProperty(s,e,r[e])})),s}}function hn(e,t,s){return"string"==typeof t?e.parse(t,s):t}function un(e){return null!=e.viewModel?e.viewModel:e}let dn=class{render(e,t,s,i,n){const r=un(i);void 0!==r.$observers&&void 0!==r.$observers[n.to]?r.$observers[n.to].setValue(n.value,2):r[n.to]=n.value}};dn=oe([cn("re")],dn);let pn=class{render(e,t,s,i,n){let r,o,a,l;const c=n.res,h=n.projections,u=s.container,d=function(e,t,s,i,n){const r=e.platform,o=e.container.createChild();return o.registerResolver(r.HTMLElement,o.registerResolver(r.Element,o.registerResolver(r.Node,o.registerResolver(fi,new y("ElementProvider",t))))),o.registerResolver(ni,new y("IController",e)),o.registerResolver(Di,new y("IInstruction",s)),o.registerResolver(mi,null==i?Ln:new y("IRenderLocation",i)),o.registerResolver(Xt,jn),o.registerResolver(Ii,null==n?Vn:new y("IAuSlotsInfo",n)),o}(s,i,n,i,null==h?void 0:new Ni(Object.keys(h)));switch(typeof c){case"string":if(r=u.find(Ht,c),null==r)throw new Error(`Element ${c} is not registered in ${s.name}.`);break;default:r=c}o=r.Type,a=d.invoke(o),d.registerResolver(o,new y(r.key,a)),l=Ws.forCustomElement(s.root,s.container,d,a,i,n,e,!0,r),e=l.flags,gi(i,r.key,l),t.renderChildren(e,n.instructions,s,l),s.addChild(l)}};pn=oe([cn("ra")],pn);let gn=class{render(e,t,s,i,n){let r,o=s.container;switch(typeof n.res){case"string":if(r=o.find(jt,n.res),null==r)throw new Error(`Attribute ${n.res} is not registered in ${s.name}.`);break;default:r=n.res}const a=Bn(r,s,i,n,void 0,void 0),l=Ws.forCustomAttribute(s.root,s.container,a,i,e,r);gi(i,r.key,l),t.renderChildren(e,n.instructions,s,l),s.addChild(l)}};gn=oe([cn("rb")],gn);let fn=class{render(e,t,s,i,n){var r;let o,a=s.container;switch(typeof n.res){case"string":if(o=a.find(jt,n.res),null==o)throw new Error(`Attribute ${n.res} is not registered in ${s.name}.`);break;default:o=n.res}const l=cs(n.def,a).getViewFactory(),c=ki(i),h=Bn(o,s,i,n,l,c),u=Ws.forCustomAttribute(s.root,s.container,h,i,e,o);gi(c,o.key,u),null===(r=h.link)||void 0===r||r.call(h,e,t,s,u,i,n),t.renderChildren(e,n.instructions,s,u),s.addChild(u)}};fn=oe([cn("rc")],fn);let vn=class{constructor(e,t){this.parser=e,this.oL=t}render(e,t,s,i,n){i.remove();const r=n.instructions,o=n.toBindingContext,a=s.container;let l,c,h;for(let e=0,t=r.length;e<t;++e)l=r[e],c=hn(this.parser,l.from,48),h=new ht(c,l.to,this.oL,a,o),s.addBinding(38962===c.$kind?Tn(h,c,a):h)}};vn=oe([cn("rd"),ae(0,D),ae(1,q)],vn);let mn=class{constructor(e,t){this.parser=e,this.observerLocator=t}render(e,t,s,i,n){const r=hn(this.parser,n.from,153),o=new We(r,un(i),n.to,this.observerLocator,s.container);s.addBinding(38962===r.$kind?Tn(o,r,s.container):o)}};mn=oe([cn("rh"),ae(0,D),ae(1,q)],mn);let bn=class{constructor(e){this.parser=e}render(e,t,s,i,n){const r=hn(this.parser,n.from,5376),o=new mt(r,function(e,t){if("element"===t)return e;switch(t){case"controller":return Ht.for(e);case"view":throw new Error("Not supported API");case"view-model":return Ht.for(e).viewModel;default:{const s=jt.for(e,t);if(void 0!==s)return s.viewModel;const i=Ht.for(e,{name:t});if(void 0===i)throw new Error(`Attempted to reference "${t}", but it was not found amongst the target's API.`);return i.viewModel}}}(i,n.to),s.container);s.addBinding(38962===r.$kind?Tn(o,r,s.container):o)}};bn=oe([cn("rj"),ae(0,D)],bn);let yn=class{constructor(e,t,s){this.parser=e,this.oL=t,this.platform=s}render(e,t,s,i,n){const r=s.container,o=hn(this.parser,n.from,2048),a=new at(this.oL,o,un(i),n.to,R.toView,r,this.platform.domWriteQueue),l=a.partBindings,c=l.length;let h,u=0;for(;c>u;++u)h=l[u],38962===h.sourceExpression.$kind&&(l[u]=Tn(h,h.sourceExpression,r));s.addBinding(a)}};yn=oe([cn("rf"),ae(0,D),ae(1,q),ae(2,Ie)],yn);let wn=class{constructor(e,t,s){this.parser=e,this.oL=t,this.platform=s}render(e,t,s,i,n){const r=hn(this.parser,n.from,48|n.mode),o=new vt(r,un(i),n.to,n.mode,this.oL,s.container,this.platform.domWriteQueue);s.addBinding(38962===r.$kind?Tn(o,r,s.container):o)}};wn=oe([cn("rg"),ae(0,D),ae(1,q),ae(2,Ie)],wn);let xn=class{constructor(e,t,s){this.parser=e,this.oL=t,this.p=s}render(e,t,s,i,n){const r=hn(this.parser,n.from,539),o=new vt(r,un(i),n.to,R.toView,this.oL,s.container,this.p.domWriteQueue);s.addBinding(o)}};xn=oe([cn("rk"),ae(0,D),ae(1,q),ae(2,Ie)],xn);let kn=0;const Cn=[];function Tn(e,t,s){for(;t instanceof U;)Cn[kn++]=t,t=t.expression;for(;kn>0;){const t=Cn[--kn],i=s.get(t.behaviorKey);i instanceof K&&(e=i.construct(e,t))}return Cn.length=0,e}let An=class{constructor(e,t,s){this.parser=e,this.oL=t,this.p=s}render(e,t,s,i,n){const r=s.container,o=i.nextSibling,a=i.parentNode,l=this.p.document,c=hn(this.parser,n.from,2048),h=c.parts,u=c.expressions,d=u.length;let p,g,f=0,v=h[0];for(""!==v&&a.insertBefore(l.createTextNode(v),o);d>f;++f)g=u[f],p=new ct(g,a.insertBefore(l.createTextNode(""),o),r,this.oL,this.p,n.strict),s.addBinding(38962===g.$kind?Tn(p,g,r):p),v=h[f+1],""!==v&&a.insertBefore(l.createTextNode(v),o);"AU-M"===i.nodeName&&i.remove()}};An=oe([cn("ha"),ae(0,D),ae(1,q),ae(2,Ie)],An);let $n=class{constructor(e,t){this.parser=e,this.eventDelegator=t}render(e,t,s,i,n){const r=hn(this.parser,n.from,80|n.strategy+6),o=new Oi(s.platform,n.to,n.strategy,r,i,n.preventDefault,this.eventDelegator,s.container);s.addBinding(38962===r.$kind?Tn(o,r,s.container):o)}};$n=oe([cn("hb"),ae(0,D),ae(1,Li)],$n);let En=class{render(e,t,s,i,n){i.setAttribute(n.to,n.value)}};En=oe([cn("he")],En);let Sn=class{render(e,t,s,i,n){!function(e,t){const s=t.length;let i=0;for(let n=0;n<s;++n)32===t.charCodeAt(n)?(n!==i&&e.add(t.slice(i,n)),i=n+1):n+1===s&&e.add(t.slice(i))}(i.classList,n.value)}};Sn=oe([cn("hf")],Sn);let On=class{render(e,t,s,i,n){i.style.cssText+=n.value}};On=oe([cn("hg")],On);let Pn=class{constructor(e,t,s){this.parser=e,this.oL=t,this.p=s}render(e,t,s,i,n){const r=hn(this.parser,n.from,48|R.toView),o=new vt(r,i.style,n.to,R.toView,this.oL,s.container,this.p.domWriteQueue);s.addBinding(38962===r.$kind?Tn(o,r,s.container):o)}};Pn=oe([cn("hd"),ae(0,D),ae(1,q),ae(2,Ie)],Pn);let Rn=class{constructor(e,t){this.parser=e,this.oL=t}render(e,t,s,i,n){const r=hn(this.parser,n.from,48|R.toView),o=new nt(r,i,n.attr,n.to,R.toView,this.oL,s.container);s.addBinding(38962===r.$kind?Tn(o,r,s.container):o)}};Rn=oe([cn("hc"),ae(0,D),ae(1,q)],Rn);class Mn{constructor(e){this.f=e}get $isResolver(){return!0}resolve(){const e=this.f;if(null===e)throw new Error("Cannot resolve ViewFactory before the provider was prepared.");if("string"!=typeof e.name||0===e.name.length)throw new Error("Cannot resolve ViewFactory without a (valid) name.");return e}}function Bn(e,t,s,i,n,r,o){const a=t.platform,l=t.container.createChild();return l.registerResolver(a.HTMLElement,l.registerResolver(a.Element,l.registerResolver(a.Node,l.registerResolver(fi,new y("ElementProvider",s))))),l.registerResolver(ni,new y("IController",t)),l.registerResolver(Di,new y("IInstruction",i)),l.registerResolver(mi,null==r?Ln:new y("IRenderLocation",r)),l.registerResolver(Xt,null==n?jn:new Mn(n)),l.registerResolver(Ii,null==o?Vn:new y("IAuSlotsInfo",o)),l.invoke(e.Type)}const Ln=new y("IRenderLocation"),jn=new Mn(null),Vn=new y("IAuSlotsInfo",new Ni(a));function In(e){return function(t){return qn.define(e,t)}}class Nn{constructor(e,t,s,i,n){this.Type=e,this.name=t,this.aliases=s,this.key=i,this.type=n}static create(e,t){let s,i;return"string"==typeof e?(s=e,i={name:s}):(s=e.name,i=e),new Nn(t,n(qn.getAnnotation(t,"name"),s),d(qn.getAnnotation(t,"aliases"),i.aliases,t.aliases),qn.keyFrom(s),n(qn.getAnnotation(t,"type"),i.type,t.type,null))}register(e){const{Type:t,key:s,aliases:i}=this;h.singleton(s,t).register(e),h.aliasTo(s,t).register(e),j(i,qn,s,e)}}const qn={name:t.resource.keyFor("binding-command"),keyFrom:e=>`${qn.name}:${e}`,isType:e=>"function"==typeof e&&i.hasOwn(qn.name,e),define(e,s){const n=Nn.create(e,s);return i.define(qn.name,n,n.Type),i.define(qn.name,n,n),t.resource.appendTo(s,qn.name),n.Type},getDefinition(e){const t=i.getOwn(qn.name,e);if(void 0===t)throw new Error(`No definition found for type ${e.name}`);return t},annotate(e,s,n){i.define(t.annotation.keyFor(s),n,e)},getAnnotation:(e,s)=>i.getOwn(t.annotation.keyFor(s),e)};let Dn=class{constructor(e){this.m=e,this.bindingType=49}static get inject(){return[ze]}build(e){var t;let s;return s=null==e.bindable?null!==(t=this.m.map(e.node,e.attr.target))&&void 0!==t?t:A(e.attr.target):e.bindable.property,new Ui(e.expr,s,R.oneTime)}};Dn=oe([In("one-time")],Dn);let Fn=class{constructor(e){this.m=e,this.bindingType=50}static get inject(){return[ze]}build(e){var t;let s;return s=null==e.bindable?null!==(t=this.m.map(e.node,e.attr.target))&&void 0!==t?t:A(e.attr.target):e.bindable.property,new Ui(e.expr,s,R.toView)}};Fn=oe([In("to-view")],Fn);let zn=class{constructor(e){this.m=e,this.bindingType=51}static get inject(){return[ze]}build(e){var t;let s;return s=null==e.bindable?null!==(t=this.m.map(e.node,e.attr.target))&&void 0!==t?t:A(e.attr.target):e.bindable.property,new Ui(e.expr,s,R.fromView)}};zn=oe([In("from-view")],zn);let Un=class{constructor(e){this.m=e,this.bindingType=52}static get inject(){return[ze]}build(e){var t;let s;return s=null==e.bindable?null!==(t=this.m.map(e.node,e.attr.target))&&void 0!==t?t:A(e.attr.target):e.bindable.property,new Ui(e.expr,s,R.twoWay)}};Un=oe([In("two-way")],Un);let Kn=class{constructor(e){this.m=e,this.bindingType=53}static get inject(){return[ze]}build(e){var t;const s=e.attr.target,i=e.bindable;let n,r,o;return null==i?(r=this.m.isTwoWay(e.node,s)?R.twoWay:R.toView,o=null!==(t=this.m.map(e.node,s))&&void 0!==t?t:A(s)):(n=e.def.defaultBindingMode,r=i.mode===R.default||null==i.mode?null==n||n===R.default?R.toView:n:i.mode,o=i.property),new Ui(e.expr,o,r)}};Kn=oe([In("bind")],Kn);let Wn=class{constructor(){this.bindingType=153}build(e){const t=null===e.bindable?A(e.attr.target):e.bindable.property;return new Wi(e.expr,t)}};Wn=oe([In("call")],Wn);let Hn=class{constructor(){this.bindingType=539}build(e){const t=null===e.bindable?A(e.attr.target):e.bindable.property;return new Ki(e.expr,t)}};Hn=oe([In("for")],Hn);let Gn=class{constructor(){this.bindingType=4182}build(e){return new en(e.expr,e.attr.target,!0,z.none)}};Gn=oe([In("trigger")],Gn);let _n=class{constructor(){this.bindingType=4184}build(e){return new en(e.expr,e.attr.target,!1,z.bubbling)}};_n=oe([In("delegate")],_n);let Qn=class{constructor(){this.bindingType=4183}build(e){return new en(e.expr,e.attr.target,!1,z.capturing)}};Qn=oe([In("capture")],Qn);let Xn=class{constructor(){this.bindingType=4128}build(e){return new on(e.attr.target,e.expr,e.attr.target)}};Xn=oe([In("attr")],Xn);let Yn=class{constructor(){this.bindingType=4128}build(e){return new on("style",e.expr,e.attr.target)}};Yn=oe([In("style")],Yn);let Zn=class{constructor(){this.bindingType=4128}build(e){return new on("class",e.expr,e.attr.target)}};Zn=oe([In("class")],Zn);let Jn=class{constructor(){this.bindingType=4128}build(e){return new Hi(e.expr,e.attr.target)}};Jn=oe([In("ref")],Jn);const er=l.createInterface("ITemplateElementFactory",(e=>e.singleton(sr))),tr={};let sr=class{constructor(e){this.p=e,this.template=e.document.createElement("template")}createTemplate(e){var t;if("string"==typeof e){let t=tr[e];if(void 0===t){const s=this.template;s.innerHTML=e;const i=s.content.firstElementChild;null==i||"TEMPLATE"!==i.nodeName||null!=i.nextElementSibling?(this.template=this.p.document.createElement("template"),t=s):(s.content.removeChild(i),t=i),tr[e]=t}return t.cloneNode(!0)}if("TEMPLATE"!==e.nodeName){const t=this.p.document.createElement("template");return t.content.appendChild(e),t}return null===(t=e.parentNode)||void 0===t||t.removeChild(e),e.cloneNode(!0)}};sr=oe([ae(0,Ie)],sr);const ir=function(e){function t(e,s,i){l.inject(t)(e,s,i)}return t.$isResolver=!0,t.resolve=function(t,s){return s.root===s?s.getAll(e,!1):s.has(e,!1)?s.getAll(e,!1).concat(s.root.getAll(e,!1)):s.root.getAll(e,!1)},t};class nr{constructor(){this.debug=!1,this.resolveResources=!0}static register(e){return h.singleton(an,this).register(e)}compile(e,t,s){var i,n,r,o;const l=Kt.getOrCreate(e);if(null==l.template)return l;if(!1===l.needsCompile)return l;null!=s||(s=lr);const c=new rr(e,t,s,null,null,void 0),h="string"!=typeof l.template&&e.enhance?l.template:c.templateFactory.createTemplate(l.template),u="TEMPLATE"===h.nodeName&&null!=h.content,d=u?h.content:h,p=t.get(ir(wr)),g=p.length;let f=0;if(g>0)for(;g>f;)null===(n=(i=p[f]).compiling)||void 0===n||n.call(i,h),++f;if(h.hasAttribute(mr))throw new Error("The root cannot be a local template itself.");return this.local(d,c),this.node(d,c),Kt.create({...e,name:e.name||Ht.generateName(),dependencies:(null!==(r=e.dependencies)&&void 0!==r?r:a).concat(null!==(o=c.deps)&&void 0!==o?o:a),instructions:c.rows,surrogates:u?this.surrogate(h,c):a,template:h,hasSlots:c.hasSlot,needsCompile:!1})}surrogate(e,t){var s;const i=[],n=e.attributes,r=t.exprParser;let o,a,l,c,h,u,d,p,g,f,v,m,b=n.length,y=0,w=null,x=null;for(;b>y;++y){if(o=n[y],a=o.name,l=o.value,c=t.attrParser.parse(a,l),v=c.target,m=c.rawValue,ur[v])throw new Error(`Attribute ${a} is invalid on surrogate.`);if(x=t.command(c),null!==x&&4096&x.bindingType)g=r.parse(m,x.bindingType),hr.node=e,hr.attr=c,hr.expr=g,hr.bindable=null,hr.def=null,i.push(x.build(hr));else if(w=t.attr(v),null===w)if(null===x)if(g=r.parse(m,2048),null!=g)e.removeAttribute(a),--y,--b,i.push(new zi(g,null!==(s=t.attrMapper.map(e,v))&&void 0!==s?s:A(v)));else switch(a){case"class":i.push(new nn(m));break;case"style":i.push(new rn(m));break;default:i.push(new sn(m,a))}else g=r.parse(m,x.bindingType),hr.node=e,hr.attr=c,hr.expr=g,hr.bindable=null,hr.def=null,i.push(x.build(hr));else{if(w.isTemplateController)throw new Error(`Template controller ${v} is invalid on surrogate.`);d=gr.from(w,!0),f=!1===w.noMultiBindings&&null===x&&or(m),f?u=this.multiBindings(e,m,w,t):(p=d.primary,null===x?(g=r.parse(m,2048),u=[null===g?new Gi(m,p.property):new zi(g,p.property)]):(g=r.parse(m,x.bindingType),hr.node=e,hr.attr=c,hr.expr=g,hr.bindable=p,hr.def=w,u=[x.build(hr)])),e.removeAttribute(a),--y,--b,(null!=h?h:h=[]).push(new Qi(this.resolveResources?w:w.name,null!=w.aliases&&w.aliases.includes(v)?v:void 0,u))}}return ar(),null!=h?h.concat(i):i}node(e,t){switch(e.nodeType){case 1:switch(e.nodeName){case"LET":return this.declare(e,t);default:return this.element(e,t)}case 3:return this.text(e,t);case 11:{let s=e.firstChild;for(;null!==s;)s=this.node(s,t);break}}return e.nextSibling}declare(e,t){const s=e.attributes,i=s.length,n=[],r=t.exprParser;let o,a,l,c,h,u,d,p,g=!1,f=0;for(;i>f;++f)if(o=s[f],l=o.name,c=o.value,"to-binding-context"!==l){if(a=t.attrParser.parse(l,c),u=a.target,d=a.rawValue,h=t.command(a),null!==h){if(50===h.bindingType||53===h.bindingType){n.push(new Zi(r.parse(d,h.bindingType),A(u)));continue}throw new Error(`Invalid command ${a.command} for <let>. Only to-view/bind supported.`)}p=r.parse(d,2048),null===p&&t.logger.warn(`Property ${u} is declared with literal string ${d}. Did you mean ${u}.bind="${d}"?`),n.push(new Zi(null===p?new W(d):p,A(u)))}else g=!0;return t.rows.push([new Yi(n,g)]),this.mark(e).nextSibling}element(e,t){var s,i,n,r,l,c,h;const u=e.nextSibling,d=(null!==(s=e.getAttribute("as-element"))&&void 0!==s?s:e.nodeName).toLowerCase(),p=t.el(d),g=t.exprParser,f=this.debug?o:()=>{e.removeAttribute(b),--N,--I};let v,m,b,y,w,x,k,C,T,$,E,S,O,P,R,M,B,L,j,V=e.attributes,I=V.length,N=0,q=null,D=!1,F=null,z=!0,U=!1;for("slot"===d&&(t.root.hasSlot=!0),null!==p&&(z=null===(i=p.processContent)||void 0===i?void 0:i.call(p.Type,e,t.p),V=e.attributes,I=V.length);I>N;++N){switch(m=V[N],b=m.name,y=m.value,b){case"as-element":case"containerless":f(),U||(U="containerless"===b);continue}if(w=t.attrParser.parse(b,y),F=t.command(w),null!==F&&4096&F.bindingType)O=g.parse(y,F.bindingType),hr.node=e,hr.attr=w,hr.expr=O,hr.bindable=null,hr.def=null,(null!=x?x:x=[]).push(F.build(hr)),f();else if(B=w.target,L=w.rawValue,q=t.attr(B),null===q)if(null!==F)f(),null===p||(R=gr.from(p,!1),C=R.attrs[B],void 0===C)?(O=g.parse(L,F.bindingType),hr.node=e,hr.attr=w,hr.expr=O,hr.bindable=null,hr.def=null,(null!=x?x:x=[]).push(F.build(hr))):(y=0===y.length&&(55&F.bindingType)>0?A(b):y,O=g.parse(y,F.bindingType),hr.node=e,hr.attr=w,hr.expr=O,hr.bindable=C,hr.def=p,(null!=k?k:k=[]).push(F.build(hr)));else{if(null!==p&&(R=gr.from(p,!1),C=R.attrs[B],void 0!==C)){O=g.parse(L,2048),(null!=k?k:k=[]).push(null==O?new Gi(L,C.property):new zi(O,C.property)),f();continue}O=g.parse(L,2048),null!=O&&(f(),(null!=x?x:x=[]).push(new zi(O,null!==(n=t.attrMapper.map(e,B))&&void 0!==n?n:A(B))))}else R=gr.from(q,!0),D=!1===q.noMultiBindings&&null===F&&or(y),D?$=this.multiBindings(e,y,q,t):(M=R.primary,null===F?(O=g.parse(y,2048),$=[null===O?new Gi(y,M.property):new zi(O,M.property)]):(O=g.parse(y,F.bindingType),hr.node=e,hr.attr=w,hr.expr=O,hr.bindable=M,hr.def=q,$=[F.build(hr)])),f(),q.isTemplateController?(null!=E?E:E=[]).push(new Xi(cr,this.resolveResources?q:q.name,void 0,$)):(null!=T?T:T=[]).push(new Qi(this.resolveResources?q:q.name,null!=q.aliases&&q.aliases.includes(B)?B:void 0,$))}if(ar(),this.shouldReorderAttrs(e)&&null!=x&&x.length>1&&this.reorder(e,x),null!==p&&(P=new _i(this.resolveResources?p:p.name,void 0,null!=k?k:a,null,U),"au-slot"===d)){const s=e.getAttribute("name")||"default",i=t.h("template"),n=t.child();let r=e.firstChild;for(;null!==r;)1===r.nodeType&&r.hasAttribute("au-slot")?e.removeChild(r):i.content.appendChild(r),r=e.firstChild;this.node(i.content,n),P.auSlot={name:s,fallback:Kt.create({name:Ht.generateName(),template:i,instructions:n.rows,needsCompile:!1})},e=this.marker(e,t)}if(null==x&&null==P&&null==T||(v=a.concat(null!=P?P:a,null!=T?T:a,null!=x?x:a),this.mark(e)),null!=E){let s;I=E.length-1,N=I,S=E[N],this.marker(e,t),"TEMPLATE"===e.nodeName?s=e:(s=t.h("template"),s.content.appendChild(e));const i=s,n=t.child(null==v?[]:[v]);let o,a,l,h,u,d,g,f,m;j=null===p||!p.containerless&&!U&&!1!==z,null!==p&&p.containerless&&this.marker(e,t);let b=0,y=0;if(j){if(null!==p){for(o=e.firstChild;null!==o;)1===o.nodeType?(a=o,o=o.nextSibling,l=a.getAttribute("au-slot"),null!==l&&(""===l&&(l="default"),a.removeAttribute("au-slot"),e.removeChild(a),(null!==(r=(c=null!=u?u:u={})[l])&&void 0!==r?r:c[l]=[]).push(a))):o=o.nextSibling;if(null!=u){for(l in h={},u){for(s=t.h("template"),d=u[l],b=0,y=d.length;y>b;++b)g=d[b],s.content.appendChild("TEMPLATE"===g.nodeName?g.attributes.length>0?g:g.content:g);m=t.child(),this.node(s.content,m),h[l]=Kt.create({name:Ht.generateName(),template:s,instructions:m.rows,needsCompile:!1})}P.projections=h}}if("TEMPLATE"===e.nodeName)this.node(e.content,n);else for(o=e.firstChild;null!==o;)o=this.node(o,n)}for(S.def=Kt.create({name:Ht.generateName(),template:i,instructions:n.rows,needsCompile:!1});N-- >0;){if(S=E[N],s=t.h("template"),f=t.h("au-m"),f.classList.add("au"),s.content.appendChild(f),S.def!==cr)throw new Error(`Invalid definition for processing ${S.res}.`);S.def=Kt.create({name:Ht.generateName(),template:s,needsCompile:!1,instructions:[[E[N+1]]]})}t.rows.push([S])}else if(null!=v&&t.rows.push(v),j=null===p||!p.containerless&&!U&&!1!==z,null!==p&&p.containerless&&this.marker(e,t),j&&e.childNodes.length>0){let s,i,n,r,o,a,c,u=e.firstChild,d=null,g=0,f=0;for(;null!==u;)if(1===u.nodeType){if(s=u,u=u.nextSibling,i=s.getAttribute("au-slot"),null!==i){if(null===p)throw new Error(`Projection with [au-slot="${i}"] is attempted on a non custom element ${e.nodeName}.`);""===i&&(i="default"),e.removeChild(s),s.removeAttribute("au-slot"),(null!==(l=(h=null!=n?n:n={})[i])&&void 0!==l?l:h[i]=[]).push(s)}}else u=u.nextSibling;if(null!=n){for(i in d={},n){for(a=t.h("template"),r=n[i],g=0,f=r.length;f>g;++g)o=r[g],a.content.appendChild("TEMPLATE"===o.nodeName?o.attributes.length>0?o:o.content:o);c=t.child(),this.node(a.content,c),d[i]=Kt.create({name:Ht.generateName(),template:a,instructions:c.rows,needsCompile:!1})}P.projections=d}for(u=e.firstChild;null!==u;)u=this.node(u,t)}return u}text(e,t){let s="",i=e;for(;null!==i&&3===i.nodeType;)s+=i.textContent,i=i.nextSibling;const n=t.exprParser.parse(s,2048);if(null===n)return i;const r=e.parentNode;for(r.insertBefore(this.mark(t.h("au-m")),e),t.rows.push([new Ji(n,!!t.def.isStrictBinding)]),e.textContent="",i=e.nextSibling;null!==i&&3===i.nodeType;)r.removeChild(i),i=e.nextSibling;return e.nextSibling}multiBindings(e,t,s,i){const n=gr.from(s,!0),r=t.length,o=[];let a,l,c,h,u,d,p=0,g=0;for(let f=0;f<r;++f)if(g=t.charCodeAt(f),92===g)++f;else if(58===g){for(a=t.slice(p,f);t.charCodeAt(++f)<=32;);for(p=f;f<r;++f)if(g=t.charCodeAt(f),92===g)++f;else if(59===g){l=t.slice(p,f);break}if(void 0===l&&(l=t.slice(p)),h=i.attrParser.parse(a,l),u=i.command(h),d=n.attrs[h.target],null==d)throw new Error(`Bindable ${h.target} not found on ${s.name}.`);for(null===u?(c=i.exprParser.parse(l,2048),o.push(null===c?new Gi(l,d.property):new zi(c,d.property))):(c=i.exprParser.parse(l,u.bindingType),hr.node=e,hr.attr=h,hr.expr=c,hr.bindable=d,hr.def=s,o.push(u.build(hr)));f<r&&t.charCodeAt(++f)<=32;);p=f,a=void 0,l=void 0}return ar(),o}local(e,t){const s=e,i=$(s.querySelectorAll("template[as-custom-element]")),n=i.length;if(0===n)return;if(n===s.childElementCount)throw new Error("The custom element does not have any content other than local template(s).");const r=new Set;for(const e of i){if(e.parentNode!==s)throw new Error("Local templates needs to be defined directly under root.");const i=br(e,r),n=class{},o=e.content,a=$(o.querySelectorAll("bindable")),l=he.for(n),c=new Set,h=new Set;for(const e of a){if(e.parentNode!==o)throw new Error("Bindable properties of local templates needs to be defined directly under root.");const s=e.getAttribute("property");if(null===s)throw new Error(`The attribute 'property' is missing in ${e.outerHTML}`);const i=e.getAttribute("attribute");if(null!==i&&h.has(i)||c.has(s))throw new Error(`Bindable property and attribute needs to be unique; found property: ${s}, attribute: ${i}`);null!==i&&h.add(i),c.add(s),l.add({property:s,attribute:null!=i?i:void 0,mode:yr(e)});const n=e.getAttributeNames().filter((e=>!vr.includes(e)));n.length>0&&t.logger.warn(`The attribute(s) ${n.join(", ")} will be ignored for ${e.outerHTML}. Only ${vr.join(", ")} are processed.`),o.removeChild(e)}t.addDep(Ht.define({name:i,template:e},n)),s.removeChild(e)}}shouldReorderAttrs(e){return"INPUT"===e.nodeName&&1===dr[e.type]}reorder(e,t){switch(e.nodeName){case"INPUT":{const e=t;let s,i,n,r=0;for(let t=0;t<e.length&&r<3;t++)switch(n=e[t],n.to){case"model":case"value":case"matcher":s=t,r++;break;case"checked":i=t,r++}void 0!==i&&void 0!==s&&i<s&&([e[s],e[i]]=[e[i],e[s]])}}}mark(e){return e.classList.add("au"),e}marker(e,t){const s=e.parentNode,i=t.h("au-m");return this.mark(s.insertBefore(i,e)),s.removeChild(e),i}}class rr{constructor(e,t,s,i,n,r){this.hasSlot=!1,this.commands=Ve();const o=null!==i;this.c=t,this.root=null===n?this:n,this.def=e,this.ci=s,this.parent=i,this.templateFactory=o?i.templateFactory:t.get(er),this.attrParser=o?i.attrParser:t.get(Ae),this.exprParser=o?i.exprParser:t.get(D),this.attrMapper=o?i.attrMapper:t.get(ze),this.logger=o?i.logger:t.get(x),this.p=o?i.p:t.get(Ie),this.localEls=o?i.localEls:new Set,this.rows=null!=r?r:[]}addDep(e){var t,s;(null!==(t=(s=this.root).deps)&&void 0!==t?t:s.deps=[]).push(e),this.root.c.register(e)}h(e){const t=this.p.document.createElement(e);return"template"===e&&this.p.document.adoptNode(t.content),t}el(e){return this.c.find(Ht,e)}attr(e){return this.c.find(jt,e)}child(e){return new rr(this.def,this.c,this.ci,this,this.root,e)}command(e){if(this.root!==this)return this.root.command(e);const t=e.command;if(null===t)return null;let s=this.commands[t];if(void 0===s){if(s=this.c.create(qn,t),null===s)throw new Error(`Unknown binding command: ${t}`);this.commands[t]=s}return s}}function or(e){const t=e.length;let s=0;for(let i=0;i<t;++i)if(s=e.charCodeAt(i),92===s)++i;else{if(58===s)return!0;if(36===s&&123===e.charCodeAt(i+1))return!1}return!1}function ar(){hr.node=hr.attr=hr.expr=hr.bindable=hr.def=null}const lr={projections:null},cr={name:"unnamed"},hr={node:null,expr:null,attr:null,bindable:null,def:null},ur=Object.assign(Ve(),{id:!0,name:!0,"au-slot":!0,"as-element":!0}),dr={checkbox:1,radio:1},pr=new WeakMap;class gr{constructor(e,t,s){this.attrs=e,this.bindables=t,this.primary=s}static from(e,t){let s=pr.get(e);if(null==s){const i=e.bindables,n=Ve(),r=t?void 0===e.defaultBindingMode?R.default:e.defaultBindingMode:R.default;let o,a,l,c,h=!1;for(a in i){if(o=i[a],c=o.attribute,!0===o.primary){if(h)throw new Error(`Primary already exists on ${e.name}`);h=!0,l=o}else h||null!=l||(l=o);n[c]=ue.create(a,o)}null==o&&t&&(l=n.value=ue.create("value",{mode:r})),pr.set(e,s=new gr(n,i,l))}return s}}var fr;!function(e){e.property="property",e.attribute="attribute",e.mode="mode"}(fr||(fr={}));const vr=Object.freeze(["property","attribute","mode"]),mr="as-custom-element";function br(e,t){const s=e.getAttribute(mr);if(null===s||""===s)throw new Error('The value of "as-custom-element" attribute cannot be empty for local template');if(t.has(s))throw new Error(`Duplicate definition of the local template named ${s}`);return t.add(s),e.removeAttribute(mr),s}function yr(e){switch(e.getAttribute("mode")){case"oneTime":return R.oneTime;case"toView":return R.toView;case"fromView":return R.fromView;case"twoWay":return R.twoWay;case"default":default:return R.default}}const wr=l.createInterface("ITemplateCompilerHooks"),xr=new WeakMap,kr=t.resource.keyFor("compiler-hooks"),Cr=Object.freeze({name:kr,define(e){let s=xr.get(e);return void 0===s&&(xr.set(e,s=new Tr(e)),i.define(kr,s,e),t.resource.appendTo(e,kr)),e}});class Tr{constructor(e){this.Type=e}get name(){return""}register(e){e.register(h.singleton(wr,this.Type))}}const Ar=e=>{return void 0===e?t:t(e);function t(e){return Cr.define(e)}};class $r{constructor(e){this.mode=e,this.originalModes=new Map}bind(e,t,s){this.originalModes.set(s,s.mode),s.mode=this.mode}unbind(e,t,s){s.mode=this.originalModes.get(s),this.originalModes.delete(s)}}class Er extends $r{constructor(){super(R.oneTime)}}class Sr extends $r{constructor(){super(R.toView)}}class Or extends $r{constructor(){super(R.fromView)}}class Pr extends $r{constructor(){super(R.twoWay)}}H("oneTime")(Er),H("toView")(Sr),H("fromView")(Or),H("twoWay")(Pr);class Rr extends G{constructor(e,t){super(e,t),this.opts={delay:200},this.firstArg=null,this.task=null,this.taskQueue=e.locator.get(u).taskQueue,t.args.length>0&&(this.firstArg=t.args[0])}callSource(e){this.queueTask((()=>this.binding.callSource(e)))}handleChange(e,t,s){null!==this.task&&(this.task.cancel(),this.task=null),this.binding.handleChange(e,t,s)}updateSource(e,t){this.queueTask((()=>this.binding.updateSource(e,t)))}queueTask(e){const t=this.task;this.task=this.taskQueue.queueTask((()=>(this.task=null,e())),this.opts),null==t||t.cancel()}$bind(e,t){if(null!==this.firstArg){const s=Number(this.firstArg.evaluate(e,t,this.locator,null));this.opts.delay=isNaN(s)?200:s}this.binding.$bind(e,t)}$unbind(e){var t;null===(t=this.task)||void 0===t||t.cancel(),this.task=null,this.binding.$unbind(e)}}H("debounce")(Rr);let Mr=class{constructor(e){this.signaler=e,this.lookup=new Map}bind(e,t,s,...i){if(!("handleChange"in s))throw new Error("The signal behavior can only be used with bindings that have a 'handleChange' method");if(0===i.length)throw new Error("At least one signal name must be passed to the signal behavior, e.g. `expr & signal:'my-signal'`");this.lookup.set(s,i);for(const e of i)this.signaler.addSignalListener(e,s)}unbind(e,t,s){const i=this.lookup.get(s);this.lookup.delete(s);for(const e of i)this.signaler.removeSignalListener(e,s)}};Mr=oe([ae(0,_)],Mr),H("signal")(Mr);class Br extends G{constructor(e,t){super(e,t),this.opts={delay:200},this.firstArg=null,this.task=null,this.lastCall=0,this.delay=0,this.platform=e.locator.get(u),this.taskQueue=this.platform.taskQueue,t.args.length>0&&(this.firstArg=t.args[0])}callSource(e){this.queueTask((()=>this.binding.callSource(e)))}handleChange(e,t,s){null!==this.task&&(this.task.cancel(),this.task=null,this.lastCall=this.platform.performanceNow()),this.binding.handleChange(e,t,s)}updateSource(e,t){this.queueTask((()=>this.binding.updateSource(e,t)))}queueTask(e){const t=this.opts,s=this.platform,i=this.lastCall+t.delay-s.performanceNow();if(i>0){const n=this.task;t.delay=i,this.task=this.taskQueue.queueTask((()=>{this.lastCall=s.performanceNow(),this.task=null,t.delay=this.delay,e()}),t),null==n||n.cancel()}else this.lastCall=s.performanceNow(),e()}$bind(e,t){if(null!==this.firstArg){const s=Number(this.firstArg.evaluate(e,t,this.locator,null));this.opts.delay=this.delay=isNaN(s)?200:s}this.binding.$bind(e,t)}$unbind(e){var t;null===(t=this.task)||void 0===t||t.cancel(),this.task=null,super.$unbind(e)}}H("throttle")(Br);class Lr{constructor(){this.propertyKey="",this.type=6}getValue(e,t){return e.getAttribute(t)}setValue(e,t,s,i){null==e?s.removeAttribute(i):s.setAttribute(i,e)}}const jr=new Lr;let Vr=class{bind(e,t,s){s.targetObserver=jr}unbind(e,t,s){}};function Ir(e){const t=e.composedPath()[0];if(this.target===t)return this.selfEventCallSource(e)}Vr=oe([H("attr")],Vr);let Nr=class{bind(e,t,s){if(!s.callSource||!s.targetEvent)throw new Error("Self binding behavior only supports events.");s.selfEventCallSource=s.callSource,s.callSource=Ir}unbind(e,t,s){s.callSource=s.selfEventCallSource,s.selfEventCallSource=null}};Nr=oe([H("self")],Nr);const qr=Ve();class Dr{constructor(e){this.namespace=e,this.type=6}static forNs(e){var t;return null!==(t=qr[e])&&void 0!==t?t:qr[e]=new Dr(e)}getValue(e,t){return e.getAttributeNS(this.namespace,t)}setValue(e,t,s,i){null==e?s.removeAttributeNS(this.namespace,i):s.setAttributeNS(this.namespace,i,e)}}function Fr(e,t){return e===t}class zr{constructor(e,t,s,i){this.handler=s,this.observerLocator=i,this.value=void 0,this.oldValue=void 0,this.type=7,this.collectionObserver=void 0,this.valueObserver=void 0,this.f=0,this.obj=e}getValue(){return this.value}setValue(e,t){const s=this.value;e!==s&&(this.value=e,this.oldValue=s,this.f=t,this.observe(),this.synchronizeElement(),this.queue.add(this))}handleCollectionChange(e,t){this.synchronizeElement()}handleChange(e,t,s){this.synchronizeElement()}synchronizeElement(){const e=this.value,t=this.obj,s=Object.prototype.hasOwnProperty.call(t,"model")?t.model:t.value,i=void 0!==t.matcher?t.matcher:Fr;if("radio"===t.type)t.checked=!!i(e,s);else if(!0===e)t.checked=!0;else{let n=!1;if(e instanceof Array)n=-1!==e.findIndex((e=>!!i(e,s)));else if(e instanceof Set){for(const t of e)if(i(t,s)){n=!0;break}}else if(e instanceof Map)for(const t of e){const e=t[1];if(i(t[0],s)&&!0===e){n=!0;break}}t.checked=n}}handleEvent(){let e=this.oldValue=this.value;const t=this.obj,s=Object.prototype.hasOwnProperty.call(t,"model")?t.model:t.value,i=t.checked,n=void 0!==t.matcher?t.matcher:Fr;if("checkbox"===t.type){if(e instanceof Array){const t=e.findIndex((e=>!!n(e,s)));return void(i&&-1===t?e.push(s):i||-1===t||e.splice(t,1))}if(e instanceof Set){const t={};let r=t;for(const t of e)if(!0===n(t,s)){r=t;break}return void(i&&r===t?e.add(s):i||r===t||e.delete(r))}if(e instanceof Map){let t;for(const i of e){const e=i[0];if(!0===n(e,s)){t=e;break}}return void e.set(t,i)}e=i}else{if(!i)return;e=s}this.value=e,this.queue.add(this)}start(){this.handler.subscribe(this.obj,this),this.observe()}stop(){var e,t;this.handler.dispose(),null===(e=this.collectionObserver)||void 0===e||e.unsubscribe(this),this.collectionObserver=void 0,null===(t=this.valueObserver)||void 0===t||t.unsubscribe(this)}subscribe(e){this.subs.add(e)&&1===this.subs.count&&this.start()}unsubscribe(e){this.subs.remove(e)&&0===this.subs.count&&this.stop()}flush(){Ur=this.oldValue,this.oldValue=this.value,this.subs.notify(this.value,Ur,this.f)}observe(){var e,t,s,i,n,r,o;const a=this.obj;null===(n=null!==(e=this.valueObserver)&&void 0!==e?e:this.valueObserver=null!==(s=null===(t=a.$observers)||void 0===t?void 0:t.model)&&void 0!==s?s:null===(i=a.$observers)||void 0===i?void 0:i.value)||void 0===n||n.subscribe(this),null===(r=this.collectionObserver)||void 0===r||r.unsubscribe(this),this.collectionObserver=void 0,"checkbox"===a.type&&(null===(o=this.collectionObserver=function(e,t){if(e instanceof Array)return t.getArrayObserver(e);if(e instanceof Map)return t.getMapObserver(e);if(e instanceof Set)return t.getSetObserver(e)}(this.value,this.observerLocator))||void 0===o||o.subscribe(this))}}let Ur;M(zr),B(zr);const Kr=Object.prototype.hasOwnProperty,Wr={childList:!0,subtree:!0,characterData:!0};function Hr(e,t){return e===t}class Gr{constructor(e,t,s,i){this.handler=s,this.observerLocator=i,this.value=void 0,this.oldValue=void 0,this.hasChanges=!1,this.type=7,this.arrayObserver=void 0,this.nodeObserver=void 0,this.observing=!1,this.obj=e}getValue(){return this.observing?this.value:this.obj.multiple?Array.from(this.obj.options).map((e=>e.value)):this.obj.value}setValue(e,t){this.oldValue=this.value,this.value=e,this.hasChanges=e!==this.oldValue,this.observeArray(e instanceof Array?e:null),0==(256&t)&&this.flushChanges(t)}flushChanges(e){this.hasChanges&&(this.hasChanges=!1,this.syncOptions())}handleCollectionChange(){this.syncOptions()}syncOptions(){var e;const t=this.value,s=this.obj,i=Array.isArray(t),n=null!==(e=s.matcher)&&void 0!==e?e:Hr,r=s.options;let o=r.length;for(;o-- >0;){const e=r[o],s=Kr.call(e,"model")?e.model:e.value;i?e.selected=-1!==t.findIndex((e=>!!n(s,e))):e.selected=!!n(s,t)}}syncValue(){const e=this.obj,t=e.options,s=t.length,i=this.value;let n=0;if(e.multiple){if(!(i instanceof Array))return!0;let r;const o=e.matcher||Hr,a=[];for(;n<s;)r=t[n],r.selected&&a.push(Kr.call(r,"model")?r.model:r.value),++n;for(n=0;n<i.length;){const e=i[n];-1===a.findIndex((t=>!!o(e,t)))?i.splice(n,1):++n}for(n=0;n<a.length;){const e=a[n];-1===i.findIndex((t=>!!o(e,t)))&&i.push(e),++n}return!1}let r=null;for(;n<s;){const e=t[n];if(e.selected){r=Kr.call(e,"model")?e.model:e.value;break}++n}return this.oldValue=this.value,this.value=r,!0}start(){(this.nodeObserver=new this.obj.ownerDocument.defaultView.MutationObserver(this.handleNodeChange.bind(this))).observe(this.obj,Wr),this.observeArray(this.value instanceof Array?this.value:null),this.observing=!0}stop(){var e;this.nodeObserver.disconnect(),null===(e=this.arrayObserver)||void 0===e||e.unsubscribe(this),this.nodeObserver=this.arrayObserver=void 0,this.observing=!1}observeArray(e){var t;if(null===(t=this.arrayObserver)||void 0===t||t.unsubscribe(this),this.arrayObserver=void 0,null!=e){if(!this.obj.multiple)throw new Error("Only null or Array instances can be bound to a multi-select.");(this.arrayObserver=this.observerLocator.getArrayObserver(e)).subscribe(this)}}handleEvent(){this.syncValue()&&this.queue.add(this)}handleNodeChange(){this.syncOptions();this.syncValue()&&this.queue.add(this)}subscribe(e){this.subs.add(e)&&1===this.subs.count&&(this.handler.subscribe(this.obj,this),this.start())}unsubscribe(e){this.subs.remove(e)&&0===this.subs.count&&(this.handler.dispose(),this.stop())}flush(){_r=this.oldValue,this.oldValue=this.value,this.subs.notify(this.value,_r,0)}}let _r;M(Gr),B(Gr);class Qr{constructor(e){this.obj=e,this.value="",this.oldValue="",this.styles={},this.version=0,this.hasChanges=!1,this.type=6}getValue(){return this.obj.style.cssText}setValue(e,t){this.value=e,this.hasChanges=e!==this.oldValue,0==(256&t)&&this.flushChanges(t)}getStyleTuplesFromString(e){const t=[],s=/url\([^)]+$/;let i,n,r,o,a=0,l="";for(;a<e.length;)i=e.indexOf(";",a),-1===i&&(i=e.length),l+=e.substring(a,i),a=i+1,s.test(l)?l+=";":(n=l.indexOf(":"),r=l.substring(0,n).trim(),o=l.substring(n+1).trim(),t.push([r,o]),l="");return t}getStyleTuplesFromObject(e){let t;const s=[];for(const i in e)if(t=e[i],null!=t)if("string"!=typeof t)s.push(...this.getStyleTuples(t));else{if(i.startsWith("--")){s.push([i,t]);continue}s.push([r(i),t])}return s}getStyleTuplesFromArray(e){const t=e.length;if(t>0){const s=[];for(let i=0;i<t;++i)s.push(...this.getStyleTuples(e[i]));return s}return a}getStyleTuples(e){return"string"==typeof e?this.getStyleTuplesFromString(e):e instanceof Array?this.getStyleTuplesFromArray(e):e instanceof Object?this.getStyleTuplesFromObject(e):a}flushChanges(e){if(this.hasChanges){this.hasChanges=!1;const e=this.value,t=this.styles,s=this.getStyleTuples(e);let i,n,r,o,a=this.version;this.oldValue=e;const l=s.length;for(let e=0;e<l;++e)n=s[e],r=n[0],o=n[1],this.setProperty(r,o),t[r]=a;if(this.styles=t,this.version+=1,0===a)return;for(i in a-=1,t)Object.prototype.hasOwnProperty.call(t,i)&&t[i]===a&&this.obj.style.removeProperty(i)}}setProperty(e,t){let s="";null!=t&&"function"==typeof t.indexOf&&t.includes("!important")&&(s="important",t=t.replace("!important","")),this.obj.style.setProperty(e,t,s)}bind(e){this.value=this.oldValue=this.obj.style.cssText}}class Xr{constructor(e,t,s){this.propertyKey=t,this.handler=s,this.value="",this.oldValue="",this.hasChanges=!1,this.type=7,this.obj=e}getValue(){return this.value}setValue(e,t){Object.is(e,this.value)||(this.oldValue=this.value,this.value=e,this.hasChanges=!0,this.handler.config.readonly||0!=(256&t)||this.flushChanges(t))}flushChanges(e){var t;this.hasChanges&&(this.hasChanges=!1,this.obj[this.propertyKey]=null!==(t=this.value)&&void 0!==t?t:this.handler.config.default,0==(2&e)&&this.queue.add(this))}handleEvent(){this.oldValue=this.value,this.value=this.obj[this.propertyKey],this.oldValue!==this.value&&(this.hasChanges=!1,this.queue.add(this))}subscribe(e){this.subs.add(e)&&1===this.subs.count&&(this.handler.subscribe(this.obj,this),this.value=this.oldValue=this.obj[this.propertyKey])}unsubscribe(e){this.subs.remove(e)&&0===this.subs.count&&this.handler.dispose()}flush(){Yr=this.oldValue,this.oldValue=this.value,this.subs.notify(this.value,Yr,0)}}let Yr;M(Xr),B(Xr);const Zr="http://www.w3.org/1999/xlink",Jr="http://www.w3.org/XML/1998/namespace",eo="http://www.w3.org/2000/xmlns/",to=Object.assign(Ve(),{"xlink:actuate":["actuate",Zr],"xlink:arcrole":["arcrole",Zr],"xlink:href":["href",Zr],"xlink:role":["role",Zr],"xlink:show":["show",Zr],"xlink:title":["title",Zr],"xlink:type":["type",Zr],"xml:lang":["lang",Jr],"xml:space":["space",Jr],xmlns:["xmlns",eo],"xmlns:xlink":["xlink",eo]}),so=new Q;so.type=6;class io{constructor(e){var t;this.type=null!==(t=e.type)&&void 0!==t?t:Xr,this.events=e.events,this.readonly=e.readonly,this.default=e.default}}class no{constructor(e,t,s,i){this.locator=e,this.platform=t,this.dirtyChecker=s,this.svgAnalyzer=i,this.allowDirtyCheck=!0,this.events=Ve(),this.globalEvents=Ve(),this.overrides=Ve(),this.globalOverrides=Ve();const n=["change","input"],r={events:n,default:""};this.useConfig({INPUT:{value:r,valueAsNumber:{events:n,default:0},checked:{type:zr,events:n},files:{events:n,readonly:!0}},SELECT:{value:{type:Gr,events:["change"],default:""}},TEXTAREA:{value:r}});const o={events:["change","input","blur","keyup","paste"],default:""},a={events:["scroll"],default:0};this.useConfigGlobal({scrollTop:a,scrollLeft:a,textContent:o,innerHTML:o}),this.overrideAccessorGlobal("css","style","class"),this.overrideAccessor({INPUT:["value","checked","model"],SELECT:["value"],TEXTAREA:["value"]})}static register(e){h.aliasTo(X,no).register(e),h.singleton(X,no).register(e)}handles(e,t){return e instanceof this.platform.Node}useConfig(e,t,s){var i,n;const r=this.events;let o;if("string"==typeof e)o=null!==(i=r[e])&&void 0!==i?i:r[e]=Ve(),null==o[t]?o[t]=new io(s):ro(e,t);else for(const s in e){o=null!==(n=r[s])&&void 0!==n?n:r[s]=Ve();const i=e[s];for(t in i)null==o[t]?o[t]=new io(i[t]):ro(s,t)}}useConfigGlobal(e,t){const s=this.globalEvents;if("object"==typeof e)for(const t in e)null==s[t]?s[t]=new io(e[t]):ro("*",t);else null==s[e]?s[e]=new io(t):ro("*",e)}getAccessor(e,t,s){var i;if(t in this.globalOverrides||t in(null!==(i=this.overrides[e.tagName])&&void 0!==i?i:E))return this.getObserver(e,t,s);switch(t){case"src":case"href":case"role":return jr;default:{const s=to[t];return void 0!==s?Dr.forNs(s[1]):je(e,t,this.svgAnalyzer)?jr:so}}}overrideAccessor(e,t){var s,i,n,r;let o;if("string"==typeof e)o=null!==(s=(n=this.overrides)[e])&&void 0!==s?s:n[e]=Ve(),o[t]=!0;else for(const t in e)for(const s of e[t])o=null!==(i=(r=this.overrides)[t])&&void 0!==i?i:r[t]=Ve(),o[s]=!0}overrideAccessorGlobal(...e){for(const t of e)this.globalOverrides[t]=!0}getObserver(e,t,s){var i,n;switch(t){case"role":return jr;case"class":return new gs(e);case"css":case"style":return new Qr(e)}const r=null!==(n=null===(i=this.events[e.tagName])||void 0===i?void 0:i[t])&&void 0!==n?n:this.globalEvents[t];if(null!=r)return new r.type(e,t,new Bi(r),s,this.locator);const o=to[t];if(void 0!==o)return Dr.forNs(o[1]);if(je(e,t,this.svgAnalyzer))return jr;if(t in e.constructor.prototype){if(this.allowDirtyCheck)return this.dirtyChecker.createProperty(e,t);throw new Error(`Unable to observe property ${String(t)}. Register observation mapping with .useConfig().`)}return new Y(e,t)}}function ro(e,t){throw new Error(`Mapping for property ${String(t)} of <${e} /> already exists`)}no.inject=[S,Ie,Z,Ne];let oo=class{constructor(e){this.observerLocator=e}bind(e,t,s,...i){if(0===i.length)throw new Error("The updateTrigger binding behavior requires at least one event name argument: eg <input value.bind=\"firstName & updateTrigger:'blur'\">");if(s.mode!==R.twoWay&&s.mode!==R.fromView)throw new Error("The updateTrigger binding behavior can only be applied to two-way/ from-view bindings on input/select elements.");const n=this.observerLocator.getObserver(s.target,s.targetProperty);if(!n.handler)throw new Error("The updateTrigger binding behavior can only be applied to two-way/ from-view bindings on input/select elements.");s.targetObserver=n;const r=n.handler;n.originalHandler=r,n.handler=new Bi(new io({default:r.config.default,events:i,readonly:r.config.readonly}))}unbind(e,t,s){s.targetObserver.handler.dispose(),s.targetObserver.handler=s.targetObserver.originalHandler,s.targetObserver.originalHandler=null}};oo=oe([H("updateTrigger"),ae(0,q)],oo);let ao=class{constructor(e,t){this.element=e,this.p=t,this.needsApply=!1}binding(){this.valueChanged()}valueChanged(){this.$controller.isActive?this.apply():this.needsApply=!0}attached(){this.needsApply&&(this.needsApply=!1,this.apply());const e=this.element;e.addEventListener("focus",this),e.addEventListener("blur",this)}afterDetachChildren(){const e=this.element;e.removeEventListener("focus",this),e.removeEventListener("blur",this)}handleEvent(e){"focus"===e.type?this.value=!0:this.isElFocused||(this.value=!1)}apply(){const e=this.element,t=this.isElFocused,s=this.value;s&&!t?e.focus():!s&&t&&e.blur()}get isElFocused(){return this.element===this.p.document.activeElement}};oe([le({mode:R.twoWay})],ao.prototype,"value",void 0),ao=oe([Mt("focus"),ae(0,fi),ae(1,Ie)],ao);let lo=class{constructor(e,t,s){this.el=e,this.p=t,this.isActive=!1,this.task=null,this.$val="",this.$prio="",this.update=()=>{this.task=null,Boolean(this.value)!==this.isToggled&&(this.isToggled===this.base?(this.isToggled=!this.base,this.$val=this.el.style.getPropertyValue("display"),this.$prio=this.el.style.getPropertyPriority("display"),this.el.style.setProperty("display","none","important")):(this.isToggled=this.base,this.el.style.setProperty("display",this.$val,this.$prio),""===this.el.getAttribute("style")&&this.el.removeAttribute("style")))},this.isToggled=this.base="hide"!==s.alias}binding(){this.isActive=!0,this.update()}detaching(){var e;this.isActive=!1,null===(e=this.task)||void 0===e||e.cancel(),this.task=null}valueChanged(){this.isActive&&null===this.task&&(this.task=this.p.domWriteQueue.queueTask(this.update))}};oe([le],lo.prototype,"value",void 0),lo=oe([Mt("show"),J("hide"),ae(0,fi),ae(1,Ie),ae(2,Di)],lo);let co=class{constructor(e,t,s){this.factory=e,this.originalLoc=t,this.p=s,this.id=b("au$component"),this.strict=!1,this.currentTarget=s.document.createElement("div"),this.view=this.factory.create(),xi(this.view.nodes,t)}attaching(e,t,s){null==this.callbackContext&&(this.callbackContext=this.$controller.scope.bindingContext);const i=this.currentTarget=this.resolveTarget();return this.view.setHost(i),this.$activating(e,i,s)}detaching(e,t,s){return this.$deactivating(e,this.currentTarget,s)}targetChanged(){const{$controller:e}=this;if(!e.isActive)return;const t=this.currentTarget,s=this.currentTarget=this.resolveTarget();if(t===s)return;this.view.setHost(s);const i=C(this.$deactivating(null,s,e.flags),(()=>this.$activating(null,s,e.flags)));i instanceof Promise&&i.catch((e=>{throw e}))}$activating(e,t,s){const{activating:i,callbackContext:n,view:r}=this;return r.setHost(t),C(null==i?void 0:i.call(n,t,r),(()=>this.activate(e,t,s)))}activate(e,t,s){const{$controller:i,view:n}=this;return null!==e?C(n.activate(null!=e?e:n,i,s,i.scope),(()=>this.$activated(t))):(n.nodes.appendTo(t),this.$activated(t))}$activated(e){const{activated:t,callbackContext:s,view:i}=this;return null==t?void 0:t.call(s,e,i)}$deactivating(e,t,s){const{deactivating:i,callbackContext:n,view:r}=this;return C(null==i?void 0:i.call(n,t,r),(()=>this.deactivate(e,t,s)))}deactivate(e,t,s){const{$controller:i,view:n}=this;return null!==e?C(n.deactivate(e,i,s),(()=>this.$deactivated(t))):(n.nodes.remove(),this.$deactivated(t))}$deactivated(e){const{deactivated:t,callbackContext:s,view:i}=this;return null==t?void 0:t.call(s,e,i)}resolveTarget(){const e=this.p,t=e.document;let s=this.target,i=this.renderContext;if(""===s){if(this.strict)throw new Error("Empty querySelector");return t.body}if("string"==typeof s){let n=t;"string"==typeof i&&(i=t.querySelector(i)),i instanceof e.Node&&(n=i),s=n.querySelector(s)}if(s instanceof e.Node)return s;if(null==s){if(this.strict)throw new Error("Portal target not found");return t.body}return s}dispose(){this.view.dispose(),this.view=void 0,this.callbackContext=null}accept(e){var t;if(!0===(null===(t=this.view)||void 0===t?void 0:t.accept(e)))return!0}};oe([le({primary:!0})],co.prototype,"target",void 0),oe([le({callback:"targetChanged"})],co.prototype,"renderContext",void 0),oe([le()],co.prototype,"strict",void 0),oe([le()],co.prototype,"deactivating",void 0),oe([le()],co.prototype,"activating",void 0),oe([le()],co.prototype,"deactivated",void 0),oe([le()],co.prototype,"activated",void 0),oe([le()],co.prototype,"callbackContext",void 0),co=oe([Bt("portal"),ae(0,Xt),ae(1,mi),ae(2,Ie)],co);class ho{constructor(e,t,s){this.factory=e,this.flags=s,this.id=b("au$component"),this.view=this.factory.create().setLocation(t)}attaching(e,t,s){const{$controller:i}=this;return this.view.activate(e,i,s|this.flags,i.scope)}detaching(e,t,s){return this.view.deactivate(e,this.$controller,s)}dispose(){this.view.dispose(),this.view=void 0}accept(e){var t;if(!0===(null===(t=this.view)||void 0===t?void 0:t.accept(e)))return!0}}class uo extends ho{constructor(e,t){super(e,t,512)}}uo.inject=[Xt,mi];class po extends ho{constructor(e,t){super(e,t,128)}}po.inject=[Xt,mi],Bt("frequent-mutations")(uo),Bt("observe-shallow")(po);let go=class{constructor(e,t,s){this.ifFactory=e,this.location=t,this.work=s,this.id=b("au$component"),this.elseFactory=void 0,this.elseView=void 0,this.ifView=void 0,this.view=void 0,this.value=!1,this.cache=!0,this.pending=void 0,this.wantsDeactivate=!1,this.swapId=0}created(){this.ctrl=this.$controller}attaching(e,t,s){let i;const n=this.swapId++,r=()=>!this.wantsDeactivate&&this.swapId===n+1;return C(this.pending,(()=>{var t;r()&&(this.pending=void 0,i=this.view=this.value?this.ifView=this.cache&&null!=this.ifView?this.ifView:this.ifFactory.create(s):this.elseView=this.cache&&null!=this.elseView?this.elseView:null===(t=this.elseFactory)||void 0===t?void 0:t.create(s),null!=i&&(i.setLocation(this.location),this.pending=C(i.activate(e,this.ctrl,s,this.ctrl.scope),(()=>{r()&&(this.pending=void 0)}))))}))}detaching(e,t,s){return this.wantsDeactivate=!0,C(this.pending,(()=>{var t;this.wantsDeactivate=!1,this.pending=void 0,null===(t=this.view)||void 0===t||t.deactivate(e,this.ctrl,s)}))}valueChanged(e,t,s){if(!this.ctrl.isActive)return;if((e=!!e)===(t=!!t))return;this.work.start();const i=this.view,n=this.swapId++,r=()=>!this.wantsDeactivate&&this.swapId===n+1;let o;return C(C(this.pending,(()=>this.pending=C(null==i?void 0:i.deactivate(i,this.ctrl,s),(()=>{var t;if(r()&&(o=this.view=e?this.ifView=this.cache&&null!=this.ifView?this.ifView:this.ifFactory.create(s):this.elseView=this.cache&&null!=this.elseView?this.elseView:null===(t=this.elseFactory)||void 0===t?void 0:t.create(s),null!=o))return o.setLocation(this.location),C(o.activate(o,this.ctrl,s,this.ctrl.scope),(()=>{r()&&(this.pending=void 0)}))})))),(()=>this.work.finish()))}dispose(){var e,t;null===(e=this.ifView)||void 0===e||e.dispose(),null===(t=this.elseView)||void 0===t||t.dispose(),this.ifView=this.elseView=this.view=void 0}accept(e){var t;if(!0===(null===(t=this.view)||void 0===t?void 0:t.accept(e)))return!0}};oe([le],go.prototype,"value",void 0),oe([le({set:e=>""===e||!!e&&"false"!==e})],go.prototype,"cache",void 0),go=oe([Bt("if"),ae(0,Xt),ae(1,mi),ae(2,ci)],go);let fo=class{constructor(e){this.factory=e,this.id=b("au$component")}link(e,t,s,i,n,r){const o=s.children,a=o[o.length-1];if(a instanceof go)a.elseFactory=this.factory;else{if(!(a.viewModel instanceof go))throw new Error("Unsupported IfBehavior");a.viewModel.elseFactory=this.factory}}};function vo(e){e.dispose()}fo=oe([Bt({name:"else"}),ae(0,Xt)],fo);let mo=class{constructor(e,t,s){this.location=e,this.parent=t,this.factory=s,this.id=b("au$component"),this.hasPendingInstanceMutation=!1,this.observer=void 0,this.views=[],this.key=void 0,this.normalizedItems=void 0}binding(e,t,s){this.checkCollectionObserver(s);const i=this.parent.bindings;let n;for(let e=0,t=i.length;e<t;++e)if(n=i[e],n.target===this&&"items"===n.targetProperty){this.forOf=n.sourceExpression;break}this.local=this.forOf.declaration.evaluate(s,this.$controller.scope,n.locator,null)}attaching(e,t,s){return this.normalizeToArray(s),this.activateAllViews(e,s)}detaching(e,t,s){return this.checkCollectionObserver(s),this.deactivateAllViews(e,s)}itemsChanged(e){const{$controller:t}=this;if(!t.isActive)return;this.checkCollectionObserver(e|=t.flags),this.normalizeToArray(e);const s=C(this.deactivateAllViews(null,e),(()=>this.activateAllViews(null,e)));s instanceof Promise&&s.catch((e=>{throw e}))}handleCollectionChange(e,t){const{$controller:s}=this;if(s.isActive)if(this.normalizeToArray(t|=s.flags),void 0===e){const e=C(this.deactivateAllViews(null,t),(()=>this.activateAllViews(null,t)));e instanceof Promise&&e.catch((e=>{throw e}))}else{const s=this.views.length;if(ee(e),e.deletedItems.length>0){e.deletedItems.sort(O);const i=C(this.deactivateAndRemoveViewsByKey(e,t),(()=>this.createAndActivateAndSortViewsByKey(s,e,t)));i instanceof Promise&&i.catch((e=>{throw e}))}else this.createAndActivateAndSortViewsByKey(s,e,t)}}checkCollectionObserver(e){const t=this.observer;if(4&e)void 0!==t&&t.unsubscribe(this);else if(this.$controller.isActive){const e=this.observer=te(this.items);t!==e&&t&&t.unsubscribe(this),e&&e.subscribe(this)}}normalizeToArray(e){const t=this.items;if(t instanceof Array)return void(this.normalizedItems=t);if(void 0===this.forOf)return;const s=[];this.forOf.iterate(e,t,((e,t,i)=>{s[t]=i})),this.normalizedItems=s}activateAllViews(e,t){let s,i,n,r;const{$controller:o,factory:a,local:l,location:c,items:h}=this,u=o.scope,d=this.forOf.count(t,h),p=this.views=Array(d);if(this.forOf.iterate(t,h,((h,g,f)=>{n=p[g]=a.create(t).setLocation(c),n.nodes.unlink(),r=V.fromParent(u,se.create(l,f)),xo(r.overrideContext,g,d),i=n.activate(null!=e?e:n,o,t,r),i instanceof Promise&&(null!=s?s:s=[]).push(i)})),void 0!==s)return 1===s.length?s[0]:Promise.all(s)}deactivateAllViews(e,t){let s,i,n;const{views:r,$controller:o}=this;for(let a=0,l=r.length;a<l;++a)n=r[a],n.release(),i=n.deactivate(null!=e?e:n,o,t),i instanceof Promise&&(null!=s?s:s=[]).push(i);if(void 0!==s)return 1===s.length?s[0]:Promise.all(s)}deactivateAndRemoveViewsByKey(e,t){let s,i,n;const{$controller:r,views:o}=this,a=e.deletedItems,l=a.length;let c=0;for(;c<l;++c)n=o[a[c]],n.release(),i=n.deactivate(n,r,t),i instanceof Promise&&(null!=s?s:s=[]).push(i);c=0;let h=0;for(;c<l;++c)h=a[c]-c,o.splice(h,1);if(void 0!==s)return 1===s.length?s[0]:Promise.all(s)}createAndActivateAndSortViewsByKey(e,t,s){var i;let n,r,o,a;const{$controller:l,factory:c,local:h,normalizedItems:u,location:d,views:p}=this,g=t.length;for(let e=0;e<g;++e)-2===t[e]&&(o=c.create(s),p.splice(e,0,o));if(p.length!==g)throw new Error(`viewsLen=${p.length}, mapLen=${g}`);const f=l.scope,v=t.length;ie(p,t);const m=function(e){const t=e.length;t>bo&&(bo=t,yo=new Int32Array(t),wo=new Int32Array(t));let s=0,i=0,n=0,r=0,o=0,a=0,l=0,c=0;for(;r<t;r++)if(i=e[r],-2!==i){if(o=yo[s],n=e[o],-2!==n&&n<i){wo[r]=o,yo[++s]=r;continue}for(a=0,l=s;a<l;)c=a+l>>1,n=e[yo[c]],-2!==n&&n<i?a=c+1:l=c;n=e[yo[a]],(i<n||-2===n)&&(a>0&&(wo[r]=yo[a-1]),yo[a]=r)}r=++s;const h=new Int32Array(r);i=yo[s-1];for(;s-- >0;)h[s]=i,i=wo[i];for(;r-- >0;)yo[r]=0;return h}(t),b=m.length;let y,w=b-1,x=v-1;for(;x>=0;--x)o=p[x],y=p[x+1],o.nodes.link(null!==(i=null==y?void 0:y.nodes)&&void 0!==i?i:d),-2===t[x]?(a=V.fromParent(f,se.create(h,u[x])),xo(a.overrideContext,x,v),o.setLocation(d),r=o.activate(o,l,s,a),r instanceof Promise&&(null!=n?n:n=[]).push(r)):w<0||1===b||x!==m[w]?(xo(o.scope.overrideContext,x,v),o.nodes.insertBefore(o.location)):(e!==v&&xo(o.scope.overrideContext,x,v),--w);if(void 0!==n)return 1===n.length?n[0]:Promise.all(n)}dispose(){this.views.forEach(vo),this.views=void 0}accept(e){const{views:t}=this;if(void 0!==t)for(let s=0,i=t.length;s<i;++s)if(!0===t[s].accept(e))return!0}};oe([le],mo.prototype,"items",void 0),mo=oe([Bt("repeat"),ae(0,mi),ae(1,ni),ae(2,Xt)],mo);let bo=16,yo=new Int32Array(bo),wo=new Int32Array(bo);function xo(e,t,s){const i=0===t,n=t===s-1,r=t%2==0;e.$index=t,e.$first=i,e.$last=n,e.$middle=!i&&!n,e.$even=r,e.$odd=!r,e.$length=s}let ko=class{constructor(e,t){this.factory=e,this.location=t,this.id=b("au$component"),this.id=b("au$component"),this.view=this.factory.create().setLocation(t)}valueChanged(e,t,s){const i=this.$controller,n=this.view.bindings;let r,o=0,a=0;if(i.isActive&&null!=n)for(r=V.fromParent(i.scope,void 0===e?{}:e),a=n.length;a>o;++o)n[o].$bind(2,r)}attaching(e,t,s){const{$controller:i,value:n}=this,r=V.fromParent(i.scope,void 0===n?{}:n);return this.view.activate(e,i,s,r)}detaching(e,t,s){return this.view.deactivate(e,this.$controller,s)}dispose(){this.view.dispose(),this.view=void 0}accept(e){var t;if(!0===(null===(t=this.view)||void 0===t?void 0:t.accept(e)))return!0}};oe([le],ko.prototype,"value",void 0),ko=oe([Bt("with"),ae(0,Xt),ae(1,mi)],ko);let Co=class{constructor(e,t){this.factory=e,this.location=t,this.id=b("au$component"),this.cases=[],this.activeCases=[],this.promise=void 0}link(e,t,s,i,n,r){this.view=this.factory.create(e,this.$controller).setLocation(this.location)}attaching(e,t,s){const i=this.view,n=this.$controller;return this.queue((()=>i.activate(e,n,s,n.scope))),this.queue((()=>this.swap(e,s,this.value))),this.promise}detaching(e,t,s){return this.queue((()=>this.view.deactivate(e,this.$controller,s))),this.promise}dispose(){var e;null===(e=this.view)||void 0===e||e.dispose(),this.view=void 0}valueChanged(e,t,s){this.$controller.isActive&&this.queue((()=>this.swap(null,s,this.value)))}caseChanged(e,t){this.queue((()=>this.handleCaseChange(e,t)))}handleCaseChange(e,t){const s=e.isMatch(this.value,t),i=this.activeCases,n=i.length;if(!s)return n>0&&i[0].id===e.id?this.clearActiveCases(null,t):void 0;if(n>0&&i[0].id<e.id)return;const r=[];let o=e.fallThrough;if(o){const t=this.cases;for(let s=t.indexOf(e),i=t.length;s<i&&o;s++){const e=t[s];r.push(e),o=e.fallThrough}}else r.push(e);return C(this.clearActiveCases(null,t,r),(()=>(this.activeCases=r,this.activateCases(null,t))))}swap(e,t,s){const i=[];let n=!1;for(const e of this.cases)if((n||e.isMatch(s,t))&&(i.push(e),n=e.fallThrough),i.length>0&&!n)break;const r=this.defaultCase;return 0===i.length&&void 0!==r&&i.push(r),C(this.activeCases.length>0?this.clearActiveCases(e,t,i):void 0,(()=>{if(this.activeCases=i,0!==i.length)return this.activateCases(e,t)}))}activateCases(e,t){const s=this.$controller;if(!s.isActive)return;const i=this.activeCases,n=i.length;if(0===n)return;const r=s.scope;return 1===n?i[0].activate(e,t,r):T(...i.map((s=>s.activate(e,t,r))))}clearActiveCases(e,t,s=[]){const i=this.activeCases,n=i.length;if(0!==n){if(1===n){const n=i[0];return s.includes(n)?void 0:(i.length=0,n.deactivate(e,t))}return C(T(...i.reduce(((i,n)=>(s.includes(n)||i.push(n.deactivate(e,t)),i)),[])),(()=>{i.length=0}))}}queue(e){let t;t=this.promise=C(C(this.promise,e),(()=>{this.promise===t&&(this.promise=void 0)}))}accept(e){return!0===this.$controller.accept(e)||(!!this.activeCases.some((t=>t.accept(e)))||void 0)}};oe([le],Co.prototype,"value",void 0),Co=oe([Bt("switch"),ae(0,Xt),ae(1,mi)],Co);let To=class{constructor(e,t,s,i){this.factory=e,this.locator=t,this.id=b("au$component"),this.fallThrough=!1,this.debug=i.config.level<=1,this.logger=i.scopeTo(`${this.constructor.name}-#${this.id}`),this.view=this.factory.create().setLocation(s)}link(e,t,s,i,n,r){const o=s.parent,a=null==o?void 0:o.viewModel;if(!(a instanceof Co))throw new Error("The parent switch not found; only `*[switch] > *[case|default-case]` relation is supported.");this.$switch=a,this.linkToSwitch(a)}detaching(e,t,s){return this.deactivate(e,s)}isMatch(e,t){this.debug&&this.logger.debug("isMatch()");const s=this.value;return Array.isArray(s)?(void 0===this.observer&&(this.observer=this.observeCollection(t,s)),s.includes(e)):s===e}valueChanged(e,t,s){var i;Array.isArray(e)?(null===(i=this.observer)||void 0===i||i.unsubscribe(this),this.observer=this.observeCollection(s,e)):void 0!==this.observer&&this.observer.unsubscribe(this),this.$switch.caseChanged(this,s)}handleCollectionChange(e,t){this.$switch.caseChanged(this,t)}activate(e,t,s){const i=this.view;if(!i.isActive)return i.activate(null!=e?e:i,this.$controller,t,s)}deactivate(e,t){const s=this.view;if(s.isActive)return s.deactivate(null!=e?e:s,this.$controller,t)}dispose(){var e,t;null===(e=this.observer)||void 0===e||e.unsubscribe(this),null===(t=this.view)||void 0===t||t.dispose(),this.view=void 0}linkToSwitch(e){e.cases.push(this)}observeCollection(e,t){const s=this.locator.getArrayObserver(t);return s.subscribe(this),s}accept(e){var t;return!0===this.$controller.accept(e)||(null===(t=this.view)||void 0===t?void 0:t.accept(e))}};oe([le],To.prototype,"value",void 0),oe([le({set:e=>{switch(e){case"true":return!0;case"false":return!1;default:return!!e}},mode:R.oneTime})],To.prototype,"fallThrough",void 0),To=oe([Bt("case"),ae(0,Xt),ae(1,q),ae(2,mi),ae(3,x)],To);let Ao=class extends To{linkToSwitch(e){if(void 0!==e.defaultCase)throw new Error("Multiple 'default-case's are not allowed.");e.defaultCase=this}};Ao=oe([Bt("default-case")],Ao);let $o=class{constructor(e,t,s,i){this.factory=e,this.location=t,this.platform=s,this.id=b("au$component"),this.preSettledTask=null,this.postSettledTask=null,this.logger=i.scopeTo("promise.resolve")}link(e,t,s,i,n,r){this.view=this.factory.create(e,this.$controller).setLocation(this.location)}attaching(e,t,s){const i=this.$controller;return C(this.view.activate(e,i,s,this.viewScope=V.fromParent(i.scope,{})),(()=>this.swap(e,s)))}valueChanged(e,t,s){this.$controller.isActive&&this.swap(null,s)}swap(e,t){var s,i;const n=this.value;if(!(n instanceof Promise))return void this.logger.warn(`The value '${String(n)}' is not a promise. No change will be done.`);const r=this.platform.domWriteQueue,o=this.fulfilled,a=this.rejected,l=this.pending,c=this.viewScope;let h;const u={reusable:!1},d=()=>{T(h=(this.preSettledTask=r.queueTask((()=>T(null==o?void 0:o.deactivate(e,t),null==a?void 0:a.deactivate(e,t),null==l?void 0:l.activate(e,t,c))),u)).result,n.then((s=>{if(this.value!==n)return;const i=()=>{this.postSettlePromise=(this.postSettledTask=r.queueTask((()=>T(null==l?void 0:l.deactivate(e,t),null==a?void 0:a.deactivate(e,t),null==o?void 0:o.activate(e,t,c,s))),u)).result};1===this.preSettledTask.status?h.then(i):(this.preSettledTask.cancel(),i())}),(s=>{if(this.value!==n)return;const i=()=>{this.postSettlePromise=(this.postSettledTask=r.queueTask((()=>T(null==l?void 0:l.deactivate(e,t),null==o?void 0:o.deactivate(e,t),null==a?void 0:a.activate(e,t,c,s))),u)).result};1===this.preSettledTask.status?h.then(i):(this.preSettledTask.cancel(),i())})))};1===(null===(s=this.postSettledTask)||void 0===s?void 0:s.status)?this.postSettlePromise.then(d):(null===(i=this.postSettledTask)||void 0===i||i.cancel(),d())}detaching(e,t,s){var i,n;return null===(i=this.preSettledTask)||void 0===i||i.cancel(),null===(n=this.postSettledTask)||void 0===n||n.cancel(),this.preSettledTask=this.postSettledTask=null,this.view.deactivate(e,this.$controller,s)}dispose(){var e;null===(e=this.view)||void 0===e||e.dispose(),this.view=void 0}};oe([le],$o.prototype,"value",void 0),$o=oe([Bt("promise"),ae(0,Xt),ae(1,mi),ae(2,Ie),ae(3,x)],$o);let Eo=class{constructor(e,t){this.factory=e,this.id=b("au$component"),this.view=this.factory.create().setLocation(t)}link(e,t,s,i,n,r){Po(s).pending=this}activate(e,t,s){const i=this.view;if(!i.isActive)return i.activate(i,this.$controller,t,s)}deactivate(e,t){const s=this.view;if(s.isActive)return s.deactivate(s,this.$controller,t)}detaching(e,t,s){return this.deactivate(e,s)}dispose(){var e;null===(e=this.view)||void 0===e||e.dispose(),this.view=void 0}};oe([le({mode:R.toView})],Eo.prototype,"value",void 0),Eo=oe([Bt("pending"),ae(0,Xt),ae(1,mi)],Eo);let So=class{constructor(e,t){this.factory=e,this.id=b("au$component"),this.view=this.factory.create().setLocation(t)}link(e,t,s,i,n,r){Po(s).fulfilled=this}activate(e,t,s,i){this.value=i;const n=this.view;if(!n.isActive)return n.activate(n,this.$controller,t,s)}deactivate(e,t){const s=this.view;if(s.isActive)return s.deactivate(s,this.$controller,t)}detaching(e,t,s){return this.deactivate(e,s)}dispose(){var e;null===(e=this.view)||void 0===e||e.dispose(),this.view=void 0}};oe([le({mode:R.toView})],So.prototype,"value",void 0),So=oe([Bt("then"),ae(0,Xt),ae(1,mi)],So);let Oo=class{constructor(e,t){this.factory=e,this.id=b("au$component"),this.view=this.factory.create().setLocation(t)}link(e,t,s,i,n,r){Po(s).rejected=this}activate(e,t,s,i){this.value=i;const n=this.view;if(!n.isActive)return n.activate(n,this.$controller,t,s)}deactivate(e,t){const s=this.view;if(s.isActive)return s.deactivate(s,this.$controller,t)}detaching(e,t,s){return this.deactivate(e,s)}dispose(){var e;null===(e=this.view)||void 0===e||e.dispose(),this.view=void 0}};function Po(e){const t=e.parent,s=null==t?void 0:t.viewModel;if(s instanceof $o)return s;throw new Error("The parent promise.resolve not found; only `*[promise.resolve] > *[pending|then|catch]` relation is supported.")}function Ro(e,t,s,i){if("string"==typeof t)return function(e,t,s,i){const n=[],r=[],o=[],a=e.document.createElement(t);let l=!1;s&&Object.keys(s).forEach((e=>{const t=s[e];Fi(t)?(l=!0,n.push(t)):a.setAttribute(e,t)}));l&&(a.className="au",r.push(n));i&&Bo(e,a,i,r,o);return new Mo(a,r,o)}(e,t,s,i);if(Ht.isType(t))return function(e,t,s,i){const n=Ht.getDefinition(t),r=[],o=[r],a=[],l=[],c=n.bindables,h=e.document.createElement(n.name);h.className="au",a.includes(t)||a.push(t);r.push(new _i(n,void 0,l,null,!1)),s&&Object.keys(s).forEach((e=>{const t=s[e];Fi(t)?l.push(t):l.push(void 0===c[e]?new sn(t,e):new Gi(t,e))}));i&&Bo(e,h,i,o,a);return new Mo(h,o,a)}(e,t,s,i);throw new Error("Invalid tagOrType.")}oe([le({mode:R.toView})],Oo.prototype,"value",void 0),Oo=oe([Bt("catch"),ae(0,Xt),ae(1,mi)],Oo);class Mo{constructor(e,t,s){this.node=e,this.instructions=t,this.dependencies=s,this.lazyDefinition=void 0,this.childFor=new WeakMap}get definition(){return void 0===this.lazyDefinition&&(this.lazyDefinition=Kt.create({name:Ht.generateName(),template:this.node,needsCompile:"string"==typeof this.node,instructions:this.instructions,dependencies:this.dependencies})),this.lazyDefinition}getContext(e){const t=this.childFor;let s=t.get(e);return null==s&&t.set(e,(s=e.createChild()).register(...this.dependencies)),cs(this.definition,s)}createView(e){return this.getViewFactory(e).create()}getViewFactory(e){return this.getContext(e).getViewFactory()}mergeInto(e,t,s){e.appendChild(this.node),t.push(...this.instructions),s.push(...this.dependencies)}}function Bo(e,t,s,i,n){for(let r=0,o=s.length;r<o;++r){const o=s[r];switch(typeof o){case"string":t.appendChild(e.document.createTextNode(o));break;case"object":o instanceof e.Node?t.appendChild(o):"mergeInto"in o&&o.mergeInto(t,i,n)}}}function Lo(e,t){const s=t.to;return void 0!==s&&"subject"!==s&&"composing"!==s&&(e[s]=t),e}let jo=class{constructor(e,t,s){this.p=e,this.hdrContext=s,this.id=b("au$component"),this.component=void 0,this.composing=!1,this.view=void 0,this.lastSubject=void 0,this.properties=t.instructions.reduce(Lo,{})}attaching(e,t,s){const{component:i,view:n}=this;return void 0===n||this.lastSubject!==i?(this.lastSubject=i,this.composing=!0,this.compose(void 0,i,e,s)):this.compose(n,i,e,s)}detaching(e,t,s){return this.deactivate(this.view,e,s)}componentChanged(e,t,s){const{$controller:i}=this;if(!i.isActive)return;if(this.lastSubject===e)return;this.lastSubject=e,this.composing=!0;const n=C(this.deactivate(this.view,null,s|=i.flags),(()=>this.compose(void 0,e,null,s)));n instanceof Promise&&n.catch((e=>{throw e}))}compose(e,t,s,i){return C(void 0===e?C(t,(e=>this.resolveView(e,i))):e,(e=>this.activate(this.view=e,s,i)))}deactivate(e,t,s){return null==e?void 0:e.deactivate(null!=t?t:e,this.$controller,s)}activate(e,t,s){const{$controller:i}=this;return C(null==e?void 0:e.activate(null!=t?t:e,i,s,i.scope),(()=>{this.composing=!1}))}resolveView(e,t){const s=this.provideViewFor(e,t);if(s)return s.setLocation(this.$controller.location),s.lockScope(this.$controller.scope),s}provideViewFor(e,t){if(!e)return;const s=this.hdrContext.controller.container;if("object"==typeof e){if("lockScope"in e)return e;if("createView"in e)return e.createView(s);if("create"in e)return e.create(t);if("template"in e){return cs(Kt.getOrCreate(e),s).getViewFactory().create(t)}}if("string"==typeof e){const t=s.find(Ht,e);if(null==t)throw new Error(`Unable to find custom element ${e} for <au-render>.`);e=t.Type}return Ro(this.p,e,this.properties,this.$controller.host.childNodes).createView(s)}dispose(){var e;null===(e=this.view)||void 0===e||e.dispose(),this.view=void 0}accept(e){var t;if(!0===(null===(t=this.view)||void 0===t?void 0:t.accept(e)))return!0}};oe([le],jo.prototype,"component",void 0),oe([le({mode:R.fromView})],jo.prototype,"composing",void 0),jo=oe([Dt({name:"au-render",template:null,containerless:!0}),ae(0,Ie),ae(1,Di),ae(2,ri)],jo);let Vo=class{constructor(e,t,s,i,n,r){this.container=e,this.parent=t,this.host=s,this.p=i,this.instruction=n,this.contextFactory=r,this.scopeBehavior="auto",this.task=null,this.c=void 0,this.loc=n.containerless?ki(this.host):void 0}static get inject(){return[m,ni,fi,Ie,Di,P(No)]}get composition(){return this.c}attaching(e,t,s){return this.queue(new qo(this.view,this.viewModel,this.model,e,void 0))}detaching(e){var t;null===(t=this.task)||void 0===t||t.cancel(),this.task=null;const s=this.c;if(null!=s)return this.c=void 0,s.deactivate(e)}propertyChanged(e){const t=this.task;this.task=this.p.domWriteQueue.queueTask((()=>C(this.queue(new qo(this.view,this.viewModel,this.model,void 0,e)),(()=>{this.task=null})))),null==t||t.cancel()}queue(e){const t=this.contextFactory,s=this.c;return"model"===e.src&&null!=s?s.update(e.model):C(t.create(e),(i=>{if(t.isCurrent(i))return C(this.compose(i),(n=>{if(t.isCurrent(i))return C(n.activate(),(()=>t.isCurrent(i)?(this.c=n,null==s?void 0:s.deactivate(e.initiator)):C(n.controller.deactivate(n.controller,this.$controller,4),(()=>n.controller.dispose()))));n.controller.dispose()}))}))}compose(e){let t,s,i;const{view:n,viewModel:r,model:o,initiator:a}=e.change,{container:l,host:c,$controller:h,contextFactory:u,loc:d}=this,p=this.getDef(r),g=l.createChild(),f=null==d?c.parentNode:d.parentNode;if(null!==p){if(p.containerless)throw new Error("Containerless custom element is not supported by <au-compose/>");null==d?(s=c,i=()=>{}):(s=f.insertBefore(this.p.document.createElement(p.name),d),i=()=>{s.remove()}),t=this.getVm(g,r,s)}else s=null==d?c:d,t=this.getVm(g,r,s);const v=()=>{if(null!==p){const n=Ws.forCustomElement(null,l,g,t,s,null,0,!0,p);return new zo(n,(()=>n.activate(null!=a?a:n,h,2)),(e=>C(n.deactivate(null!=e?e:n,h,4),i)),(e=>{var s;return null===(s=t.activate)||void 0===s?void 0:s.call(t,e)}),e)}{const i=cs(Kt.create({name:Ht.generateName(),template:n}),g),r=i.getViewFactory(),o=Ws.forSyntheticView(u.isFirst(e)?h.root:null,i,r,2,h),l="auto"===this.scopeBehavior?V.fromParent(this.parent.scope,t):V.create(t);return Ci(s)?o.setLocation(s):o.setHost(s),new zo(o,(()=>o.activate(null!=a?a:o,h,2,l)),(e=>o.deactivate(null!=e?e:o,h,4)),(e=>{var s;return null===(s=t.activate)||void 0===s?void 0:s.call(t,e)}),e)}};return"activate"in t?C(t.activate(o),(()=>v())):v()}getVm(e,t,s){if(null==t)return new Io;if("object"==typeof t)return t;const i=this.p,n=Ci(s),r=new y("ElementResolver",n?null:s);e.registerResolver(fi,r),e.registerResolver(i.Node,r),e.registerResolver(i.Element,r),e.registerResolver(i.HTMLElement,r),e.registerResolver(mi,new y("IRenderLocation",n?s:null));const o=e.invoke(t);return e.registerResolver(t,new y("au-compose.viewModel",o)),o}getDef(e){const t="function"==typeof e?e:null==e?void 0:e.constructor;return Ht.isType(t)?Ht.getDefinition(t):null}};oe([le],Vo.prototype,"view",void 0),oe([le],Vo.prototype,"viewModel",void 0),oe([le],Vo.prototype,"model",void 0),oe([le({set:e=>{if("scoped"===e||"auto"===e)return e;throw new Error('Invalid scope behavior config. Only "scoped" or "auto" allowed.')}})],Vo.prototype,"scopeBehavior",void 0),Vo=oe([Dt("au-compose")],Vo);class Io{}class No{constructor(){this.id=0}isFirst(e){return 0===e.id}isCurrent(e){return e.id===this.id-1}create(e){return C(e.load(),(e=>new Fo(this.id++,e)))}}class qo{constructor(e,t,s,i,n){this.view=e,this.viewModel=t,this.model=s,this.initiator=i,this.src=n}load(){return this.view instanceof Promise||this.viewModel instanceof Promise?Promise.all([this.view,this.viewModel]).then((([e,t])=>new Do(e,t,this.model,this.initiator,this.src))):new Do(this.view,this.viewModel,this.model,this.initiator,this.src)}}class Do{constructor(e,t,s,i,n){this.view=e,this.viewModel=t,this.model=s,this.initiator=i,this.src=n}}class Fo{constructor(e,t){this.id=e,this.change=t}}class zo{constructor(e,t,s,i,n){this.controller=e,this.start=t,this.stop=s,this.update=i,this.context=n,this.state=0}activate(){if(0!==this.state)throw new Error(`Composition has already been activated/deactivated. Id: ${this.controller.id}`);return this.state=1,this.start()}deactivate(e){switch(this.state){case 1:return this.state=-1,this.stop(e);case-1:throw new Error("Composition has already been deactivated.");default:this.state=-1}}}class Uo{constructor(e,t,s){var i,n;let r;this.hdrContext=s,this.parentScope=null,this.outerScope=null;const o=t.auSlot,a=null===(n=null===(i=s.instruction)||void 0===i?void 0:i.projections)||void 0===n?void 0:n[o.name];null==a?(r=cs(o.fallback,s.controller.container).getViewFactory(),this.hasProjection=!1):(r=cs(a,s.parent.controller.container).getViewFactory(),this.hasProjection=!0),this.view=r.create().setLocation(e)}static get inject(){return[mi,Di,ri]}binding(e,t,s){var i;let n,r;this.parentScope=this.$controller.scope.parentScope,this.hasProjection&&(n=this.hdrContext.controller.scope.parentScope,r=this.outerScope=V.create(n.bindingContext,ne.create(n.bindingContext),!1),r.parentScope=n,r.overrideContext.$host=null!==(i=this.expose)&&void 0!==i?i:this.parentScope.bindingContext)}attaching(e,t,s){return this.view.activate(e,this.$controller,s,this.hasProjection?this.outerScope:this.parentScope)}detaching(e,t,s){return this.view.deactivate(e,this.$controller,s)}exposeChanged(e){this.hasProjection&&null!=this.outerScope&&(this.outerScope.overrideContext.$host=e)}dispose(){this.view.dispose(),this.view=void 0}accept(e){var t;if(!0===(null===(t=this.view)||void 0===t?void 0:t.accept(e)))return!0}}oe([le],Uo.prototype,"expose",void 0),Dt({name:"au-slot",template:null,containerless:!0})(Uo);const Ko=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,Wo=l.createInterface("ISanitizer",(e=>e.singleton(class{sanitize(e){return e.replace(Ko,"")}})));let Ho=class{constructor(e){this.sanitizer=e}toView(e){return null==e?null:this.sanitizer.sanitize(e)}};Ho=oe([ae(0,Wo)],Ho),re("sanitize")(Ho);let Go=class{constructor(e){this.viewLocator=e}toView(e,t){return this.viewLocator.getViewComponentForObject(e,t)}};Go=oe([ae(0,is)],Go),re("view")(Go);const _o=Rr,Qo=Er,Xo=Sr,Yo=Or,Zo=Mr,Jo=Br,ea=Pr,ta=nr,sa=no,ia=[ta,sa],na=Fe,ra=Be,oa=Me,aa=Re,la=Pe,ca=[aa,la],ha=[ra,oa],ua=Wn,da=Kn,pa=Hn,ga=zn,fa=Dn,va=Fn,ma=Un,ba=Jn,ya=Gn,wa=_n,xa=Qn,ka=Xn,Ca=Zn,Ta=Yn,Aa=[da,fa,ga,va,ma,ua,pa,ba,ya,wa,xa,Ca,Ta,ka],$a=Ho,Ea=Go,Sa=go,Oa=fo,Pa=mo,Ra=ko,Ma=Vr,Ba=Nr,La=oo,ja=jo,Va=[_o,Qo,Xo,Yo,Zo,Jo,ea,$a,Ea,uo,po,Sa,Oa,Pa,Ra,Co,To,Ao,$o,Eo,So,Oo,Ma,Ba,La,ja,Vo,co,ao,lo,Uo],Ia=mn,Na=gn,qa=pn,Da=yn,Fa=xn,za=vn,Ua=wn,Ka=bn,Wa=dn,Ha=fn,Ga=$n,_a=Rn,Qa=En,Xa=Sn,Ya=On,Za=Pn,Ja=An,el=[Ua,Fa,Ia,Ka,Da,Wa,qa,Na,Ha,za,Ga,_a,Qa,Xa,Ya,Za,Ja],tl={register:e=>e.register(...ia,...Va,...ca,...Aa,...el),createContainer(){return this.register(l.createContainer())}},sl=l.createInterface("IAurelia");class il{constructor(e=l.createContainer()){if(this.container=e,this._isRunning=!1,this._isStarting=!1,this._isStopping=!1,this._root=void 0,this.next=void 0,this.startPromise=void 0,this.stopPromise=void 0,e.has(sl,!0))throw new Error("An instance of Aurelia is already registered with the container or an ancestor of it.");e.register(h.instance(sl,this)),e.registerResolver(li,this.rootProvider=new y("IAppRoot"))}get isRunning(){return this._isRunning}get isStarting(){return this._isStarting}get isStopping(){return this._isStopping}get root(){if(null==this._root){if(null==this.next)throw new Error("root is not defined");return this.next}return this._root}register(...e){return this.container.register(...e),this}app(e){return this.next=new ui(e,this.initPlatform(e.host),this.container,this.rootProvider,!1),this}enhance(e){return this.next=new ui(e,this.initPlatform(e.host),this.container,this.rootProvider,!0),this}async waitForIdle(){const e=this.root.platform;await e.domWriteQueue.yield(),await e.domReadQueue.yield(),await e.taskQueue.yield()}initPlatform(t){let s;if(this.container.has(Ie,!1))s=this.container.get(Ie);else{if(null===t.ownerDocument.defaultView)throw new Error("Failed to initialize the platform object. The host element's ownerDocument does not have a defaultView");s=new e(t.ownerDocument.defaultView),this.container.register(h.instance(Ie,s))}return s}start(e=this.next){if(null==e)throw new Error("There is no composition root");return this.startPromise instanceof Promise?this.startPromise:this.startPromise=C(this.stop(),(()=>(Reflect.set(e.host,"$aurelia",this),this.rootProvider.prepare(this._root=e),this._isStarting=!0,C(e.activate(),(()=>{this._isRunning=!0,this._isStarting=!1,this.startPromise=void 0,this.dispatchEvent(e,"au-started",e.host)})))))}stop(e=!1){if(this.stopPromise instanceof Promise)return this.stopPromise;if(!0===this._isRunning){const t=this._root;return this._isRunning=!1,this._isStopping=!0,this.stopPromise=C(t.deactivate(),(()=>{Reflect.deleteProperty(t.host,"$aurelia"),e&&t.dispose(),this._root=void 0,this.rootProvider.dispose(),this._isStopping=!1,this.dispatchEvent(t,"au-stopped",t.host)}))}}dispose(){if(this._isRunning||this._isStopping)throw new Error("The aurelia instance must be fully stopped before it can be disposed");this.container.dispose()}dispatchEvent(e,t,s){const i=new e.platform.window.CustomEvent(t,{detail:this,bubbles:!0,cancelable:!0});s.dispatchEvent(i)}}const nl=l.createInterface("IDialogService"),rl=l.createInterface("IDialogController"),ol=l.createInterface("IDialogDomRenderer"),al=l.createInterface("IDialogDom"),ll=l.createInterface("IDialogGlobalSettings");class cl{constructor(e,t){this.wasCancelled=e,this.dialog=t}static create(e,t){return new cl(e,t)}}class hl{constructor(e,t){this.status=e,this.value=t}static create(e,t){return new hl(e,t)}}var ul;!function(e){e.Ok="ok",e.Error="error",e.Cancel="cancel",e.Abort="abort"}(ul||(ul={}));class dl{constructor(e,t){this.p=e,this.ctn=t,this.closed=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}static get inject(){return[Ie,m]}activate(e){var t;const s=this.ctn.createChild(),{model:i,template:n,rejectOnCancel:r}=e,o=s.get(ol),a=null!==(t=e.host)&&void 0!==t?t:this.p.document.body,l=this.dom=o.render(a,e),c=s.has(vi,!0)?s.get(vi):null,u=l.contentHost;return this.settings=e,null!=c&&c.contains(a)||s.register(h.instance(vi,a)),s.register(h.instance(fi,u),h.instance(al,l)),new Promise((t=>{var n,r;const o=Object.assign(this.cmp=this.getOrCreateVm(s,e,u),{$dialog:this});t(null===(r=null===(n=o.canActivate)||void 0===n?void 0:n.call(o,i))||void 0===r||r)})).then((t=>{var o;if(!0!==t){if(l.dispose(),r)throw gl(null,"Dialog activation rejected");return cl.create(!0,this)}const a=this.cmp;return C(null===(o=a.activate)||void 0===o?void 0:o.call(a,i),(()=>{var t;const i=this.controller=Ws.forCustomElement(null,s,s,a,u,null,0,!0,Kt.create(null!==(t=this.getDefinition(a))&&void 0!==t?t:{name:Ht.generateName(),template:n}));return C(i.activate(i,null,2),(()=>{var t;return l.overlay.addEventListener(null!==(t=e.mouseEvent)&&void 0!==t?t:"click",this),cl.create(!1,this)}))}))}),(e=>{throw l.dispose(),e}))}deactivate(e,t){if(this.closingPromise)return this.closingPromise;let s=!0;const{controller:i,dom:n,cmp:r,settings:{mouseEvent:o,rejectOnCancel:a}}=this,l=hl.create(e,t),c=new Promise((c=>{var h,u;c(C(null===(u=null===(h=r.canDeactivate)||void 0===h?void 0:h.call(r,l))||void 0===u||u,(c=>{var h;if(!0!==c){if(s=!1,this.closingPromise=void 0,a)throw gl(null,"Dialog cancellation rejected");return hl.create("abort")}return C(null===(h=r.deactivate)||void 0===h?void 0:h.call(r,l),(()=>C(i.deactivate(i,null,4),(()=>(n.dispose(),n.overlay.removeEventListener(null!=o?o:"click",this),a||"error"===e?this.reject(gl(t,"Dialog cancelled with a rejection on cancel")):this.resolve(l),l)))))})))})).catch((e=>{throw this.closingPromise=void 0,e}));return this.closingPromise=s?c:void 0,c}ok(e){return this.deactivate("ok",e)}cancel(e){return this.deactivate("cancel",e)}error(e){const t=function(e){const t=new Error;return t.wasCancelled=!1,t.value=e,t}(e);return new Promise((e=>{var s,i;return e(C(null===(i=(s=this.cmp).deactivate)||void 0===i?void 0:i.call(s,hl.create("error",t)),(()=>C(this.controller.deactivate(this.controller,null,4),(()=>{this.dom.dispose(),this.reject(t)})))))}))}handleEvent(e){this.settings.overlayDismiss&&!this.dom.contentHost.contains(e.target)&&this.cancel()}getOrCreateVm(e,t,s){const i=t.component;if(null==i)return new pl;if("object"==typeof i)return i;const n=this.p,r=new y("ElementResolver",s);return e.registerResolver(fi,r),e.registerResolver(n.Node,r),e.registerResolver(n.Element,r),e.registerResolver(n.HTMLElement,r),e.invoke(i)}getDefinition(e){const t="function"==typeof e?e:null==e?void 0:e.constructor;return Ht.isType(t)?Ht.getDefinition(t):null}}class pl{}function gl(e,t){const s=new Error(t);return s.wasCancelled=!0,s.value=e,s}class fl{constructor(e,t,s){this.container=e,this.p=t,this.defaultSettings=s,this.dlgs=[]}get controllers(){return this.dlgs.slice(0)}get top(){const e=this.dlgs;return e.length>0?e[e.length-1]:null}static get inject(){return[m,Ie,ll]}static register(e){e.register(h.singleton(nl,this),wt.beforeDeactivate(nl,(e=>C(e.closeAll(),(e=>{if(e.length>0)throw new Error(`There are still ${e.length} open dialog(s).`)})))))}open(e){return(t=new Promise((t=>{var s;const i=vl.from(this.defaultSettings,e),n=null!==(s=i.container)&&void 0!==s?s:this.container.createChild();t(C(i.load(),(e=>{const t=n.invoke(dl);return n.register(h.instance(rl,t)),n.register(h.callback(dl,(()=>{throw new Error("Invalid injection of DialogController. Use IDialogController instead.")}))),C(t.activate(e),(e=>{if(!e.wasCancelled){1===this.dlgs.push(t)&&this.p.window.addEventListener("keydown",this);const e=()=>this.remove(t);t.closed.then(e,e)}return e}))})))}))).whenClosed=ml,t;var t}closeAll(){return Promise.all(Array.from(this.dlgs).map((e=>e.settings.rejectOnCancel?e.cancel().then((()=>null)):e.cancel().then((t=>"cancel"===t.status?null:e))))).then((e=>e.filter((e=>!!e))))}remove(e){const t=this.dlgs,s=t.indexOf(e);s>-1&&this.dlgs.splice(s,1),0===t.length&&this.p.window.removeEventListener("keydown",this)}handleEvent(e){const t=function(e){if("Escape"===(e.code||e.key)||27===e.keyCode)return"Escape";if("Enter"===(e.code||e.key)||13===e.keyCode)return"Enter";return}(e);if(null==t)return;const s=this.top;if(null===s||0===s.settings.keyboard.length)return;const i=s.settings.keyboard;"Escape"===t&&i.includes(t)?s.cancel():"Enter"===t&&i.includes(t)&&s.ok()}}class vl{static from(...e){return Object.assign(new vl,...e).validate().normalize()}load(){const e=this,t=this.component,s=this.template,i=T(null==t?void 0:C(t(),(t=>{e.component=t})),"function"==typeof s?C(s(),(t=>{e.template=t})):void 0);return i instanceof Promise?i.then((()=>e)):e}validate(){if(null==this.component&&null==this.template)throw new Error('Invalid Dialog Settings. You must provide "component", "template" or both.');return this}normalize(){return null==this.keyboard&&(this.keyboard=this.lock?[]:["Enter","Escape"]),"boolean"!=typeof this.overlayDismiss&&(this.overlayDismiss=!this.lock),this}}function ml(e,t){return this.then((s=>s.dialog.closed.then(e,t)),t)}class bl{constructor(){this.lock=!0,this.startingZIndex=1e3,this.rejectOnCancel=!1}static register(e){h.singleton(ll,this).register(e)}}const yl="position:absolute;width:100%;height:100%;top:0;left:0;";class wl{constructor(e){this.p=e,this.wrapperCss=`${yl} display:flex;`,this.overlayCss=yl,this.hostCss="position:relative;margin:auto;"}static register(e){h.singleton(ol,this).register(e)}render(e){const t=this.p.document,s=(e,s)=>{const i=t.createElement(e);return i.style.cssText=s,i},i=e.appendChild(s("au-dialog-container",this.wrapperCss)),n=i.appendChild(s("au-dialog-overlay",this.overlayCss)),r=i.appendChild(s("div",this.hostCss));return new xl(i,n,r)}}wl.inject=[Ie];class xl{constructor(e,t,s){this.wrapper=e,this.overlay=t,this.contentHost=s}dispose(){this.wrapper.remove()}}function kl(e,t){return{settingsProvider:e,register:s=>s.register(...t,wt.beforeCreate((()=>e(s.get(ll))))),customize:(e,s)=>kl(e,null!=s?s:t)}}const Cl=kl((()=>{throw new Error("Invalid dialog configuration. Specify the implementations for <IDialogService>, <IDialogGlobalSettings> and <IDialogDomRenderer>, or use the DialogDefaultConfiguration export.")}),[class{static register(e){e.register(h.singleton(ll,this))}}]),Tl=kl(o,[fl,bl,wl]);export{$s as AdoptedStyleSheetsStyles,ui as AppRoot,wt as AppTask,Be as AtPrefixedTriggerAttributePattern,ra as AtPrefixedTriggerAttributePatternRegistration,Vr as AttrBindingBehavior,Ma as AttrBindingBehaviorRegistration,Xn as AttrBindingCommand,ka as AttrBindingCommandRegistration,Ce as AttrSyntax,nt as AttributeBinding,on as AttributeBindingInstruction,_a as AttributeBindingRendererRegistration,Dr as AttributeNSAccessor,Oe as AttributePattern,Vo as AuCompose,jo as AuRender,ja as AuRenderRegistration,Uo as AuSlot,Ni as AuSlotsInfo,il as Aurelia,he as Bindable,ue as BindableDefinition,de as BindableObserver,gr as BindablesInfo,qn as BindingCommand,Nn as BindingCommandDefinition,$r as BindingModeBehavior,bs as CSSModulesProcessorRegistry,We as CallBinding,Wn as CallBindingCommand,ua as CallBindingCommandRegistration,Wi as CallBindingInstruction,Ia as CallBindingRendererRegistration,Qn as CaptureBindingCommand,xa as CaptureBindingCommandRegistration,To as Case,zr as CheckedObserver,Tt as Children,$t as ChildrenDefinition,Et as ChildrenObserver,gs as ClassAttributeAccessor,Zn as ClassBindingCommand,Ca as ClassBindingCommandRegistration,Me as ColonPrefixedBindAttributePattern,oa as ColonPrefixedBindAttributePatternRegistration,Bs as ComputedWatcher,Ws as Controller,jt as CustomAttribute,Lt as CustomAttributeDefinition,Na as CustomAttributeRendererRegistration,Ht as CustomElement,Kt as CustomElementDefinition,qa as CustomElementRendererRegistration,Lr as DataAttributeAccessor,Rr as DebounceBindingBehavior,_o as DebounceBindingBehaviorRegistration,Kn as DefaultBindingCommand,da as DefaultBindingCommandRegistration,Aa as DefaultBindingLanguage,ca as DefaultBindingSyntax,Ao as DefaultCase,ia as DefaultComponents,xl as DefaultDialogDom,wl as DefaultDialogDomRenderer,bl as DefaultDialogGlobalSettings,el as DefaultRenderers,Va as DefaultResources,_n as DelegateBindingCommand,wa as DelegateBindingCommandRegistration,hl as DialogCloseResult,Cl as DialogConfiguration,dl as DialogController,ul as DialogDeactivationStatuses,Tl as DialogDefaultConfiguration,cl as DialogOpenResult,fl as DialogService,Pe as DotSeparatedAttributePattern,la as DotSeparatedAttributePatternRegistration,fo as Else,Oa as ElseRegistration,ji as EventDelegator,Bi as EventSubscriber,Ls as ExpressionWatcher,ao as Focus,Hn as ForBindingCommand,pa as ForBindingCommandRegistration,Ti as FragmentNodeSequence,uo as FrequentMutations,Or as FromViewBindingBehavior,Yo as FromViewBindingBehaviorRegistration,zn as FromViewBindingCommand,ga as FromViewBindingCommandRegistration,So as FulfilledTemplateController,Qi as HydrateAttributeInstruction,_i as HydrateElementInstruction,Yi as HydrateLetElementInstruction,Xi as HydrateTemplateController,li as IAppRoot,bt as IAppTask,ze as IAttrMapper,Ae as IAttributeParser,Te as IAttributePattern,Ii as IAuSlotsInfo,sl as IAurelia,ni as IController,rl as IDialogController,al as IDialogDom,ol as IDialogDomRenderer,ll as IDialogGlobalSettings,nl as IDialogService,Li as IEventDelegator,vi as IEventTarget,Ei as IHistory,ri as IHydrationContext,Di as IInstruction,js as ILifecycleHooks,$i as ILocation,fi as INode,sa as INodeObserverLocatorRegistration,Ie as IPlatform,Vi as IProjections,mi as IRenderLocation,ln as IRenderer,Ne as ISVGAnalyzer,Wo as ISanitizer,As as IShadowDOMGlobalStyles,ws as IShadowDOMStyleFactory,Ts as IShadowDOMStyles,xe as ISyntaxInterpreter,an as ITemplateCompiler,wr as ITemplateCompilerHooks,ta as ITemplateCompilerRegistration,er as ITemplateElementFactory,Xt as IViewFactory,is as IViewLocator,Ai as IWindow,ci as IWorkTracker,go as If,Sa as IfRegistration,qi as InstructionType,at as InterpolationBinding,Da as InterpolationBindingRendererRegistration,zi as InterpolationInstruction,fe as Interpretation,Ki as IteratorBindingInstruction,Fa as IteratorBindingRendererRegistration,ht as LetBinding,Zi as LetBindingInstruction,za as LetElementRendererRegistration,qs as LifecycleHooks,Is as LifecycleHooksDefinition,Vs as LifecycleHooksEntry,Oi as Listener,en as ListenerBindingInstruction,Ga as ListenerBindingRendererRegistration,io as NodeObserverConfig,no as NodeObserverLocator,bi as NodeType,qe as NoopSVGAnalyzer,po as ObserveShallow,Er as OneTimeBindingBehavior,Qo as OneTimeBindingBehaviorRegistration,Dn as OneTimeBindingCommand,fa as OneTimeBindingCommandRegistration,Eo as PendingTemplateController,co as Portal,$o as PromiseTemplateController,vt as PropertyBinding,Ui as PropertyBindingInstruction,Ua as PropertyBindingRendererRegistration,Re as RefAttributePattern,aa as RefAttributePatternRegistration,mt as RefBinding,ba as RefBindingCommandRegistration,Hi as RefBindingInstruction,Ka as RefBindingRendererRegistration,Oo as RejectedTemplateController,Mo as RenderPlan,mo as Repeat,Pa as RepeatRegistration,Fe as SVGAnalyzer,na as SVGAnalyzerRegistration,Ho as SanitizeValueConverter,$a as SanitizeValueConverterRegistration,Gr as SelectValueObserver,Nr as SelfBindingBehavior,Ba as SelfBindingBehaviorRegistration,sn as SetAttributeInstruction,Qa as SetAttributeRendererRegistration,nn as SetClassAttributeInstruction,Xa as SetClassAttributeRendererRegistration,Gi as SetPropertyInstruction,Wa as SetPropertyRendererRegistration,rn as SetStyleAttributeInstruction,Ya as SetStyleAttributeRendererRegistration,xs as ShadowDOMRegistry,ha as ShortHandBindingSyntax,Mr as SignalBindingBehavior,Zo as SignalBindingBehaviorRegistration,tl as StandardConfiguration,Qr as StyleAttributeAccessor,Yn as StyleBindingCommand,Ta as StyleBindingCommandRegistration,Ss as StyleConfiguration,Es as StyleElementStyles,tn as StylePropertyBindingInstruction,Za as StylePropertyBindingRendererRegistration,Co as Switch,nr as TemplateCompiler,Cr as TemplateCompilerHooks,Ha as TemplateControllerRendererRegistration,Ji as TextBindingInstruction,Ja as TextBindingRendererRegistration,Br as ThrottleBindingBehavior,Jo as ThrottleBindingBehaviorRegistration,Sr as ToViewBindingBehavior,Xo as ToViewBindingBehaviorRegistration,Fn as ToViewBindingCommand,va as ToViewBindingCommandRegistration,Gn as TriggerBindingCommand,ya as TriggerBindingCommandRegistration,Pr as TwoWayBindingBehavior,ea as TwoWayBindingBehaviorRegistration,Un as TwoWayBindingCommand,ma as TwoWayBindingCommandRegistration,oo as UpdateTriggerBindingBehavior,La as UpdateTriggerBindingBehaviorRegistration,Xr as ValueAttributeObserver,Yt as ViewFactory,ns as ViewLocator,ti as ViewModelKind,Go as ViewValueConverter,Ea as ViewValueConverterRegistration,ts as Views,qt as Watch,ko as With,Ra as WithRegistration,ir as allResources,Ee as attributePattern,le as bindable,In as bindingCommand,kt as children,zt as containerless,ki as convertToRenderLocation,Ro as createElement,ms as cssModules,Mt as customAttribute,Dt as customElement,wi as getEffectiveParentNode,pi as getRef,cs as getRenderContext,Ys as isCustomElementController,Zs as isCustomElementViewModel,Fi as isInstruction,as as isRenderContext,Ci as isRenderLocation,Fs as lifecycleHooks,_t as processContent,cn as renderer,xi as setEffectiveParentNode,gi as setRef,ys as shadowCSS,Ar as templateCompilerHooks,Bt as templateController,Ft as useShadowDOM,ss as view,Vt as watch};
