export{Platform,Task,TaskAbortError,TaskQueue,TaskQueuePriority,TaskStatus}from"@aurelia/platform";import{BrowserPlatform as e}from"@aurelia/platform-browser";export{BrowserPlatform}from"@aurelia/platform-browser";import{Protocol as t,getPrototypeChain as s,Metadata as i,firstDefined as n,kebabCase as r,noop as o,emptyArray as a,DI as l,all as h,Registration as c,IPlatform as u,mergeArrays as d,fromDefinitionOrDefault as p,pascalCase as g,fromAnnotationOrTypeOrDefault as f,fromAnnotationOrDefinitionOrTypeOrDefault as v,IContainer as m,nextId as b,InstanceProvider as y,optional as w,ILogger as x,isObject as k,onResolve as C,resolveAll as $,camelCase as S,toArray as T,emptyObject as A,IServiceLocator as E,compareNumber as O,transient as P}from"@aurelia/kernel";import{BindingMode as R,subscriberCollection as M,withFlushQueue as B,connectable as L,registerAliases as j,Scope as V,ConnectableSwitcher as I,ProxyObservable as N,IObserverLocator as q,IExpressionParser as D,AccessScopeExpression as F,DelegationStrategy as z,BindingBehaviorExpression as U,BindingBehaviorFactory as K,PrimitiveLiteralExpression as W,bindingBehavior as H,BindingInterceptor as G,ISignaler as _,PropertyAccessor as Q,INodeObserverLocator as X,SetterObserver as Y,IDirtyChecker as Z,alias as J,applyMutationsToIndices as ee,getCollectionObserver as te,BindingContext as se,synchronizeIndices as ie,valueConverter as ne}from"@aurelia/runtime";export{Access,AccessKeyedExpression,AccessMemberExpression,AccessScopeExpression,AccessThisExpression,AccessorType,ArrayBindingPattern,ArrayIndexObserver,ArrayLiteralExpression,ArrayObserver,AssignExpression,BinaryExpression,BindingBehavior,BindingBehaviorDefinition,BindingBehaviorExpression,BindingBehaviorFactory,BindingBehaviorStrategy,BindingContext,BindingIdentifier,BindingInterceptor,BindingMediator,BindingMode,BindingType,CallFunctionExpression,CallMemberExpression,CallScopeExpression,Char,CollectionKind,CollectionLengthObserver,CollectionSizeObserver,ComputedObserver,ConditionalExpression,CustomExpression,DelegationStrategy,DirtyCheckProperty,DirtyCheckSettings,ExpressionKind,ForOfStatement,HtmlLiteralExpression,IDirtyChecker,IExpressionParser,INodeObserverLocator,IObserverLocator,ISignaler,Interpolation,LifecycleFlags,MapObserver,ObjectBindingPattern,ObjectLiteralExpression,ObserverLocator,OverrideContext,ParserState,Precedence,PrimitiveLiteralExpression,PrimitiveObserver,PropertyAccessor,Scope,SetObserver,SetterObserver,TaggedTemplateExpression,TemplateExpression,UnaryExpression,ValueConverter,ValueConverterDefinition,ValueConverterExpression,alias,applyMutationsToIndices,bindingBehavior,cloneIndexMap,connectable,copyIndexMap,createIndexMap,disableArrayObservation,disableMapObservation,disableSetObservation,enableArrayObservation,enableMapObservation,enableSetObservation,getCollectionObserver,isIndexMap,observable,parse,parseExpression,registerAliases,subscriberCollection,synchronizeIndices,valueConverter}from"@aurelia/runtime";
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function re(e,t,s,i){var n,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,s,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(r<3?n(o):r>3?n(t,s,o):n(t,s))||o);return r>3&&o&&Object.defineProperty(t,s,o),o}function oe(e,t){return function(s,i){t(s,i,e)}}function ae(e,s){let n;function r(e,s){arguments.length>1&&(n.property=s),i.define(he.name,ce.create(s,n),e.constructor,s),t.annotation.appendTo(e.constructor,he.keyFrom(s))}return arguments.length>1?(n={},void r(e,s)):"string"==typeof e?(n={},r):(n=void 0===e?{}:e,r)}function le(e){return e.startsWith(he.name)}const he={name:t.annotation.keyFor("bindable"),keyFrom:e=>`${he.name}:${e}`,from(...e){const t={},s=Array.isArray;function i(e){t[e]=ce.create(e)}return e.forEach((function(e){s(e)?e.forEach(i):e instanceof ce?t[e.property]=e:void 0!==e&&Object.keys(e).forEach((s=>function(e,s){t[e]=s instanceof ce?s:ce.create(e,s)}(s,e[s])))})),t},for(e){let s;const n={add(r){let o,a;return"string"==typeof r?(o=r,a={property:o}):(o=r.property,a=r),s=ce.create(o,a),i.hasOwn(he.name,e,o)||t.annotation.appendTo(e,he.keyFrom(o)),i.define(he.name,s,e,o),n},mode:e=>(s.mode=e,n),callback:e=>(s.callback=e,n),attribute:e=>(s.attribute=e,n),primary:()=>(s.primary=!0,n),set:e=>(s.set=e,n)};return n},getAll(e){const n=he.name.length+1,r=[],o=s(e);let a,l,h,c=o.length,u=0;for(;--c>=0;){h=o[c],a=t.annotation.getKeys(h).filter(le),l=a.length;for(let e=0;e<l;++e)r[u++]=i.getOwn(he.name,h,a[e].slice(n))}return r}};class ce{constructor(e,t,s,i,n,r){this.attribute=e,this.callback=t,this.mode=s,this.primary=i,this.property=n,this.set=r}static create(e,t={}){return new ce(n(t.attribute,r(e)),n(t.callback,`${e}Changed`),n(t.mode,R.toView),n(t.primary,!1),n(t.property,e),n(t.set,o))}}class ue{constructor(e,t,s,i,n){this.obj=e,this.propertyKey=t,this.set=i,this.$controller=n,this.value=void 0,this.oldValue=void 0,this.f=0;const r=e[s],a=e.propertyChanged,l=this.hasCb="function"==typeof r,h=this.hasCbAll="function"==typeof a,c=this.hasSetter=i!==o;if(this.cb=l?r:o,this.cbAll=h?a:o,void 0!==this.cb||h||c){this.observing=!0;const s=e[t];this.value=c&&void 0!==s?i(s):s,this.createGetterSetter()}else this.observing=!1}get type(){return 1}getValue(){return this.value}setValue(e,t){if(this.hasSetter&&(e=this.set(e)),this.observing){const s=this.value;if(Object.is(e,s))return;this.value=e,this.oldValue=s,this.f=t,(null==this.$controller||this.$controller.isBound)&&(this.hasCb&&this.cb.call(this.obj,e,s,t),this.hasCbAll&&this.cbAll.call(this.obj,this.propertyKey,e,s,t)),this.queue.add(this)}else this.obj[this.propertyKey]=e}subscribe(e){if(!1==!this.observing){this.observing=!0;const e=this.obj[this.propertyKey];this.value=this.hasSetter?this.set(e):e,this.createGetterSetter()}this.subs.add(e)}flush(){de=this.oldValue,this.oldValue=this.value,this.subs.notify(this.value,de,this.f)}createGetterSetter(){Reflect.defineProperty(this.obj,this.propertyKey,{enumerable:!0,configurable:!0,get:()=>this.value,set:e=>{this.setValue(e,0)}})}}let de;M(ue),B(ue);class pe{constructor(e,t,s,i){if(this.chars=e,this.repeat=t,this.isSymbol=s,this.isInverted=i,i)switch(e.length){case 0:this.has=this.hasOfNoneInverse;break;case 1:this.has=this.hasOfSingleInverse;break;default:this.has=this.hasOfMultipleInverse}else switch(e.length){case 0:this.has=this.hasOfNone;break;case 1:this.has=this.hasOfSingle;break;default:this.has=this.hasOfMultiple}}equals(e){return this.chars===e.chars&&this.repeat===e.repeat&&this.isSymbol===e.isSymbol&&this.isInverted===e.isInverted}hasOfMultiple(e){return this.chars.includes(e)}hasOfSingle(e){return this.chars===e}hasOfNone(e){return!1}hasOfMultipleInverse(e){return!this.chars.includes(e)}hasOfSingleInverse(e){return this.chars!==e}hasOfNoneInverse(e){return!0}}class ge{constructor(){this.parts=a,this._pattern="",this.currentRecord={},this.partsRecord={}}get pattern(){const e=this._pattern;return""===e?null:e}set pattern(e){null==e?(this._pattern="",this.parts=a):(this._pattern=e,this.parts=this.partsRecord[e])}append(e,t){const{currentRecord:s}=this;void 0===s[e]?s[e]=t:s[e]+=t}next(e){const{currentRecord:t}=this;if(void 0!==t[e]){const{partsRecord:s}=this;void 0===s[e]?s[e]=[t[e]]:s[e].push(t[e]),t[e]=void 0}}}class fe{constructor(e,...t){this.charSpec=e,this.nextStates=[],this.types=null,this.isEndpoint=!1,this.patterns=t}get pattern(){return this.isEndpoint?this.patterns[0]:null}findChild(e){const t=this.nextStates,s=t.length;let i=null;for(let n=0;n<s;++n)if(i=t[n],e.equals(i.charSpec))return i;return null}append(e,t){const{patterns:s}=this;s.includes(t)||s.push(t);let i=this.findChild(e);return null==i&&(i=new fe(e,t),this.nextStates.push(i),e.repeat&&i.nextStates.push(i)),i}findMatches(e,t){const s=[],i=this.nextStates,n=i.length;let r=0,o=null,a=0,l=0;for(;a<n;++a)if(o=i[a],o.charSpec.has(e))if(s.push(o),r=o.patterns.length,l=0,o.charSpec.isSymbol)for(;l<r;++l)t.next(o.patterns[l]);else for(;l<r;++l)t.append(o.patterns[l],e);return s}}class ve{constructor(e){this.text=e;const t=this.len=e.length,s=this.specs=[];for(let i=0;i<t;++i)s.push(new pe(e[i],!1,!1,!1))}eachChar(e){const{len:t,specs:s}=this;for(let i=0;i<t;++i)e(s[i])}}class me{constructor(e){this.text="PART",this.spec=new pe(e,!0,!1,!0)}eachChar(e){e(this.spec)}}class be{constructor(e){this.text=e,this.spec=new pe(e,!1,!0,!1)}eachChar(e){e(this.spec)}}class ye{constructor(){this.statics=0,this.dynamics=0,this.symbols=0}}const we=l.createInterface("ISyntaxInterpreter",(e=>e.singleton(xe)));class xe{constructor(){this.rootState=new fe(null),this.initialStates=[this.rootState]}add(e){let t=0;if(Array.isArray(e)){const s=e.length;for(;t<s;++t)this.add(e[t]);return}let s=this.rootState;const i=e,n=i.pattern,r=new ye,o=this.parse(i,r),a=o.length,l=e=>{s=s.append(e,n)};for(t=0;t<a;++t)o[t].eachChar(l);s.types=r,s.isEndpoint=!0}interpret(e){const t=new ge;let s=this.initialStates;const i=e.length;for(let n=0;n<i&&(s=this.getNextStates(s,e.charAt(n),t),0!==s.length);++n);if(s.sort(((e,t)=>{if(!e.isEndpoint)return t.isEndpoint?1:0;if(!t.isEndpoint)return-1;const s=e.types,i=t.types;return s.statics!==i.statics?i.statics-s.statics:s.dynamics!==i.dynamics?i.dynamics-s.dynamics:s.symbols!==i.symbols?i.symbols-s.symbols:0})),s.length>0){const e=s[0];e.charSpec.isSymbol||t.next(e.pattern),t.pattern=e.pattern}return t}getNextStates(e,t,s){const i=[];let n=null;const r=e.length;for(let o=0;o<r;++o)n=e[o],i.push(...n.findMatches(t,s));return i}parse(e,t){const s=[],i=e.pattern,n=i.length;let r=0,o=0,a="";for(;r<n;)a=i.charAt(r),e.symbols.includes(a)?r!==o?(s.push(new ve(i.slice(o,r))),++t.statics,o=r):(s.push(new be(i.slice(o,r+1))),++t.symbols,o=++r):r===o&&"P"===a&&"PART"===i.slice(r,r+4)?(o=r+=4,s.push(new me(e.symbols)),++t.dynamics):++r;return o!==r&&(s.push(new ve(i.slice(o,r))),++t.statics),s}}class ke{constructor(e,t,s,i){this.rawName=e,this.rawValue=t,this.target=s,this.command=i}}const Ce=l.createInterface("IAttributePattern"),$e=l.createInterface("IAttributeParser",(e=>e.singleton(Se)));let Se=class{constructor(e,t){this.interpreter=e,this.cache={};const s=this.patterns={};t.forEach((t=>{const i=Ee.getPatternDefinitions(t.constructor);e.add(i),i.forEach((e=>{s[e.pattern]=t}))}))}parse(e,t){let s=this.cache[e];null==s&&(s=this.cache[e]=this.interpreter.interpret(e));const i=s.pattern;return null==i?new ke(e,t,e,null):this.patterns[i][i](e,t,s.parts)}};function Te(...e){return function(t){return Ee.define(e,t)}}Se=re([oe(0,we),oe(1,h(Ce))],Se);class Ae{constructor(e){this.Type=e,this.name=void 0}register(e){c.singleton(Ce,this.Type).register(e)}}const Ee=Object.freeze({name:t.resource.keyFor("attribute-pattern"),definitionAnnotationKey:"attribute-pattern-definitions",define(e,s){const n=new Ae(s),{name:r,definitionAnnotationKey:o}=Ee;return i.define(r,n,s),t.resource.appendTo(s,r),t.annotation.set(s,o,e),t.annotation.appendTo(s,o),s},getPatternDefinitions:e=>t.annotation.get(e,Ee.definitionAnnotationKey)});let Oe=class{"PART.PART"(e,t,s){return new ke(e,t,s[0],s[1])}"PART.PART.PART"(e,t,s){return new ke(e,t,s[0],s[2])}};Oe=re([Te({pattern:"PART.PART",symbols:"."},{pattern:"PART.PART.PART",symbols:"."})],Oe);let Pe=class{ref(e,t,s){return new ke(e,t,"element","ref")}"PART.ref"(e,t,s){return new ke(e,t,s[0],"ref")}};Pe=re([Te({pattern:"ref",symbols:""},{pattern:"PART.ref",symbols:"."})],Pe);let Re=class{":PART"(e,t,s){return new ke(e,t,s[0],"bind")}};Re=re([Te({pattern:":PART",symbols:":"})],Re);let Me=class{"@PART"(e,t,s){return new ke(e,t,s[0],"trigger")}};Me=re([Te({pattern:"@PART",symbols:"@"})],Me);const Be=je();function Le(e,t,s){if(!0===Be[t])return!0;if("string"!=typeof t)return!1;const i=t.slice(0,5);return Be[t]="aria-"===i||"data-"===i||s.isStandardSvgAttribute(e,t)}function je(){return Object.create(null)}const Ve=u,Ie=l.createInterface("ISVGAnalyzer",(e=>e.singleton(Ne)));class Ne{isStandardSvgAttribute(e,t){return!1}}function qe(e){const t=je();let s;for(s of e)t[s]=!0;return t}class De{constructor(e){this.svgElements=Object.assign(je(),{a:qe(["class","externalResourcesRequired","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","requiredExtensions","requiredFeatures","style","systemLanguage","target","transform","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space"]),altGlyph:qe(["class","dx","dy","externalResourcesRequired","format","glyphRef","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","requiredExtensions","requiredFeatures","rotate","style","systemLanguage","x","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space","y"]),altglyph:je(),altGlyphDef:qe(["id","xml:base","xml:lang","xml:space"]),altglyphdef:je(),altGlyphItem:qe(["id","xml:base","xml:lang","xml:space"]),altglyphitem:je(),animate:qe(["accumulate","additive","attributeName","attributeType","begin","by","calcMode","dur","end","externalResourcesRequired","fill","from","id","keySplines","keyTimes","max","min","onbegin","onend","onload","onrepeat","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","systemLanguage","to","values","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space"]),animateColor:qe(["accumulate","additive","attributeName","attributeType","begin","by","calcMode","dur","end","externalResourcesRequired","fill","from","id","keySplines","keyTimes","max","min","onbegin","onend","onload","onrepeat","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","systemLanguage","to","values","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space"]),animateMotion:qe(["accumulate","additive","begin","by","calcMode","dur","end","externalResourcesRequired","fill","from","id","keyPoints","keySplines","keyTimes","max","min","onbegin","onend","onload","onrepeat","origin","path","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","rotate","systemLanguage","to","values","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space"]),animateTransform:qe(["accumulate","additive","attributeName","attributeType","begin","by","calcMode","dur","end","externalResourcesRequired","fill","from","id","keySplines","keyTimes","max","min","onbegin","onend","onload","onrepeat","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","systemLanguage","to","type","values","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space"]),circle:qe(["class","cx","cy","externalResourcesRequired","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","r","requiredExtensions","requiredFeatures","style","systemLanguage","transform","xml:base","xml:lang","xml:space"]),clipPath:qe(["class","clipPathUnits","externalResourcesRequired","id","requiredExtensions","requiredFeatures","style","systemLanguage","transform","xml:base","xml:lang","xml:space"]),"color-profile":qe(["id","local","name","rendering-intent","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space"]),cursor:qe(["externalResourcesRequired","id","requiredExtensions","requiredFeatures","systemLanguage","x","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space","y"]),defs:qe(["class","externalResourcesRequired","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","requiredExtensions","requiredFeatures","style","systemLanguage","transform","xml:base","xml:lang","xml:space"]),desc:qe(["class","id","style","xml:base","xml:lang","xml:space"]),ellipse:qe(["class","cx","cy","externalResourcesRequired","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","requiredExtensions","requiredFeatures","rx","ry","style","systemLanguage","transform","xml:base","xml:lang","xml:space"]),feBlend:qe(["class","height","id","in","in2","mode","result","style","width","x","xml:base","xml:lang","xml:space","y"]),feColorMatrix:qe(["class","height","id","in","result","style","type","values","width","x","xml:base","xml:lang","xml:space","y"]),feComponentTransfer:qe(["class","height","id","in","result","style","width","x","xml:base","xml:lang","xml:space","y"]),feComposite:qe(["class","height","id","in","in2","k1","k2","k3","k4","operator","result","style","width","x","xml:base","xml:lang","xml:space","y"]),feConvolveMatrix:qe(["bias","class","divisor","edgeMode","height","id","in","kernelMatrix","kernelUnitLength","order","preserveAlpha","result","style","targetX","targetY","width","x","xml:base","xml:lang","xml:space","y"]),feDiffuseLighting:qe(["class","diffuseConstant","height","id","in","kernelUnitLength","result","style","surfaceScale","width","x","xml:base","xml:lang","xml:space","y"]),feDisplacementMap:qe(["class","height","id","in","in2","result","scale","style","width","x","xChannelSelector","xml:base","xml:lang","xml:space","y","yChannelSelector"]),feDistantLight:qe(["azimuth","elevation","id","xml:base","xml:lang","xml:space"]),feFlood:qe(["class","height","id","result","style","width","x","xml:base","xml:lang","xml:space","y"]),feFuncA:qe(["amplitude","exponent","id","intercept","offset","slope","tableValues","type","xml:base","xml:lang","xml:space"]),feFuncB:qe(["amplitude","exponent","id","intercept","offset","slope","tableValues","type","xml:base","xml:lang","xml:space"]),feFuncG:qe(["amplitude","exponent","id","intercept","offset","slope","tableValues","type","xml:base","xml:lang","xml:space"]),feFuncR:qe(["amplitude","exponent","id","intercept","offset","slope","tableValues","type","xml:base","xml:lang","xml:space"]),feGaussianBlur:qe(["class","height","id","in","result","stdDeviation","style","width","x","xml:base","xml:lang","xml:space","y"]),feImage:qe(["class","externalResourcesRequired","height","id","preserveAspectRatio","result","style","width","x","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space","y"]),feMerge:qe(["class","height","id","result","style","width","x","xml:base","xml:lang","xml:space","y"]),feMergeNode:qe(["id","xml:base","xml:lang","xml:space"]),feMorphology:qe(["class","height","id","in","operator","radius","result","style","width","x","xml:base","xml:lang","xml:space","y"]),feOffset:qe(["class","dx","dy","height","id","in","result","style","width","x","xml:base","xml:lang","xml:space","y"]),fePointLight:qe(["id","x","xml:base","xml:lang","xml:space","y","z"]),feSpecularLighting:qe(["class","height","id","in","kernelUnitLength","result","specularConstant","specularExponent","style","surfaceScale","width","x","xml:base","xml:lang","xml:space","y"]),feSpotLight:qe(["id","limitingConeAngle","pointsAtX","pointsAtY","pointsAtZ","specularExponent","x","xml:base","xml:lang","xml:space","y","z"]),feTile:qe(["class","height","id","in","result","style","width","x","xml:base","xml:lang","xml:space","y"]),feTurbulence:qe(["baseFrequency","class","height","id","numOctaves","result","seed","stitchTiles","style","type","width","x","xml:base","xml:lang","xml:space","y"]),filter:qe(["class","externalResourcesRequired","filterRes","filterUnits","height","id","primitiveUnits","style","width","x","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space","y"]),font:qe(["class","externalResourcesRequired","horiz-adv-x","horiz-origin-x","horiz-origin-y","id","style","vert-adv-y","vert-origin-x","vert-origin-y","xml:base","xml:lang","xml:space"]),"font-face":qe(["accent-height","alphabetic","ascent","bbox","cap-height","descent","font-family","font-size","font-stretch","font-style","font-variant","font-weight","hanging","id","ideographic","mathematical","overline-position","overline-thickness","panose-1","slope","stemh","stemv","strikethrough-position","strikethrough-thickness","underline-position","underline-thickness","unicode-range","units-per-em","v-alphabetic","v-hanging","v-ideographic","v-mathematical","widths","x-height","xml:base","xml:lang","xml:space"]),"font-face-format":qe(["id","string","xml:base","xml:lang","xml:space"]),"font-face-name":qe(["id","name","xml:base","xml:lang","xml:space"]),"font-face-src":qe(["id","xml:base","xml:lang","xml:space"]),"font-face-uri":qe(["id","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space"]),foreignObject:qe(["class","externalResourcesRequired","height","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","requiredExtensions","requiredFeatures","style","systemLanguage","transform","width","x","xml:base","xml:lang","xml:space","y"]),g:qe(["class","externalResourcesRequired","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","requiredExtensions","requiredFeatures","style","systemLanguage","transform","xml:base","xml:lang","xml:space"]),glyph:qe(["arabic-form","class","d","glyph-name","horiz-adv-x","id","lang","orientation","style","unicode","vert-adv-y","vert-origin-x","vert-origin-y","xml:base","xml:lang","xml:space"]),glyphRef:qe(["class","dx","dy","format","glyphRef","id","style","x","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space","y"]),glyphref:je(),hkern:qe(["g1","g2","id","k","u1","u2","xml:base","xml:lang","xml:space"]),image:qe(["class","externalResourcesRequired","height","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","preserveAspectRatio","requiredExtensions","requiredFeatures","style","systemLanguage","transform","width","x","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space","y"]),line:qe(["class","externalResourcesRequired","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","requiredExtensions","requiredFeatures","style","systemLanguage","transform","x1","x2","xml:base","xml:lang","xml:space","y1","y2"]),linearGradient:qe(["class","externalResourcesRequired","gradientTransform","gradientUnits","id","spreadMethod","style","x1","x2","xlink:arcrole","xlink:href","xlink:role","xlink:title","xlink:type","xml:base","xml:lang","xml:space","y1","y2"]),marker:qe(["class","externalResourcesRequired","id","markerHeight","markerUnits","markerWidth","orient","preserveAspectRatio","refX","refY","style","viewBox","xml:base","xml:lang","xml:space"]),mask:qe(["class","externalResourcesRequired","height","id","maskContentUnits","maskUnits","requiredExtensions","requiredFeatures","style","systemLanguage","width","x","xml:base","xml:lang","xml:space","y"]),metadata:qe(["id","xml:base","xml:lang","xml:space"]),"missing-glyph":qe(["class","d","horiz-adv-x","id","style","vert-adv-y","vert-origin-x","vert-origin-y","xml:base","xml:lang","xml:space"]),mpath:qe(["externalResourcesRequired","id","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space"]),path:qe(["class","d","externalResourcesRequired","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","pathLength","requiredExtensions","requiredFeatures","style","systemLanguage","transform","xml:base","xml:lang","xml:space"]),pattern:qe(["class","externalResourcesRequired","height","id","patternContentUnits","patternTransform","patternUnits","preserveAspectRatio","requiredExtensions","requiredFeatures","style","systemLanguage","viewBox","width","x","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space","y"]),polygon:qe(["class","externalResourcesRequired","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","points","requiredExtensions","requiredFeatures","style","systemLanguage","transform","xml:base","xml:lang","xml:space"]),polyline:qe(["class","externalResourcesRequired","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","points","requiredExtensions","requiredFeatures","style","systemLanguage","transform","xml:base","xml:lang","xml:space"]),radialGradient:qe(["class","cx","cy","externalResourcesRequired","fx","fy","gradientTransform","gradientUnits","id","r","spreadMethod","style","xlink:arcrole","xlink:href","xlink:role","xlink:title","xlink:type","xml:base","xml:lang","xml:space"]),rect:qe(["class","externalResourcesRequired","height","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","requiredExtensions","requiredFeatures","rx","ry","style","systemLanguage","transform","width","x","xml:base","xml:lang","xml:space","y"]),script:qe(["externalResourcesRequired","id","type","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space"]),set:qe(["attributeName","attributeType","begin","dur","end","externalResourcesRequired","fill","id","max","min","onbegin","onend","onload","onrepeat","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","systemLanguage","to","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space"]),stop:qe(["class","id","offset","style","xml:base","xml:lang","xml:space"]),style:qe(["id","media","title","type","xml:base","xml:lang","xml:space"]),svg:qe(["baseProfile","class","contentScriptType","contentStyleType","externalResourcesRequired","height","id","onabort","onactivate","onclick","onerror","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","onresize","onscroll","onunload","onzoom","preserveAspectRatio","requiredExtensions","requiredFeatures","style","systemLanguage","version","viewBox","width","x","xml:base","xml:lang","xml:space","y","zoomAndPan"]),switch:qe(["class","externalResourcesRequired","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","requiredExtensions","requiredFeatures","style","systemLanguage","transform","xml:base","xml:lang","xml:space"]),symbol:qe(["class","externalResourcesRequired","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","preserveAspectRatio","style","viewBox","xml:base","xml:lang","xml:space"]),text:qe(["class","dx","dy","externalResourcesRequired","id","lengthAdjust","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","requiredExtensions","requiredFeatures","rotate","style","systemLanguage","textLength","transform","x","xml:base","xml:lang","xml:space","y"]),textPath:qe(["class","externalResourcesRequired","id","lengthAdjust","method","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","requiredExtensions","requiredFeatures","spacing","startOffset","style","systemLanguage","textLength","xlink:arcrole","xlink:href","xlink:role","xlink:title","xlink:type","xml:base","xml:lang","xml:space"]),title:qe(["class","id","style","xml:base","xml:lang","xml:space"]),tref:qe(["class","dx","dy","externalResourcesRequired","id","lengthAdjust","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","requiredExtensions","requiredFeatures","rotate","style","systemLanguage","textLength","x","xlink:arcrole","xlink:href","xlink:role","xlink:title","xlink:type","xml:base","xml:lang","xml:space","y"]),tspan:qe(["class","dx","dy","externalResourcesRequired","id","lengthAdjust","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","requiredExtensions","requiredFeatures","rotate","style","systemLanguage","textLength","x","xml:base","xml:lang","xml:space","y"]),use:qe(["class","externalResourcesRequired","height","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","requiredExtensions","requiredFeatures","style","systemLanguage","transform","width","x","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space","y"]),view:qe(["externalResourcesRequired","id","preserveAspectRatio","viewBox","viewTarget","xml:base","xml:lang","xml:space","zoomAndPan"]),vkern:qe(["g1","g2","id","k","u1","u2","xml:base","xml:lang","xml:space"])}),this.svgPresentationElements=qe(["a","altGlyph","animate","animateColor","circle","clipPath","defs","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feFlood","feGaussianBlur","feImage","feMerge","feMorphology","feOffset","feSpecularLighting","feTile","feTurbulence","filter","font","foreignObject","g","glyph","glyphRef","image","line","linearGradient","marker","mask","missing-glyph","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","switch","symbol","text","textPath","tref","tspan","use"]),this.svgPresentationAttributes=qe(["alignment-baseline","baseline-shift","clip-path","clip-rule","clip","color-interpolation-filters","color-interpolation","color-profile","color-rendering","color","cursor","direction","display","dominant-baseline","enable-background","fill-opacity","fill-rule","fill","filter","flood-color","flood-opacity","font-family","font-size-adjust","font-size","font-stretch","font-style","font-variant","font-weight","glyph-orientation-horizontal","glyph-orientation-vertical","image-rendering","kerning","letter-spacing","lighting-color","marker-end","marker-mid","marker-start","mask","opacity","overflow","pointer-events","shape-rendering","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","stroke","text-anchor","text-decoration","text-rendering","unicode-bidi","visibility","word-spacing","writing-mode"]),this.SVGElement=e.globalThis.SVGElement;const t=e.document.createElement("div");if(t.innerHTML="<svg><altGlyph /></svg>","altglyph"===t.firstElementChild.nodeName){const e=this.svgElements;let t=e.altGlyph;e.altGlyph=e.altglyph,e.altglyph=t,t=e.altGlyphDef,e.altGlyphDef=e.altglyphdef,e.altglyphdef=t,t=e.altGlyphItem,e.altGlyphItem=e.altglyphitem,e.altglyphitem=t,t=e.glyphRef,e.glyphRef=e.glyphref,e.glyphref=t}}static register(e){return c.singleton(Ie,this).register(e)}isStandardSvgAttribute(e,t){var s;return e instanceof this.SVGElement&&(!0===this.svgPresentationElements[e.nodeName]&&!0===this.svgPresentationAttributes[t]||!0===(null===(s=this.svgElements[e.nodeName])||void 0===s?void 0:s[t]))}}De.inject=[Ve];const Fe=l.createInterface("IAttrMapper",(e=>e.singleton(ze)));class ze{constructor(e){this.svg=e,this.fns=[],this.tagAttrMap=je(),this.globalAttrMap=je(),this.useMapping({LABEL:{for:"htmlFor"},IMG:{usemap:"useMap"},INPUT:{maxlength:"maxLength",minlength:"minLength",formaction:"formAction",formenctype:"formEncType",formmethod:"formMethod",formnovalidate:"formNoValidate",formtarget:"formTarget",inputmode:"inputMode"},TEXTAREA:{maxlength:"maxLength"},TD:{rowspan:"rowSpan",colspan:"colSpan"},TH:{rowspan:"rowSpan",colspan:"colSpan"}}),this.useGlobalMapping({accesskey:"accessKey",contenteditable:"contentEditable",tabindex:"tabIndex",textcontent:"textContent",innerhtml:"innerHTML",scrolltop:"scrollTop",scrollleft:"scrollLeft",readonly:"readOnly"})}static get inject(){return[Ie]}useMapping(e){var t,s;let i,n,r,o;for(r in e)for(o in i=e[r],n=null!==(t=(s=this.tagAttrMap)[r])&&void 0!==t?t:s[r]=je(),i){if(void 0!==n[o])throw Ue(o,r);n[o]=i[o]}}useGlobalMapping(e){const t=this.globalAttrMap;for(const s in e){if(void 0!==t[s])throw Ue(s,"*");t[s]=e[s]}}useTwoWay(e){this.fns.push(e)}isTwoWay(e,t){return function(e,t){switch(e.nodeName){case"INPUT":switch(e.type){case"checkbox":case"radio":return"checked"===t;default:return"value"===t||"files"===t||"value-as-number"===t||"value-as-date"===t}case"TEXTAREA":case"SELECT":return"value"===t;default:switch(t){case"textcontent":case"innerhtml":return e.hasAttribute("contenteditable");case"scrolltop":case"scrollleft":return!0;default:return!1}}}(e,t)||this.fns.length>0&&this.fns.some((s=>s(e,t)))}map(e,t){var s,i,n;return null!==(n=null!==(i=null===(s=this.tagAttrMap[e.nodeName])||void 0===s?void 0:s[t])&&void 0!==i?i:this.globalAttrMap[t])&&void 0!==n?n:Le(e,t,this.svg)?t:null}}function Ue(e,t){return new Error(`Attribute ${e} has been already registered for ${"*"===t?"all elements":`<${t}/>`}`)}class Ke{constructor(e,t,s,i,n){this.sourceExpression=e,this.target=t,this.targetProperty=s,this.locator=n,this.interceptor=this,this.isBound=!1,this.$hostScope=null,this.targetObserver=i.getAccessor(t,s)}callSource(e){const t=this.$scope.overrideContext;t.$event=e;const s=this.sourceExpression.evaluate(8,this.$scope,this.$hostScope,this.locator,null);return Reflect.deleteProperty(t,"$event"),s}$bind(e,t,s){if(this.isBound){if(this.$scope===t)return;this.interceptor.$unbind(2|e)}this.$scope=t,this.$hostScope=s,this.sourceExpression.hasBind&&this.sourceExpression.bind(e,t,s,this.interceptor),this.targetObserver.setValue((e=>this.interceptor.callSource(e)),e,this.target,this.targetProperty),this.isBound=!0}$unbind(e){this.isBound&&(this.sourceExpression.hasUnbind&&this.sourceExpression.unbind(e,this.$scope,this.$hostScope,this.interceptor),this.$scope=void 0,this.targetObserver.setValue(null,e,this.target,this.targetProperty),this.isBound=!1)}observeProperty(e,t){}handleChange(e,t,s){}}class We{constructor(e,t,s,i,n){this.platform=e,this.observerLocator=t,this.obj=s,this.propertyKey=i,this.targetAttribute=n,this.value=null,this.oldValue=null,this.hasChanges=!1,this.type=7,this.f=0}getValue(){return this.value}setValue(e,t){this.value=e,this.hasChanges=e!==this.oldValue,0==(256&t)&&this.flushChanges(t)}flushChanges(e){if(this.hasChanges){this.hasChanges=!1;const e=this.value,t=this.targetAttribute;switch(this.oldValue=e,t){case"class":this.obj.classList.toggle(this.propertyKey,!!e);break;case"style":{let t="",s=e;"string"==typeof s&&s.includes("!important")&&(t="important",s=s.replace("!important","")),this.obj.style.setProperty(this.propertyKey,s,t);break}default:null==e?this.obj.removeAttribute(t):this.obj.setAttribute(t,String(e))}}}handleMutation(e){let t=!1;for(let s=0,i=e.length;i>s;++s){const i=e[s];if("attributes"===i.type&&i.attributeName===this.propertyKey){t=!0;break}}if(t){let e;switch(this.targetAttribute){case"class":e=this.obj.classList.contains(this.propertyKey);break;case"style":e=this.obj.style.getPropertyValue(this.propertyKey);break;default:throw new Error(`Unsupported observation of attribute: ${this.targetAttribute}`)}e!==this.value&&(this.oldValue=this.value,this.value=e,this.hasChanges=!1,this.f=0,this.queue.add(this))}}subscribe(e){this.subs.add(e)&&1===this.subs.count&&(this.value=this.oldValue=this.obj.getAttribute(this.propertyKey),He(this.obj.ownerDocument.defaultView.MutationObserver,this.obj,this))}unsubscribe(e){this.subs.remove(e)&&0===this.subs.count&&Ge(this.obj,this)}flush(){Xe=this.oldValue,this.oldValue=this.value,this.subs.notify(this.value,Xe,this.f)}}M(We),B(We);const He=(e,t,s)=>{void 0===t.$eMObservers&&(t.$eMObservers=new Set),void 0===t.$mObserver&&(t.$mObserver=new e(_e)).observe(t,{attributes:!0}),t.$eMObservers.add(s)},Ge=(e,t)=>{const s=e.$eMObservers;return!(!s||!s.delete(t))&&(0===s.size&&(e.$mObserver.disconnect(),e.$mObserver=void 0),!0)},_e=e=>{e[0].target.$eMObservers.forEach(Qe,e)};function Qe(e){e.handleMutation(this)}let Xe;class Ye{constructor(e){this.b=e}handleChange(e,t,s){const i=this.b;e!==i.sourceExpression.evaluate(s,i.$scope,i.$hostScope,i.locator,null)&&i.updateSource(e,s)}}const{oneTime:Ze,toView:Je,fromView:et}=R,tt=Je|Ze,st={reusable:!1,preempt:!0};class it{constructor(e,t,s,i,n,r,o){this.sourceExpression=e,this.targetAttribute=s,this.targetProperty=i,this.mode=n,this.observerLocator=r,this.locator=o,this.interceptor=this,this.isBound=!1,this.$scope=null,this.$hostScope=null,this.task=null,this.targetSubscriber=null,this.persistentFlags=0,this.value=void 0,this.target=t,this.$platform=o.get(Ve)}updateTarget(e,t){this.targetObserver.setValue(e,t|=this.persistentFlags,this.target,this.targetProperty)}updateSource(e,t){this.sourceExpression.assign(t|=this.persistentFlags,this.$scope,this.$hostScope,this.locator,e)}handleChange(e,t,s){if(!this.isBound)return;const i=this.interceptor,n=this.sourceExpression,r=this.$scope,o=this.locator,a=0==(2&(s|=this.persistentFlags))&&(4&this.targetObserver.type)>0;if(10082!==n.$kind||this.obs.count>1){const t=0==(this.mode&Ze);t&&this.obs.version++,e=n.evaluate(s,r,this.$hostScope,o,i),t&&this.obs.clear(!1)}let l;e!==this.value&&(this.value=e,a?(l=this.task,this.task=this.$platform.domWriteQueue.queueTask((()=>{this.task=null,i.updateTarget(e,s)}),st),null==l||l.cancel()):i.updateTarget(e,s))}$bind(e,t,s,i){var n;if(this.isBound){if(this.$scope===t)return;this.interceptor.$unbind(2|e)}this.persistentFlags=961&e,this.$scope=t,this.$hostScope=s,this.projection=i;let r=this.sourceExpression;r.hasBind&&r.bind(e,t,s,this.interceptor);let o=this.targetObserver;o||(o=this.targetObserver=new We(this.$platform,this.observerLocator,this.target,this.targetProperty,this.targetAttribute)),r=this.sourceExpression;const a=this.mode,l=this.interceptor;if(a&tt){l.updateTarget(this.value=r.evaluate(e,t,this.$hostScope,this.locator,(a&Je)>0?l:null),e)}a&et&&o.subscribe(null!==(n=this.targetSubscriber)&&void 0!==n?n:this.targetSubscriber=new Ye(l)),this.isBound=!0}$unbind(e){var t;this.isBound&&(this.persistentFlags=0,this.sourceExpression.hasUnbind&&this.sourceExpression.unbind(e,this.$scope,this.$hostScope,this.interceptor),this.$scope=this.$hostScope=null,this.value=void 0,this.targetSubscriber&&this.targetObserver.unsubscribe(this.targetSubscriber),null===(t=this.task)||void 0===t||t.cancel(),this.task=null,this.obs.clear(!0),this.isBound=!1)}}L(it);const{toView:nt}=R,rt={reusable:!1,preempt:!0};class ot{constructor(e,t,s,i,n,r,o){this.observerLocator=e,this.interpolation=t,this.target=s,this.targetProperty=i,this.mode=n,this.locator=r,this.taskQueue=o,this.interceptor=this,this.isBound=!1,this.$scope=void 0,this.$hostScope=null,this.task=null,this.targetObserver=e.getAccessor(s,i);const a=t.expressions,l=this.partBindings=Array(a.length);for(let t=0,n=a.length;t<n;++t)l[t]=new at(a[t],s,i,r,e,this)}updateTarget(e,t){const s=this.partBindings,i=this.interpolation.parts,n=s.length;let r="";if(1===n)r=i[0]+s[0].value+i[1];else{r=i[0];for(let e=0;n>e;++e)r+=s[e].value+i[e+1]}const o=this.targetObserver;if(0==(2&t)&&(4&o.type)>0){const e=this.task;this.task=this.taskQueue.queueTask((()=>{this.task=null,o.setValue(r,t,this.target,this.targetProperty)}),rt),null==e||e.cancel()}else o.setValue(r,t,this.target,this.targetProperty)}$bind(e,t,s){if(this.isBound){if(this.$scope===t)return;this.interceptor.$unbind(e)}this.isBound=!0,this.$scope=t;const i=this.partBindings;for(let n=0,r=i.length;r>n;++n)i[n].$bind(e,t,s);this.updateTarget(void 0,e)}$unbind(e){var t;if(!this.isBound)return;this.isBound=!1,this.$scope=void 0;const s=this.partBindings;for(let t=0,i=s.length;t<i;++t)s[t].interceptor.$unbind(e);null===(t=this.task)||void 0===t||t.cancel(),this.task=null}}class at{constructor(e,t,s,i,n,r){this.sourceExpression=e,this.target=t,this.targetProperty=s,this.locator=i,this.observerLocator=n,this.owner=r,this.interceptor=this,this.mode=R.toView,this.value="",this.$hostScope=null,this.task=null,this.isBound=!1}handleChange(e,t,s){if(!this.isBound)return;const i=this.sourceExpression,n=this.obs;if(!(10082===i.$kind&&1===n.count)){const t=(this.mode&nt)>0;t&&n.version++,e=i.evaluate(s,this.$scope,this.$hostScope,this.locator,t?this.interceptor:null),t&&n.clear(!1)}e!=this.value&&(this.value=e,e instanceof Array&&this.observeCollection(e),this.owner.updateTarget(e,s))}handleCollectionChange(e,t){this.owner.updateTarget(void 0,t)}$bind(e,t,s){if(this.isBound){if(this.$scope===t)return;this.interceptor.$unbind(e)}this.isBound=!0,this.$scope=t,this.$hostScope=s,this.sourceExpression.hasBind&&this.sourceExpression.bind(e,t,s,this.interceptor);const i=this.value=this.sourceExpression.evaluate(e,t,s,this.locator,(this.mode&nt)>0?this.interceptor:null);i instanceof Array&&this.observeCollection(i)}$unbind(e){this.isBound&&(this.isBound=!1,this.sourceExpression.hasUnbind&&this.sourceExpression.unbind(e,this.$scope,this.$hostScope,this.interceptor),this.$scope=void 0,this.$hostScope=null,this.obs.clear(!0))}}L(at);class lt{constructor(e,t,s,i,n,r){this.sourceExpression=e,this.target=t,this.locator=s,this.observerLocator=i,this.p=n,this.strict=r,this.interceptor=this,this.mode=R.toView,this.value="",this.$hostScope=null,this.task=null,this.isBound=!1}updateTarget(e,t){var s,i;const n=this.target,r=this.p.Node,o=this.value;this.value=e,o instanceof r&&(null===(s=o.parentNode)||void 0===s||s.removeChild(o)),e instanceof r?(n.textContent="",null===(i=n.parentNode)||void 0===i||i.insertBefore(e,n)):n.textContent=String(e)}handleChange(e,t,s){var i;if(!this.isBound)return;const n=this.sourceExpression,r=this.obs;if(!(10082===n.$kind&&1===r.count)){const t=(this.mode&nt)>0;t&&r.version++,e=n.evaluate(s|=this.strict?1:0,this.$scope,this.$hostScope,this.locator,t?this.interceptor:null),t&&r.clear(!1)}if(e===this.value)return null===(i=this.task)||void 0===i||i.cancel(),void(this.task=null);0==(2&s)?this.queueUpdate(e,s):this.updateTarget(e,s)}handleCollectionChange(){this.queueUpdate(this.value,0)}$bind(e,t,s){if(this.isBound){if(this.$scope===t)return;this.interceptor.$unbind(e)}this.isBound=!0,this.$scope=t,this.$hostScope=s,this.sourceExpression.hasBind&&this.sourceExpression.bind(e,t,s,this.interceptor);const i=this.value=this.sourceExpression.evaluate(e|=this.strict?1:0,t,s,this.locator,(this.mode&nt)>0?this.interceptor:null);i instanceof Array&&this.observeCollection(i),this.updateTarget(i,e)}$unbind(e){var t;this.isBound&&(this.isBound=!1,this.sourceExpression.hasUnbind&&this.sourceExpression.unbind(e,this.$scope,this.$hostScope,this.interceptor),this.$scope=void 0,this.$hostScope=null,this.obs.clear(!0),null===(t=this.task)||void 0===t||t.cancel(),this.task=null)}queueUpdate(e,t){const s=this.task;this.task=this.p.domWriteQueue.queueTask((()=>{this.task=null,this.updateTarget(e,t)}),rt),null==s||s.cancel()}}L(lt);class ht{constructor(e,t,s,i,n=!1){this.sourceExpression=e,this.targetProperty=t,this.observerLocator=s,this.locator=i,this.toBindingContext=n,this.interceptor=this,this.isBound=!1,this.$scope=void 0,this.$hostScope=null,this.task=null,this.target=null}handleChange(e,t,s){if(!this.isBound)return;const i=this.target,n=this.targetProperty,r=i[n];this.obs.version++,e=this.sourceExpression.evaluate(s,this.$scope,this.$hostScope,this.locator,this.interceptor),this.obs.clear(!1),e!==r&&(i[n]=e)}$bind(e,t,s){if(this.isBound){if(this.$scope===t)return;this.interceptor.$unbind(2|e)}this.$scope=t,this.$hostScope=s,this.target=this.toBindingContext?(null!=s?s:t).bindingContext:(null!=s?s:t).overrideContext;const i=this.sourceExpression;i.hasBind&&i.bind(e,t,s,this.interceptor),this.target[this.targetProperty]=this.sourceExpression.evaluate(2|e,t,s,this.locator,this.interceptor),this.isBound=!0}$unbind(e){if(!this.isBound)return;const t=this.sourceExpression;t.hasUnbind&&t.unbind(e,this.$scope,this.$hostScope,this.interceptor),this.$scope=void 0,this.$hostScope=null,this.obs.clear(!0),this.isBound=!1}}L(ht);const{oneTime:ct,toView:ut,fromView:dt}=R,pt=ut|ct,gt={reusable:!1,preempt:!0};class ft{constructor(e,t,s,i,n,r,o){this.sourceExpression=e,this.target=t,this.targetProperty=s,this.mode=i,this.observerLocator=n,this.locator=r,this.taskQueue=o,this.interceptor=this,this.isBound=!1,this.$scope=void 0,this.$hostScope=null,this.targetObserver=void 0,this.persistentFlags=0,this.task=null,this.targetSubscriber=null}updateTarget(e,t){this.targetObserver.setValue(e,t|=this.persistentFlags,this.target,this.targetProperty)}updateSource(e,t){this.sourceExpression.assign(t|=this.persistentFlags,this.$scope,this.$hostScope,this.locator,e)}handleChange(e,t,s){if(!this.isBound)return;const i=this.interceptor,n=this.sourceExpression,r=this.$scope,o=this.locator,a=0==(2&(s|=this.persistentFlags))&&(4&this.targetObserver.type)>0,l=this.obs;if(10082!==n.$kind||l.count>1){const t=this.mode>ct;t&&l.version++,e=n.evaluate(s,r,this.$hostScope,o,i),t&&l.clear(!1)}if(a){const t=this.task;this.task=this.taskQueue.queueTask((()=>{i.updateTarget(e,s),this.task=null}),gt),null==t||t.cancel()}else i.updateTarget(e,s)}$bind(e,t,s){var i;if(this.isBound){if(this.$scope===t)return;this.interceptor.$unbind(2|e)}this.persistentFlags=961&(e|=1),this.$scope=t,this.$hostScope=s;let n=this.sourceExpression;n.hasBind&&n.bind(e,t,s,this.interceptor);const r=this.mode;let o=this.targetObserver;if(!o){const e=this.observerLocator;o=r&dt?e.getObserver(this.target,this.targetProperty):e.getAccessor(this.target,this.targetProperty),this.targetObserver=o}n=this.sourceExpression;const a=this.interceptor,l=(r&ut)>0;r&pt&&a.updateTarget(n.evaluate(e,t,this.$hostScope,this.locator,l?a:null),e),r&dt&&(o.subscribe(null!==(i=this.targetSubscriber)&&void 0!==i?i:this.targetSubscriber=new Ye(a)),l||a.updateSource(o.getValue(this.target,this.targetProperty),e)),this.isBound=!0}$unbind(e){if(!this.isBound)return;this.persistentFlags=0,this.sourceExpression.hasUnbind&&this.sourceExpression.unbind(e,this.$scope,this.$hostScope,this.interceptor),this.$scope=void 0,this.$hostScope=null;const t=this.task;this.targetSubscriber&&this.targetObserver.unsubscribe(this.targetSubscriber),null!=t&&(t.cancel(),this.task=null),this.obs.clear(!0),this.isBound=!1}}L(ft);class vt{constructor(e,t,s){this.sourceExpression=e,this.target=t,this.locator=s,this.interceptor=this,this.isBound=!1,this.$scope=void 0,this.$hostScope=null}$bind(e,t,s){if(this.isBound){if(this.$scope===t)return;this.interceptor.$unbind(2|e)}this.$scope=t,this.$hostScope=s,this.sourceExpression.hasBind&&this.sourceExpression.bind(e,t,s,this),this.sourceExpression.assign(e,this.$scope,s,this.locator,this.target),this.isBound=!0}$unbind(e){if(!this.isBound)return;let t=this.sourceExpression;t.evaluate(e,this.$scope,this.$hostScope,this.locator,null)===this.target&&t.assign(e,this.$scope,this.$hostScope,this.locator,null),t=this.sourceExpression,t.hasUnbind&&t.unbind(e,this.$scope,this.$hostScope,this.interceptor),this.$scope=void 0,this.$hostScope=null,this.isBound=!1}observeProperty(e,t){}handleChange(e,t,s){}}const mt=l.createInterface("IAppTask");class bt{constructor(e,t,s){this.c=void 0,this.slot=e,this.k=t,this.cb=s}register(e){return this.c=e.register(c.instance(mt,this))}run(){const e=this.k,t=this.cb;return null===e?t():t(this.c.get(e))}}const yt=Object.freeze({beforeCreate:wt("beforeCreate"),hydrating:wt("hydrating"),hydrated:wt("hydrated"),beforeActivate:wt("beforeActivate"),afterActivate:wt("afterActivate"),beforeDeactivate:wt("beforeDeactivate"),afterDeactivate:wt("afterDeactivate")});function wt(e){return function(t,s){return"function"==typeof s?new bt(e,t,s):new bt(e,null,t)}}function xt(e,s){let n;function r(e,s){arguments.length>1&&(n.property=s),i.define(Ct.name,St.create(s,n),e.constructor,s),t.annotation.appendTo(e.constructor,Ct.keyFrom(s))}return arguments.length>1?(n={},void r(e,s)):"string"==typeof e?(n={},r):(n=void 0===e?{}:e,r)}function kt(e){return e.startsWith(Ct.name)}const Ct={name:t.annotation.keyFor("children-observer"),keyFrom:e=>`${Ct.name}:${e}`,from(...e){const t={},s=Array.isArray;function i(e){t[e]=St.create(e)}return e.forEach((function(e){s(e)?e.forEach(i):e instanceof St?t[e.property]=e:void 0!==e&&Object.keys(e).forEach((s=>function(e,s){t[e]=St.create(e,s)}(s,e)))})),t},getAll(e){const n=Ct.name.length+1,r=[],o=s(e);let a,l,h,c=o.length,u=0;for(;--c>=0;){h=o[c],a=t.annotation.getKeys(h).filter(kt),l=a.length;for(let e=0;e<l;++e)r[u++]=i.getOwn(Ct.name,h,a[e].slice(n))}return r}},$t={childList:!0};class St{constructor(e,t,s,i,n,r){this.callback=e,this.property=t,this.options=s,this.query=i,this.filter=n,this.map=r}static create(e,t={}){var s;return new St(n(t.callback,`${e}Changed`),n(t.property,e),null!==(s=t.options)&&void 0!==s?s:$t,t.query,t.filter,t.map)}}let Tt=class{constructor(e,t,s,i,n=At,r=Et,o=Ot,a){this.controller=e,this.obj=t,this.propertyKey=s,this.query=n,this.filter=r,this.map=o,this.options=a,this.observing=!1,this.children=void 0,this.observer=void 0,this.callback=t[i],Reflect.defineProperty(this.obj,this.propertyKey,{enumerable:!0,configurable:!0,get:()=>this.getValue(),set:()=>{}})}getValue(){return this.observing?this.children:this.get()}setValue(e){}start(){var e;this.observing||(this.observing=!0,this.children=this.get(),(null!==(e=this.observer)&&void 0!==e?e:this.observer=new this.controller.host.ownerDocument.defaultView.MutationObserver((()=>{this.onChildrenChanged()}))).observe(this.controller.host,this.options))}stop(){this.observing&&(this.observing=!1,this.observer.disconnect(),this.children=a)}onChildrenChanged(){this.children=this.get(),void 0!==this.callback&&this.callback.call(this.obj),this.subs.notify(this.children,void 0,0)}get(){return function(e,t,s,i){var n;const r=t(e),o=r.length,a=[];let l,h,c,u=0;for(;u<o;++u)l=r[u],h=Wt.for(l,Pt),c=null!==(n=null==h?void 0:h.viewModel)&&void 0!==n?n:null,s(l,h,c)&&a.push(i(l,h,c));return a}(this.controller,this.query,this.filter,this.map)}};function At(e){return e.host.childNodes}function Et(e,t,s){return!!s}function Ot(e,t,s){return s}Tt=re([M()],Tt);const Pt={optional:!0};function Rt(e){return function(t){return Lt.define(e,t)}}function Mt(e){return function(t){return Lt.define("string"==typeof e?{isTemplateController:!0,name:e}:{isTemplateController:!0,...e},t)}}class Bt{constructor(e,t,s,i,n,r,o,a,l){this.Type=e,this.name=t,this.aliases=s,this.key=i,this.defaultBindingMode=n,this.isTemplateController=r,this.bindables=o,this.noMultiBindings=a,this.watches=l}static create(e,t){let s,i;return"string"==typeof e?(s=e,i={name:s}):(s=e.name,i=e),new Bt(t,n(Lt.getAnnotation(t,"name"),s),d(Lt.getAnnotation(t,"aliases"),i.aliases,t.aliases),Lt.keyFrom(s),n(Lt.getAnnotation(t,"defaultBindingMode"),i.defaultBindingMode,t.defaultBindingMode,R.toView),n(Lt.getAnnotation(t,"isTemplateController"),i.isTemplateController,t.isTemplateController,!1),he.from(...he.getAll(t),Lt.getAnnotation(t,"bindables"),t.bindables,i.bindables),n(Lt.getAnnotation(t,"noMultiBindings"),i.noMultiBindings,t.noMultiBindings,!1),d(Nt.getAnnotation(t),t.watches))}register(e){const{Type:t,key:s,aliases:i}=this;c.transient(s,t).register(e),c.aliasTo(s,t).register(e),j(i,Lt,s,e)}}const Lt={name:t.resource.keyFor("custom-attribute"),keyFrom:e=>`${Lt.name}:${e}`,isType:e=>"function"==typeof e&&i.hasOwn(Lt.name,e),for(e,t){var s;return null!==(s=di(e,Lt.keyFrom(t)))&&void 0!==s?s:void 0},define(e,s){const n=Bt.create(e,s);return i.define(Lt.name,n,n.Type),i.define(Lt.name,n,n),t.resource.appendTo(s,Lt.name),n.Type},getDefinition(e){const t=i.getOwn(Lt.name,e);if(void 0===t)throw new Error(`No definition found for type ${e.name}`);return t},annotate(e,s,n){i.define(t.annotation.keyFor(s),n,e)},getAnnotation:(e,s)=>i.getOwn(t.annotation.keyFor(s),e)};function jt(e,t){if(!e)throw new Error("Invalid watch config. Expected an expression or a fn");return function(s,i,n){const r=null==i,o=r?s:s.constructor,a=new Vt(e,r?t:n.value);if(r){if("function"!=typeof t&&(null==t||!(t in o.prototype)))throw new Error(`Invalid change handler config. Method "${String(t)}" not found in class ${o.name}`)}else if("function"!=typeof(null==n?void 0:n.value))throw new Error(`decorated target ${String(i)} is not a class method.`);Nt.add(o,a),Lt.isType(o)&&Lt.getDefinition(o).watches.push(a),Wt.isType(o)&&Wt.getDefinition(o).watches.push(a)}}class Vt{constructor(e,t){this.expression=e,this.callback=t}}const It=a,Nt={name:t.annotation.keyFor("watch"),add(e,t){let s=i.getOwn(Nt.name,e);null==s&&i.define(Nt.name,s=[],e),s.push(t)},getAnnotation(e){var t;return null!==(t=i.getOwn(Nt.name,e))&&void 0!==t?t:It}};function qt(e){return function(t){return Wt.define(e,t)}}function Dt(e){return void 0===e?function(e){Wt.annotate(e,"shadowOptions",{mode:"open"})}:"function"!=typeof e?function(t){Wt.annotate(t,"shadowOptions",e)}:void Wt.annotate(e,"shadowOptions",{mode:"open"})}function Ft(e){if(void 0===e)return function(e){Wt.annotate(e,"containerless",!0)};Wt.annotate(e,"containerless",!0)}const zt=new WeakMap;class Ut{constructor(e,t,s,i,n,r,o,a,l,h,c,u,d,p,g,f,v,m,b,y){this.Type=e,this.name=t,this.aliases=s,this.key=i,this.cache=n,this.template=r,this.instructions=o,this.dependencies=a,this.injectable=l,this.needsCompile=h,this.surrogates=c,this.bindables=u,this.childrenObservers=d,this.containerless=p,this.isStrictBinding=g,this.shadowOptions=f,this.hasSlots=v,this.enhance=m,this.watches=b,this.processContent=y}static create(e,t=null){if(null===t){const s=e;if("string"==typeof s)throw new Error(`Cannot create a custom element definition with only a name and no type: ${e}`);const i=p("name",s,Wt.generateName);return t="function"==typeof s.Type?s.Type:Wt.generateType(g(i)),new Ut(t,i,d(s.aliases),p("key",s,(()=>Wt.keyFrom(i))),p("cache",s,(()=>0)),p("template",s,(()=>null)),d(s.instructions),d(s.dependencies),p("injectable",s,(()=>null)),p("needsCompile",s,(()=>!0)),d(s.surrogates),he.from(s.bindables),Ct.from(s.childrenObservers),p("containerless",s,(()=>!1)),p("isStrictBinding",s,(()=>!1)),p("shadowOptions",s,(()=>null)),p("hasSlots",s,(()=>!1)),p("enhance",s,(()=>!1)),p("watches",s,(()=>a)),f("processContent",t,(()=>null)))}if("string"==typeof e)return new Ut(t,e,d(Wt.getAnnotation(t,"aliases"),t.aliases),Wt.keyFrom(e),f("cache",t,(()=>0)),f("template",t,(()=>null)),d(Wt.getAnnotation(t,"instructions"),t.instructions),d(Wt.getAnnotation(t,"dependencies"),t.dependencies),f("injectable",t,(()=>null)),f("needsCompile",t,(()=>!0)),d(Wt.getAnnotation(t,"surrogates"),t.surrogates),he.from(...he.getAll(t),Wt.getAnnotation(t,"bindables"),t.bindables),Ct.from(...Ct.getAll(t),Wt.getAnnotation(t,"childrenObservers"),t.childrenObservers),f("containerless",t,(()=>!1)),f("isStrictBinding",t,(()=>!1)),f("shadowOptions",t,(()=>null)),f("hasSlots",t,(()=>!1)),f("enhance",t,(()=>!1)),d(Nt.getAnnotation(t),t.watches),f("processContent",t,(()=>null)));const s=p("name",e,Wt.generateName);return new Ut(t,s,d(Wt.getAnnotation(t,"aliases"),e.aliases,t.aliases),Wt.keyFrom(s),v("cache",e,t,(()=>0)),v("template",e,t,(()=>null)),d(Wt.getAnnotation(t,"instructions"),e.instructions,t.instructions),d(Wt.getAnnotation(t,"dependencies"),e.dependencies,t.dependencies),v("injectable",e,t,(()=>null)),v("needsCompile",e,t,(()=>!0)),d(Wt.getAnnotation(t,"surrogates"),e.surrogates,t.surrogates),he.from(...he.getAll(t),Wt.getAnnotation(t,"bindables"),t.bindables,e.bindables),Ct.from(...Ct.getAll(t),Wt.getAnnotation(t,"childrenObservers"),t.childrenObservers,e.childrenObservers),v("containerless",e,t,(()=>!1)),v("isStrictBinding",e,t,(()=>!1)),v("shadowOptions",e,t,(()=>null)),v("hasSlots",e,t,(()=>!1)),v("enhance",e,t,(()=>!1)),d(e.watches,Nt.getAnnotation(t),t.watches),v("processContent",e,t,(()=>null)))}static getOrCreate(e){if(e instanceof Ut)return e;if(zt.has(e))return zt.get(e);const t=Ut.create(e);return zt.set(e,t),i.define(Wt.name,t,t.Type),t}register(e){const{Type:t,key:s,aliases:i}=this;e.has(s,!1)||(c.transient(s,t).register(e),c.aliasTo(s,t).register(e),j(i,Wt,s,e))}}const Kt={name:void 0,searchParents:!1,optional:!1},Wt={name:t.resource.keyFor("custom-element"),keyFrom:e=>`${Wt.name}:${e}`,isType:e=>"function"==typeof e&&i.hasOwn(Wt.name,e),for(e,t=Kt){if(void 0===t.name&&!0!==t.searchParents){const s=di(e,Wt.name);if(null===s){if(!0===t.optional)return null;throw new Error("The provided node is not a custom element or containerless host.")}return s}if(void 0!==t.name){if(!0!==t.searchParents){const s=di(e,Wt.name);if(null===s)throw new Error("The provided node is not a custom element or containerless host.");return s.is(t.name)?s:void 0}let s=e,i=!1;for(;null!==s;){const e=di(s,Wt.name);if(null!==e&&(i=!0,e.is(t.name)))return e;s=yi(s)}if(i)return;throw new Error("The provided node does does not appear to be part of an Aurelia app DOM tree, or it was added to the DOM in a way that Aurelia cannot properly resolve its position in the component tree.")}let s=e;for(;null!==s;){const e=di(s,Wt.name);if(null!==e)return e;s=yi(s)}throw new Error("The provided node does does not appear to be part of an Aurelia app DOM tree, or it was added to the DOM in a way that Aurelia cannot properly resolve its position in the component tree.")},define(e,s){const n=Ut.create(e,s);return i.define(Wt.name,n,n.Type),i.define(Wt.name,n,n),t.resource.appendTo(n.Type,Wt.name),n.Type},getDefinition(e){const t=i.getOwn(Wt.name,e);if(void 0===t)throw new Error(`No definition found for type ${e.name}`);return t},annotate(e,s,n){i.define(t.annotation.keyFor(s),n,e)},getAnnotation:(e,s)=>i.getOwn(t.annotation.keyFor(s),e),generateName:function(){let e=0;return function(){return"unnamed-"+ ++e}}(),createInjectable(){const e=function(t,s,i){return l.getOrCreateAnnotationParamTypes(t)[i]=e,t};return e.register=function(t){return{resolve:(t,s)=>s.has(e,!0)?s.get(e):null}},e},generateType:function(){const e={value:"",writable:!1,enumerable:!1,configurable:!0},t={};return function(s,i=t){const n=class{};return e.value=s,Reflect.defineProperty(n,"name",e),i!==t&&Object.assign(n.prototype,i),n}}()},Ht=t.annotation.keyFor("processContent");function Gt(e){return void 0===e?function(e,t,s){i.define(Ht,_t(e,t),e)}:function(t){e=_t(t,e);const s=i.getOwn(Wt.name,t);return void 0!==s?s.processContent=e:i.define(Ht,e,t),t}}function _t(e,t){"string"==typeof t&&(t=e[t]);const s=typeof t;if("function"!==s)throw new Error(`Invalid @processContent hook. Expected the hook to be a function (when defined in a class, it needs to be a static function) but got a ${s}.`);return t}const Qt=l.createInterface("IViewFactory");class Xt{constructor(e,t){this.name=e,this.context=t,this.isCaching=!1,this.cache=null,this.cacheSize=-1,this.container=t.container}setCacheSize(e,t){e&&("*"===e?e=Xt.maxCacheSize:"string"==typeof e&&(e=parseInt(e,10)),-1!==this.cacheSize&&t||(this.cacheSize=e)),this.cache=this.cacheSize>0?[]:null,this.isCaching=this.cacheSize>0}canReturnToCache(e){return null!=this.cache&&this.cache.length<this.cacheSize}tryReturnToCache(e){return!!this.canReturnToCache(e)&&(this.cache.push(e),!0)}create(e,t){const s=this.cache;let i;return null!=s&&s.length>0?(i=s.pop(),i):(i=Ks.forSyntheticView(null,this.context,this,e,t),i)}}Xt.maxCacheSize=65535;const Yt=new WeakSet;function Zt(e){return!Yt.has(e)}function Jt(e){return Yt.add(e),Ut.create(e)}const es={name:t.resource.keyFor("views"),has:e=>"function"==typeof e&&(i.hasOwn(es.name,e)||"$views"in e),get(e){if("function"==typeof e&&"$views"in e){const t=e.$views.filter(Zt).map(Jt);for(const s of t)es.add(e,s)}let t=i.getOwn(es.name,e);return void 0===t&&i.define(es.name,t=[],e),t},add(e,t){const s=Ut.create(t);let n=i.getOwn(es.name,e);return void 0===n?i.define(es.name,n=[s],e):n.push(s),n}};function ts(e){return function(t){es.add(t,e)}}const ss=l.createInterface("IViewLocator",(e=>e.singleton(is)));class is{constructor(){this.modelInstanceToBoundComponent=new WeakMap,this.modelTypeToUnboundComponent=new Map}getViewComponentForObject(e,t){if(e){const s=es.has(e.constructor)?es.get(e.constructor):[],i="function"==typeof t?t(e,s):this.getViewName(s,t);return this.getOrCreateBoundComponent(e,s,i)}return null}getOrCreateBoundComponent(e,t,s){let i,n=this.modelInstanceToBoundComponent.get(e);if(void 0===n?(n={},this.modelInstanceToBoundComponent.set(e,n)):i=n[s],void 0===i){const r=this.getOrCreateUnboundComponent(e,t,s);i=Wt.define(Wt.getDefinition(r),class extends r{constructor(){super(e)}}),n[s]=i}return i}getOrCreateUnboundComponent(e,t,s){let i,n=this.modelTypeToUnboundComponent.get(e.constructor);if(void 0===n?(n={},this.modelTypeToUnboundComponent.set(e.constructor,n)):i=n[s],void 0===i){i=Wt.define(this.getView(t,s),class{constructor(e){this.viewModel=e}define(e,t,s){const i=this.viewModel;if(e.scope=V.fromParent(e.scope,i),void 0!==i.define)return i.define(e,t,s)}});const r=i.prototype;"hydrating"in e&&(r.hydrating=function(e){this.viewModel.hydrating(e)}),"hydrated"in e&&(r.hydrated=function(e){this.viewModel.hydrated(e)}),"created"in e&&(r.created=function(e){this.viewModel.created(e)}),"binding"in e&&(r.binding=function(e,t,s){return this.viewModel.binding(e,t,s)}),"bound"in e&&(r.bound=function(e,t,s){return this.viewModel.bound(e,t,s)}),"attaching"in e&&(r.attaching=function(e,t,s){return this.viewModel.attaching(e,t,s)}),"attached"in e&&(r.attached=function(e,t){return this.viewModel.attached(e,t)}),"detaching"in e&&(r.detaching=function(e,t,s){return this.viewModel.detaching(e,t,s)}),"unbinding"in e&&(r.unbinding=function(e,t,s){return this.viewModel.unbinding(e,t,s)}),"dispose"in e&&(r.dispose=function(){this.viewModel.dispose()}),n[s]=i}return i}getViewName(e,t){return t||(1===e.length?e[0].name:"default-view")}getView(e,t){const s=e.find((e=>e.name===t));if(void 0===s)throw new Error(`Could not find view: ${t}`);return s}}const ns=new WeakMap,rs=new WeakMap;function os(e){return e instanceof ds}let as=0;function ls(e,t){const s=Ut.getOrCreate(e);let i=ns.get(s);void 0===i&&ns.set(s,i=new WeakMap);let n=i.get(t);return void 0===n&&i.set(t,n=new ds(s,t)),n}ls.count=0,Reflect.defineProperty(ls,"count",{get:()=>as});const hs=new WeakMap,cs=Symbol(),us=new WeakMap;class ds{constructor(e,t){var s,i;this.definition=e,this.fragment=null,this.factory=void 0,this.isCompiled=!1,this.renderers=Object.create(null),this.compiledDefinition=void 0,++as,this.container=t;const n=null!==(s=(i=t.root)[cs])&&void 0!==s?s:i[cs]=t.root.getAll(an);let r,o=0;for(;o<n.length;++o)r=n[o],this.renderers[r.instructionType]=r;this.root=t.root,this.platform=t.get(Ve)}get id(){return this.container.id}compile(e){let t;if(this.isCompiled)return this;this.isCompiled=!0;const s=this.definition;if(s.needsCompile){const i=this.container,n=i.get(on);let r=us.get(i.root);null==r&&us.set(i.root,r=new WeakMap);let o=r.get(s);null==o?r.set(s,o=n.compile(s,i,e)):i.register(...o.dependencies),t=this.compiledDefinition=o}else t=this.compiledDefinition=s;if(t.register(this.container),rs.has(t))this.fragment=rs.get(t);else{const e=this.platform.document,s=t.template;if(null===s||!0===this.definition.enhance)this.fragment=null;else if(s instanceof this.platform.Node)"TEMPLATE"===s.nodeName?this.fragment=e.adoptNode(s.content):(this.fragment=e.adoptNode(e.createDocumentFragment())).appendChild(s);else{const t=e.createElement("template");e.adoptNode(t.content),"string"==typeof s&&(t.innerHTML=s),this.fragment=t.content}rs.set(t,this.fragment)}return this}getViewFactory(e){let t=this.factory;return void 0===t&&(void 0===e&&(e=this.definition.name),t=this.factory=new Xt(e,this)),t}createNodes(){if(!0===this.compiledDefinition.enhance)return new Ci(this.platform,this.compiledDefinition.template);if(null===this.fragment){let e=hs.get(this.platform);return void 0===e&&hs.set(this.platform,e=new Ci(this.platform,this.platform.document.createDocumentFragment())),e}return new Ci(this.platform,this.fragment.cloneNode(!0))}render(e,t,s,i,n){if(s.length!==i.instructions.length)throw new Error(`The compiled template is not aligned with the render instructions. There are ${s.length} targets and ${i.instructions.length} instructions.`);for(let n=0;n<s.length;++n)this.renderChildren(e,i.instructions[n],t,s[n]);null!=n&&this.renderChildren(e,i.surrogates,t,n)}renderChildren(e,t,s,i){for(let n=0;n<t.length;++n){const r=t[n];this.renderers[r.type].render(e,this,s,i,r)}}dispose(){throw new Error("Cannot dispose a render context")}}class ps{constructor(e){this.obj=e,this.value="",this.oldValue="",this.doNotCache=!0,this.nameIndex={},this.version=0,this.hasChanges=!1,this.isActive=!1,this.type=6}getValue(){return this.value}setValue(e,t){this.value=e,this.hasChanges=e!==this.oldValue,0==(256&t)&&this.flushChanges(t)}flushChanges(e){if(this.hasChanges){this.hasChanges=!1;const e=this.value,t=this.nameIndex;let s=this.version;this.oldValue=e;const i=gs(e);if(i.length>0&&this.addClassesAndUpdateIndex(i),this.version+=1,0===s)return;s-=1;for(const e in t)Object.prototype.hasOwnProperty.call(t,e)&&t[e]===s&&this.obj.classList.remove(e)}}addClassesAndUpdateIndex(e){const t=this.obj;for(let s=0,i=e.length;s<i;s++){const i=e[s];0!==i.length&&(this.nameIndex[i]=this.version,t.classList.add(i))}}}function gs(e){if("string"==typeof e)return fs(e);if("object"!=typeof e)return a;if(e instanceof Array){const t=e.length;if(t>0){const s=[];for(let i=0;i<t;++i)s.push(...gs(e[i]));return s}return a}const t=[];for(const s in e)Boolean(e[s])&&(s.includes(" ")?t.push(...fs(s)):t.push(s));return t}function fs(e){const t=e.match(/\S+/g);return null===t?a:t}function vs(...e){return new ms(e)}class ms{constructor(e){this.modules=e}register(e){var t;const s=Object.assign({},...this.modules),i=Lt.define({name:"class",bindables:["value"]},((t=class{constructor(e){this.element=e}binding(){this.valueChanged()}valueChanged(){this.element.className=this.value?gs(this.value).map((e=>s[e]||e)).join(" "):""}}).inject=[gi],t));e.register(i)}}function bs(...e){return new ws(e)}const ys=l.createInterface("IShadowDOMStyleFactory",(e=>e.cachedCallback((e=>Ss.supported(e.get(Ve))?e.get(xs):e.get(ks)))));class ws{constructor(e){this.css=e}register(e){const t=e.get($s),s=e.get(ys);e.register(c.instance(Cs,s.createStyles(this.css,t)))}}let xs=class{constructor(e){this.p=e,this.cache=new Map}createStyles(e,t){return new Ss(this.p,e,this.cache,t)}};xs=re([oe(0,Ve)],xs);let ks=class{constructor(e){this.p=e}createStyles(e,t){return new Ts(this.p,e,t)}};ks=re([oe(0,Ve)],ks);const Cs=l.createInterface("IShadowDOMStyles"),$s=l.createInterface("IShadowDOMGlobalStyles",(e=>e.instance({applyTo:o})));class Ss{constructor(e,t,s,i=null){this.sharedStyles=i,this.styleSheets=t.map((t=>{let i;return t instanceof e.CSSStyleSheet?i=t:(i=s.get(t),void 0===i&&(i=new e.CSSStyleSheet,i.replaceSync(t),s.set(t,i))),i}))}static supported(e){return"adoptedStyleSheets"in e.ShadowRoot.prototype}applyTo(e){null!==this.sharedStyles&&this.sharedStyles.applyTo(e),e.adoptedStyleSheets=[...e.adoptedStyleSheets,...this.styleSheets]}}class Ts{constructor(e,t,s=null){this.p=e,this.localStyles=t,this.sharedStyles=s}applyTo(e){const t=this.localStyles,s=this.p;for(let i=t.length-1;i>-1;--i){const n=s.document.createElement("style");n.innerHTML=t[i],e.prepend(n)}null!==this.sharedStyles&&this.sharedStyles.applyTo(e)}}const As={shadowDOM:e=>yt.beforeCreate(m,(t=>{if(null!=e.sharedStyles){const s=t.get(ys);t.register(c.instance($s,s.createStyles(e.sharedStyles,null)))}}))},{enter:Es,exit:Os}=I,{wrap:Ps,unwrap:Rs}=N;class Ms{constructor(e,t,s,i,n){this.obj=e,this.observerLocator=t,this.get=s,this.cb=i,this.useProxy=n,this.interceptor=this,this.value=void 0,this.isBound=!1,this.running=!1}handleChange(){this.run()}handleCollectionChange(){this.run()}$bind(){this.isBound||(this.isBound=!0,this.compute())}$unbind(){this.isBound&&(this.isBound=!1,this.obs.clear(!0))}run(){if(!this.isBound||this.running)return;const e=this.obj,t=this.value,s=this.compute();Object.is(s,t)||this.cb.call(e,s,t,e)}compute(){this.running=!0,this.obs.version++;try{return Es(this),this.value=Rs(this.get.call(void 0,this.useProxy?Ps(this.obj):this.obj,this))}finally{this.obs.clear(!1),this.running=!1,Os(this)}}}class Bs{constructor(e,t,s,i,n){this.scope=e,this.locator=t,this.observerLocator=s,this.expression=i,this.callback=n,this.interceptor=this,this.isBound=!1,this.obj=e.bindingContext}handleChange(e){const t=this.expression,s=this.obj,i=this.value;10082===t.$kind&&1===this.obs.count||(this.obs.version++,e=t.evaluate(0,this.scope,null,this.locator,this),this.obs.clear(!1)),Object.is(e,i)||(this.value=e,this.callback.call(s,e,i,s))}$bind(){this.isBound||(this.isBound=!0,this.obs.version++,this.value=this.expression.evaluate(0,this.scope,null,this.locator,this),this.obs.clear(!1))}$unbind(){this.isBound&&(this.isBound=!1,this.obs.clear(!0),this.value=void 0)}}L(Ms),L(Bs);const Ls=l.createInterface("ILifecycleHooks");class js{constructor(e,t){this.definition=e,this.instance=t}}class Vs{constructor(e,t){this.Type=e,this.propertyNames=t}static create(e,t){const s=new Set;let i=t.prototype;for(;i!==Object.prototype;){for(const e of Object.getOwnPropertyNames(i))"constructor"!==e&&s.add(e);i=Object.getPrototypeOf(i)}return new Vs(t,s)}register(e){c.singleton(Ls,this.Type).register(e)}}const Is=new WeakMap,Ns={name:t.annotation.keyFor("lifecycle-hooks"),define(e,s){const n=Vs.create(e,s);return i.define(Ns.name,n,s),t.resource.appendTo(s,Ns.name),n.Type},resolve(e){let t=Is.get(e);if(void 0===t){t=new qs;const s=e.root,n=s.id===e.id?e.getAll(Ls):e.has(Ls,!1)?[...s.getAll(Ls),...e.getAll(Ls)]:s.getAll(Ls);let r,o,a,l,h;for(r of n)for(l of(o=i.getOwn(Ns.name,r.constructor),a=new js(o,r),o.propertyNames))h=t[l],void 0===h?t[l]=[a]:h.push(a)}return t}};class qs{}function Ds(){return function(e){return Ns.define({},e)}}var Fs;!function(e){e[e.none=0]="none",e[e.host=1]="host",e[e.shadowRoot=2]="shadowRoot",e[e.location=3]="location"}(Fs||(Fs={}));const zs={optional:!0},Us=new WeakMap;class Ks{constructor(e,t,s,i,n,r,o,l,h){switch(this.root=e,this.ctxCt=t,this.container=s,this.vmKind=i,this.flags=n,this.definition=r,this.viewFactory=o,this.viewModel=l,this.host=h,this.id=b("au$component"),this.head=null,this.tail=null,this.next=null,this.parent=null,this.bindings=null,this.children=null,this.hasLockedScope=!1,this.isStrictBinding=!1,this.scope=null,this.hostScope=null,this.isBound=!1,this.hostController=null,this.mountTarget=0,this.shadowRoot=null,this.nodes=null,this.context=null,this.location=null,this.lifecycleHooks=null,this.state=0,this.logger=null,this.debug=!1,this.fullyNamed=!1,this.childrenObs=a,this.$initiator=null,this.$flags=0,this.$resolve=void 0,this.$reject=void 0,this.$promise=void 0,this.activatingStack=0,this.detachingStack=0,this.unbindingStack=0,null===e&&s.has(ai,!0)&&(this.root=s.get(ai)),this.platform=s.get(Ve),i){case 1:case 0:this.hooks=new Zs(l);break;case 2:this.hooks=Zs.none}}get isActive(){return(3&this.state)>0&&0==(4&this.state)}get name(){var e;if(null===this.parent)switch(this.vmKind){case 1:return`[${this.definition.name}]`;case 0:return this.definition.name;case 2:return this.viewFactory.name}switch(this.vmKind){case 1:return`${this.parent.name}>[${this.definition.name}]`;case 0:return`${this.parent.name}>${this.definition.name}`;case 2:return this.viewFactory.name===(null===(e=this.parent.definition)||void 0===e?void 0:e.name)?`${this.parent.name}[view]`:`${this.parent.name}[view:${this.viewFactory.name}]`}}static getCached(e){return Us.get(e)}static getCachedOrThrow(e){const t=Ks.getCached(e);if(void 0===t)throw new Error(`There is no cached controller for the provided ViewModel: ${String(e)}`);return t}static forCustomElement(e,t,s,i,n,r,o=0,a=!0,l){if(Us.has(i))return Us.get(i);l=null!=l?l:Wt.getDefinition(i.constructor);const h=new Ks(e,t,s,0,o,l,null,i,n);return s.register(...l.dependencies),s.registerResolver(ni,new y("IHydrationContext",new ri(h,r,t.get(w(ni))))),Us.set(i,h),a&&h.hydrateCustomElement(r),h}static forCustomAttribute(e,t,s,i,n=0,r){if(Us.has(s))return Us.get(s);r=null!=r?r:Lt.getDefinition(s.constructor);const o=new Ks(e,t,t,1,n,r,null,s,i);return Us.set(s,o),o.hydrateCustomAttribute(),o}static forSyntheticView(e,t,s,i=0,n){const r=new Ks(e,t.container,t.container,2,i,null,s,null,null);return r.parent=null!=n?n:null,r.hydrateSynthetic(t),r}hydrateCustomElement(e){var t;this.logger=this.container.get(x).root,this.debug=this.logger.config.level<=1,this.debug&&(this.logger=this.logger.scopeTo(this.name));const s=this.container,i=this.flags,n=this.viewModel;let r=this.definition;if(this.scope=V.create(n,null,!0),r.watches.length>0&&Qs(this,s,r,n),Hs(this,r,i,n),this.childrenObs=function(e,t,s,i){const n=t.childrenObservers,r=Object.getOwnPropertyNames(n),o=r.length;if(o>0){const t=Ws(i),s=[];let a,l,h=0;for(;h<o;++h)a=r[h],null==t[a]&&(l=n[a],s[s.length]=t[a]=new Tt(e,i,a,l.callback,l.query,l.filter,l.map,l.options));return s}return a}(this,r,0,n),this.hooks.hasDefine){this.debug&&this.logger.trace("invoking define() hook");const e=n.define(this,this.ctxCt,r);void 0!==e&&e!==r&&(r=Ut.getOrCreate(e))}this.context=ls(r,s),this.lifecycleHooks=Ns.resolve(s),r.register(s),null!==r.injectable&&s.registerResolver(r.injectable,new y("definition.injectable",n)),(null===(t=this.root)||void 0===t?void 0:t.controller)!==this&&(this.hydrate(e),this.hydrateChildren())}hydrate(e){this.hooks.hasHydrating&&(this.debug&&this.logger.trace("invoking hydrating() hook"),this.viewModel.hydrating(this));const t=this.context.compile(e),{shadowOptions:s,isStrictBinding:i,hasSlots:n,containerless:r}=t.compiledDefinition;if(this.isStrictBinding=i,null!==(this.hostController=Wt.for(this.host,zs))&&(this.host=this.platform.document.createElement(this.context.definition.name)),pi(this.host,Wt.name,this),pi(this.host,this.definition.key,this),null!==s||n){if(r)throw new Error("You cannot combine the containerless custom element option with Shadow DOM.");pi(this.shadowRoot=this.host.attachShadow(null!=s?s:Js),Wt.name,this),pi(this.shadowRoot,this.definition.key,this),this.mountTarget=2}else r?(pi(this.location=xi(this.host),Wt.name,this),pi(this.location,this.definition.key,this),this.mountTarget=3):this.mountTarget=1;this.viewModel.$controller=this,this.nodes=t.createNodes(),this.hooks.hasHydrated&&(this.debug&&this.logger.trace("invoking hydrated() hook"),this.viewModel.hydrated(this))}hydrateChildren(){const e=this.nodes.findTargets();this.context.render(this.flags,this,e,this.context.compiledDefinition,this.host),this.hooks.hasCreated&&(this.debug&&this.logger.trace("invoking created() hook"),this.viewModel.created(this))}hydrateCustomAttribute(){const e=this.definition,t=this.viewModel;e.watches.length>0&&Qs(this,this.container,e,t),Hs(this,e,this.flags,t),t.$controller=this,this.lifecycleHooks=Ns.resolve(this.container),this.hooks.hasCreated&&(this.debug&&this.logger.trace("invoking created() hook"),this.viewModel.created(this))}hydrateSynthetic(e){this.context=e;const t=e.compile(null),s=t.compiledDefinition;this.isStrictBinding=s.isStrictBinding;const i=(this.nodes=t.createNodes()).findTargets();t.render(this.flags,this,i,s,void 0)}activate(e,t,s,i,n){var r;switch(this.state){case 0:case 8:if(null!==t&&!t.isActive)return;this.state=1;break;case 2:return;case 32:throw new Error(`${this.name} trying to activate a controller that is disposed.`);default:throw new Error(`${this.name} unexpected state: ${si(this.state)}.`)}switch(this.parent=t,this.debug&&!this.fullyNamed&&(this.fullyNamed=!0,(null!==(r=this.logger)&&void 0!==r?r:this.logger=this.container.get(x).root.scopeTo(this.name)).trace("activate()")),2===this.vmKind&&(this.hostScope=null!=n?n:null),s|=2,this.vmKind){case 0:this.scope.parentScope=null!=i?i:null;break;case 1:this.scope=null!=i?i:null;break;case 2:if(null==i)throw new Error("Scope is null or undefined");this.hasLockedScope||(this.scope=i)}if(this.isStrictBinding&&(s|=1),this.$initiator=e,this.$flags=s,this.enterActivating(),this.hooks.hasBinding){this.debug&&this.logger.trace("binding()");const e=this.viewModel.binding(this.$initiator,this.parent,this.$flags);if(e instanceof Promise)return this.ensurePromise(),e.then((()=>{this.bind()})).catch((e=>{this.reject(e)})),this.$promise}return this.bind(),this.$promise}bind(){if(this.debug&&this.logger.trace("bind()"),this.childrenObs.length)for(let e=0;e<this.childrenObs.length;++e)this.childrenObs[e].start();if(null!==this.bindings)for(let e=0;e<this.bindings.length;++e)this.bindings[e].$bind(this.$flags,this.scope,this.hostScope);if(this.hooks.hasBound){this.debug&&this.logger.trace("bound()");const e=this.viewModel.bound(this.$initiator,this.parent,this.$flags);if(e instanceof Promise)return this.ensurePromise(),void e.then((()=>{this.isBound=!0,this.attach()})).catch((e=>{this.reject(e)}))}this.isBound=!0,this.attach()}append(...e){switch(this.mountTarget){case 1:this.host.append(...e);break;case 2:this.shadowRoot.append(...e);break;case 3:for(let t=0;t<e.length;++t)this.location.parentNode.insertBefore(e[t],this.location)}}attach(){var e;if(this.debug&&this.logger.trace("attach()"),null!==this.hostController)switch(this.mountTarget){case 1:case 2:this.hostController.append(this.host);break;case 3:this.hostController.append(this.location.$start,this.location)}switch(this.mountTarget){case 1:this.nodes.appendTo(this.host,null===(e=this.definition)||void 0===e?void 0:e.enhance);break;case 2:{const e=this.container;(e.has(Cs,!1)?e.get(Cs):e.get($s)).applyTo(this.shadowRoot),this.nodes.appendTo(this.shadowRoot);break}case 3:this.nodes.insertBefore(this.location)}if(this.hooks.hasAttaching){this.debug&&this.logger.trace("attaching()");const e=this.viewModel.attaching(this.$initiator,this.parent,this.$flags);e instanceof Promise&&(this.ensurePromise(),this.enterActivating(),e.then((()=>{this.leaveActivating()})).catch((e=>{this.reject(e)})))}if(null!==this.children)for(let e=0;e<this.children.length;++e)this.children[e].activate(this.$initiator,this,this.$flags,this.scope,this.hostScope);this.leaveActivating()}deactivate(e,t,s){switch(-17&this.state){case 2:this.state=4;break;case 0:case 8:case 32:case 40:return;default:throw new Error(`${this.name} unexpected state: ${si(this.state)}.`)}if(this.debug&&this.logger.trace("deactivate()"),this.$initiator=e,this.$flags=s,e===this&&this.enterDetaching(),this.childrenObs.length)for(let e=0;e<this.childrenObs.length;++e)this.childrenObs[e].stop();if(null!==this.children)for(let t=0;t<this.children.length;++t)this.children[t].deactivate(e,this,s);if(this.hooks.hasDetaching){this.debug&&this.logger.trace("detaching()");const t=this.viewModel.detaching(this.$initiator,this.parent,this.$flags);t instanceof Promise&&(this.ensurePromise(),e.enterDetaching(),t.then((()=>{e.leaveDetaching()})).catch((t=>{e.reject(t)})))}if(null===e.head?e.head=this:e.tail.next=this,e.tail=this,e===this)return this.leaveDetaching(),this.$promise}removeNodes(){switch(this.vmKind){case 0:case 2:this.nodes.remove(),this.nodes.unlink()}if(null!==this.hostController)switch(this.mountTarget){case 1:case 2:this.host.remove();break;case 3:this.location.$start.remove(),this.location.remove()}}unbind(){this.debug&&this.logger.trace("unbind()");const e=4|this.$flags;if(null!==this.bindings)for(let t=0;t<this.bindings.length;++t)this.bindings[t].$unbind(e);switch(this.parent=null,this.vmKind){case 1:this.scope=null;break;case 2:this.hasLockedScope||(this.scope=null),16!=(16&this.state)||this.viewFactory.tryReturnToCache(this)||this.$initiator!==this||this.dispose();break;case 0:this.scope.parentScope=null}32==(32&e)&&this.$initiator===this&&this.dispose(),this.state=32&this.state|8,this.$initiator=null,this.resolve()}ensurePromise(){void 0===this.$promise&&(this.$promise=new Promise(((e,t)=>{this.$resolve=e,this.$reject=t})),this.$initiator!==this&&this.parent.ensurePromise())}resolve(){if(void 0!==this.$promise){const e=this.$resolve;this.$resolve=this.$reject=this.$promise=void 0,e()}}reject(e){if(void 0!==this.$promise){const t=this.$reject;this.$resolve=this.$reject=this.$promise=void 0,t(e)}this.$initiator!==this&&this.parent.reject(e)}enterActivating(){++this.activatingStack,this.$initiator!==this&&this.parent.enterActivating()}leaveActivating(){if(0==--this.activatingStack){if(this.hooks.hasAttached){this.debug&&this.logger.trace("attached()");const e=this.viewModel.attached(this.$initiator,this.$flags);if(e instanceof Promise)return this.ensurePromise(),void e.then((()=>{this.state=2,this.resolve(),this.$initiator!==this&&this.parent.leaveActivating()})).catch((e=>{this.reject(e)}))}this.state=2,this.resolve()}this.$initiator!==this&&this.parent.leaveActivating()}enterDetaching(){++this.detachingStack}leaveDetaching(){if(0==--this.detachingStack){this.debug&&this.logger.trace("detach()"),this.enterUnbinding(),this.removeNodes();let e=this.$initiator.head;for(;null!==e;){if(e!==this&&(e.debug&&e.logger.trace("detach()"),e.removeNodes()),e.hooks.hasUnbinding){e.debug&&e.logger.trace("unbinding()");const t=e.viewModel.unbinding(e.$initiator,e.parent,e.$flags);t instanceof Promise&&(this.ensurePromise(),this.enterUnbinding(),t.then((()=>{this.leaveUnbinding()})).catch((e=>{this.reject(e)})))}e=e.next}this.leaveUnbinding()}}enterUnbinding(){++this.unbindingStack}leaveUnbinding(){if(0==--this.unbindingStack){this.debug&&this.logger.trace("unbind()");let e=this.$initiator.head,t=null;for(;null!==e;)e!==this&&(e.isBound=!1,e.unbind()),t=e.next,e.next=null,e=t;this.head=this.tail=null,this.isBound=!1,this.unbind()}}addBinding(e){null===this.bindings?this.bindings=[e]:this.bindings[this.bindings.length]=e}addChild(e){null===this.children?this.children=[e]:this.children[this.children.length]=e}is(e){switch(this.vmKind){case 1:return Lt.getDefinition(this.viewModel.constructor).name===e;case 0:return Wt.getDefinition(this.viewModel.constructor).name===e;case 2:return this.viewFactory.name===e}}lockScope(e){this.scope=e,this.hasLockedScope=!0}setHost(e){return 0===this.vmKind&&(pi(e,Wt.name,this),pi(e,this.definition.key,this)),this.host=e,this.mountTarget=1,this}setShadowRoot(e){return 0===this.vmKind&&(pi(e,Wt.name,this),pi(e,this.definition.key,this)),this.shadowRoot=e,this.mountTarget=2,this}setLocation(e){return 0===this.vmKind&&(pi(e,Wt.name,this),pi(e,this.definition.key,this)),this.location=e,this.mountTarget=3,this}release(){this.state|=16}dispose(){this.debug&&this.logger.trace("dispose()"),32!=(32&this.state)&&(this.state|=32,this.hooks.hasDispose&&this.viewModel.dispose(),null!==this.children&&(this.children.forEach(oi),this.children=null),this.hostController=null,this.scope=null,this.nodes=null,this.context=null,this.location=null,this.viewFactory=null,null!==this.viewModel&&(Us.delete(this.viewModel),this.viewModel=null),this.viewModel=null,this.host=null,this.shadowRoot=null,this.root=null)}accept(e){if(!0===e(this))return!0;if(this.hooks.hasAccept&&!0===this.viewModel.accept(e))return!0;if(null!==this.children){const{children:t}=this;for(let s=0,i=t.length;s<i;++s)if(!0===t[s].accept(e))return!0}}}function Ws(e){let t=e.$observers;return void 0===t&&Reflect.defineProperty(e,"$observers",{enumerable:!1,value:t={}}),t}function Hs(e,t,s,i){const n=t.bindables,r=Object.getOwnPropertyNames(n),o=r.length;if(o>0){let t,s,a=0;const l=Ws(i);for(;a<o;++a)t=r[a],void 0===l[t]&&(s=n[t],l[t]=new ue(i,t,s.callback,s.set,e))}}const Gs=new Map,_s=e=>{let t=Gs.get(e);return null==t&&(t=new F(e,0),Gs.set(e,t)),t};function Qs(e,t,s,i){const n=t.get(q),r=t.get(D),o=s.watches,a=0===e.vmKind?e.scope:V.create(i,null,!0),l=o.length;let h,c,u,d=0;for(;l>d;++d){if(({expression:h,callback:c}=o[d]),c="function"==typeof c?c:Reflect.get(i,c),"function"!=typeof c)throw new Error(`Invalid callback for @watch decorator: ${String(c)}`);"function"==typeof h?e.addBinding(new Ms(i,n,h,c,!0)):(u="string"==typeof h?r.parse(h,53):_s(h),e.addBinding(new Bs(a,t,n,u,c)))}}function Xs(e){return e instanceof Ks&&0===e.vmKind}function Ys(e){return k(e)&&Wt.isType(e.constructor)}class Zs{constructor(e){this.hasDefine="define"in e,this.hasHydrating="hydrating"in e,this.hasHydrated="hydrated"in e,this.hasCreated="created"in e,this.hasBinding="binding"in e,this.hasBound="bound"in e,this.hasAttaching="attaching"in e,this.hasAttached="attached"in e,this.hasDetaching="detaching"in e,this.hasUnbinding="unbinding"in e,this.hasDispose="dispose"in e,this.hasAccept="accept"in e}}Zs.none=new Zs({});const Js={mode:"open"};var ei,ti;function si(e){const t=[];return 1==(1&e)&&t.push("activating"),2==(2&e)&&t.push("activated"),4==(4&e)&&t.push("deactivating"),8==(8&e)&&t.push("deactivated"),16==(16&e)&&t.push("released"),32==(32&e)&&t.push("disposed"),0===t.length?"none":t.join("|")}!function(e){e[e.customElement=0]="customElement",e[e.customAttribute=1]="customAttribute",e[e.synthetic=2]="synthetic"}(ei||(ei={})),function(e){e[e.none=0]="none",e[e.activating=1]="activating",e[e.activated=2]="activated",e[e.deactivating=4]="deactivating",e[e.deactivated=8]="deactivated",e[e.released=16]="released",e[e.disposed=32]="disposed"}(ti||(ti={}));const ii=l.createInterface("IController"),ni=l.createInterface("IHydrationContext");class ri{constructor(e,t,s){this.instruction=t,this.parent=s,this.controller=e}}function oi(e){e.dispose()}const ai=l.createInterface("IAppRoot"),li=l.createInterface("IWorkTracker",(e=>e.singleton(hi)));let hi=class{constructor(e){this.logger=e,this.stack=0,this.promise=null,this.resolve=null,this.logger=e.scopeTo("WorkTracker")}start(){this.logger.trace(`start(stack:${this.stack})`),++this.stack}finish(){if(this.logger.trace(`finish(stack:${this.stack})`),0==--this.stack){const e=this.resolve;null!==e&&(this.resolve=this.promise=null,e())}}wait(){if(this.logger.trace(`wait(stack:${this.stack})`),null===this.promise){if(0===this.stack)return Promise.resolve();this.promise=new Promise((e=>{this.resolve=e}))}return this.promise}};hi=re([oe(0,x)],hi);class ci{constructor(e,t,s,i,n=!1){if(this.config=e,this.platform=t,this.container=s,this.controller=void 0,this.hydratePromise=void 0,this.host=e.host,this.work=s.get(li),i.prepare(this),this.container.register(c.instance(gi,e.host)),n){const t=e.component;this.enhanceDefinition=Wt.getDefinition(Wt.isType(t)?Wt.define({...Wt.getDefinition(t),template:this.host,enhance:!0},t):Wt.define({name:void 0,template:this.host,enhance:!0}))}this.hydratePromise=C(this.runAppTasks("beforeCreate"),(()=>{const t=e.component,i=s.createChild();let n;n=Wt.isType(t)?this.container.get(t):e.component;const r=this.controller=Ks.forCustomElement(this,s,i,n,this.host,null,0,!1,this.enhanceDefinition);return r.hydrateCustomElement(null),C(this.runAppTasks("hydrating"),(()=>(r.hydrate(null),C(this.runAppTasks("hydrated"),(()=>{r.hydrateChildren(),this.hydratePromise=void 0})))))}))}activate(){return C(this.hydratePromise,(()=>C(this.runAppTasks("beforeActivate"),(()=>C(this.controller.activate(this.controller,null,2,void 0),(()=>this.runAppTasks("afterActivate")))))))}deactivate(){return C(this.runAppTasks("beforeDeactivate"),(()=>C(this.controller.deactivate(this.controller,null,0),(()=>this.runAppTasks("afterDeactivate")))))}runAppTasks(e){return $(...this.container.getAll(mt).reduce(((t,s)=>(s.slot===e&&t.push(s.run()),t)),[]))}dispose(){var e;null===(e=this.controller)||void 0===e||e.dispose()}}class ui{}function di(e,t){var s,i;return null!==(i=null===(s=e.$au)||void 0===s?void 0:s[t])&&void 0!==i?i:null}function pi(e,t,s){var i,n;(null!==(i=(n=e).$au)&&void 0!==i?i:n.$au=new ui)[t]=s}const gi=l.createInterface("INode"),fi=l.createInterface("IEventTarget",(e=>e.cachedCallback((e=>e.has(ai,!0)?e.get(ai).host:e.get(Ve).document)))),vi=l.createInterface("IRenderLocation");var mi;!function(e){e[e.Element=1]="Element",e[e.Attr=2]="Attr",e[e.Text=3]="Text",e[e.CDATASection=4]="CDATASection",e[e.EntityReference=5]="EntityReference",e[e.Entity=6]="Entity",e[e.ProcessingInstruction=7]="ProcessingInstruction",e[e.Comment=8]="Comment",e[e.Document=9]="Document",e[e.DocumentType=10]="DocumentType",e[e.DocumentFragment=11]="DocumentFragment",e[e.Notation=12]="Notation"}(mi||(mi={}));const bi=new WeakMap;function yi(e){if(bi.has(e))return bi.get(e);let t=0,s=e.nextSibling;for(;null!==s;){if(8===s.nodeType)switch(s.textContent){case"au-start":++t;break;case"au-end":if(0==t--)return s}s=s.nextSibling}if(null===e.parentNode&&11===e.nodeType){const t=Wt.for(e);if(void 0===t)return null;if(2===t.mountTarget)return yi(t.host)}return e.parentNode}function wi(e,t){if(void 0===e.platform||e instanceof e.platform.Node)bi.set(e,t);else{const s=e.childNodes;for(let e=0,i=s.length;e<i;++e)bi.set(s[e],t)}}function xi(e){if(ki(e))return e;const t=e.ownerDocument.createComment("au-end"),s=e.ownerDocument.createComment("au-start");return null!==e.parentNode&&(e.parentNode.replaceChild(t,e),t.parentNode.insertBefore(s,t)),t.$start=s,t}function ki(e){return"au-end"===e.textContent}class Ci{constructor(e,t){this.platform=e,this.fragment=t,this.isMounted=!1,this.isLinked=!1,this.next=void 0,this.refNode=void 0;const s=t.querySelectorAll(".au");let i=0,n=s.length;const r=this.targets=Array(n);for(;i<n;){const e=s[i];r[i]="AU-M"===e.nodeName?xi(e):e,++i}const o=t.childNodes;i=0,n=o.length;const a=this.childNodes=Array(n);for(;i<n;)a[i]=o[i],++i;this.firstChild=t.firstChild,this.lastChild=t.lastChild}findTargets(){return this.targets}insertBefore(e){if(this.isLinked&&this.refNode)this.addToLinked();else{const t=e.parentNode;if(this.isMounted){let s=this.firstChild;const i=this.lastChild;let n;for(;null!=s&&(n=s.nextSibling,t.insertBefore(s,e),s!==i);)s=n}else this.isMounted=!0,e.parentNode.insertBefore(this.fragment,e)}}appendTo(e,t=!1){if(this.isMounted){let t=this.firstChild;const s=this.lastChild;let i;for(;null!=t&&(i=t.nextSibling,e.appendChild(t),t!==s);)t=i}else this.isMounted=!0,t||e.appendChild(this.fragment)}remove(){if(this.isMounted){this.isMounted=!1;const e=this.fragment,t=this.lastChild;let s,i=this.firstChild;for(;null!==i&&(s=i.nextSibling,e.appendChild(i),i!==t);)i=s}}addToLinked(){const e=this.refNode,t=e.parentNode;if(this.isMounted){let s=this.firstChild;const i=this.lastChild;let n;for(;null!=s&&(n=s.nextSibling,t.insertBefore(s,e),s!==i);)s=n}else this.isMounted=!0,t.insertBefore(this.fragment,e)}unlink(){this.isLinked=!1,this.next=void 0,this.refNode=void 0}link(e){this.isLinked=!0,ki(e)?this.refNode=e:(this.next=e,this.obtainRefNode())}obtainRefNode(){this.refNode=void 0!==this.next?this.next.firstChild:void 0}}const $i=l.createInterface("IWindow",(e=>e.callback((e=>e.get(Ve).window)))),Si=l.createInterface("ILocation",(e=>e.callback((e=>e.get($i).location)))),Ti=l.createInterface("IHistory",(e=>e.callback((e=>e.get($i).history)))),Ai={[z.capturing]:{capture:!0},[z.bubbling]:{capture:!1}};class Ei{constructor(e,t,s,i,n,r,o,a){this.platform=e,this.targetEvent=t,this.delegationStrategy=s,this.sourceExpression=i,this.target=n,this.preventDefault=r,this.eventDelegator=o,this.locator=a,this.interceptor=this,this.isBound=!1,this.$hostScope=null,this.handler=null}callSource(e){const t=this.$scope.overrideContext;t.$event=e;const s=this.sourceExpression.evaluate(8,this.$scope,this.$hostScope,this.locator,null);return Reflect.deleteProperty(t,"$event"),!0!==s&&this.preventDefault&&e.preventDefault(),s}handleEvent(e){this.interceptor.callSource(e)}$bind(e,t,s){if(this.isBound){if(this.$scope===t)return;this.interceptor.$unbind(2|e)}this.$scope=t,this.$hostScope=s;const i=this.sourceExpression;if(i.hasBind&&i.bind(e,t,s,this.interceptor),this.delegationStrategy===z.none)this.target.addEventListener(this.targetEvent,this);else{const e=this.locator.get(fi);this.handler=this.eventDelegator.addEventListener(e,this.target,this.targetEvent,this,Ai[this.delegationStrategy])}this.isBound=!0}$unbind(e){if(!this.isBound)return;const t=this.sourceExpression;t.hasUnbind&&t.unbind(e,this.$scope,this.$hostScope,this.interceptor),this.$scope=null,this.delegationStrategy===z.none?this.target.removeEventListener(this.targetEvent,this):(this.handler.dispose(),this.handler=null),this.isBound=!1}observeProperty(e,t){}handleChange(e,t,s){}}const Oi={capture:!1};class Pi{constructor(e,t,s=Oi){this.publisher=e,this.eventName=t,this.options=s,this.count=0,this.captureLookups=new Map,this.bubbleLookups=new Map}increment(){1==++this.count&&this.publisher.addEventListener(this.eventName,this,this.options)}decrement(){0==--this.count&&this.publisher.removeEventListener(this.eventName,this,this.options)}dispose(){this.count>0&&(this.count=0,this.publisher.removeEventListener(this.eventName,this,this.options)),this.captureLookups.clear(),this.bubbleLookups.clear()}getLookup(e){const t=!0===this.options.capture?this.captureLookups:this.bubbleLookups;let s=t.get(e);return void 0===s&&t.set(e,s=Object.create(null)),s}handleEvent(e){const t=!0===this.options.capture?this.captureLookups:this.bubbleLookups,s=e.composedPath();!0===this.options.capture&&s.reverse();for(const i of s){const s=t.get(i);if(void 0===s)continue;const n=s[this.eventName];if(void 0!==n&&("function"==typeof n?n(e):n.handleEvent(e),!0===e.cancelBubble))return}}}class Ri{constructor(e,t,s,i){this.tracker=e,this.lookup=t,this.eventName=s,e.increment(),t[s]=i}dispose(){this.tracker.decrement(),this.lookup[this.eventName]=void 0}}class Mi{constructor(e){this.config=e,this.target=null,this.handler=null}subscribe(e,t){this.target=e,this.handler=t;for(const s of this.config.events)e.addEventListener(s,t)}dispose(){const{target:e,handler:t}=this;if(null!==e&&null!==t)for(const s of this.config.events)e.removeEventListener(s,t);this.target=this.handler=null}}const Bi=l.createInterface("IEventDelegator",(e=>e.singleton(Li)));class Li{constructor(){this.trackerMaps=Object.create(null)}addEventListener(e,t,s,i,n){var r,o;const a=null!==(r=(o=this.trackerMaps)[s])&&void 0!==r?r:o[s]=new Map;let l=a.get(e);return void 0===l&&a.set(e,l=new Pi(e,s,n)),new Ri(l,l.getLookup(t),s,i)}dispose(){for(const e in this.trackerMaps){const t=this.trackerMaps[e];for(const e of t.values())e.dispose();t.clear()}}}const ji=l.createInterface("IProjections"),Vi=l.createInterface("IAuSlotsInfo");class Ii{constructor(e){this.projectedSlots=e}}var Ni;!function(e){e.hydrateElement="ra",e.hydrateAttribute="rb",e.hydrateTemplateController="rc",e.hydrateLetElement="rd",e.setProperty="re",e.interpolation="rf",e.propertyBinding="rg",e.callBinding="rh",e.letBinding="ri",e.refBinding="rj",e.iteratorBinding="rk",e.textBinding="ha",e.listenerBinding="hb",e.attributeBinding="hc",e.stylePropertyBinding="hd",e.setAttribute="he",e.setClassAttribute="hf",e.setStyleAttribute="hg"}(Ni||(Ni={}));const qi=l.createInterface("Instruction");function Di(e){const t=e.type;return"string"==typeof t&&2===t.length}class Fi{constructor(e,t){this.from=e,this.to=t}get type(){return"rf"}}class zi{constructor(e,t,s){this.from=e,this.to=t,this.mode=s}get type(){return"rg"}}class Ui{constructor(e,t){this.from=e,this.to=t}get type(){return"rk"}}class Ki{constructor(e,t){this.from=e,this.to=t}get type(){return"rh"}}class Wi{constructor(e,t){this.from=e,this.to=t}get type(){return"rj"}}class Hi{constructor(e,t){this.value=e,this.to=t}get type(){return"re"}}class Gi{constructor(e,t,s,i,n){this.res=e,this.alias=t,this.instructions=s,this.projections=i,this.containerless=n,this.auSlot=null}get type(){return"ra"}}class _i{constructor(e,t,s){this.res=e,this.alias=t,this.instructions=s}get type(){return"rb"}}class Qi{constructor(e,t,s,i){this.def=e,this.res=t,this.alias=s,this.instructions=i}get type(){return"rc"}}class Xi{constructor(e,t){this.instructions=e,this.toBindingContext=t}get type(){return"rd"}}class Yi{constructor(e,t){this.from=e,this.to=t}get type(){return"ri"}}class Zi{constructor(e,t){this.from=e,this.strict=t}get type(){return"ha"}}class Ji{constructor(e,t,s,i){this.from=e,this.to=t,this.preventDefault=s,this.strategy=i}get type(){return"hb"}}class en{constructor(e,t){this.from=e,this.to=t}get type(){return"hd"}}class tn{constructor(e,t){this.value=e,this.to=t}get type(){return"he"}}class sn{constructor(e){this.value=e,this.type="hf"}}class nn{constructor(e){this.value=e,this.type="hg"}}class rn{constructor(e,t,s){this.attr=e,this.from=t,this.to=s}get type(){return"hc"}}const on=l.createInterface("ITemplateCompiler"),an=l.createInterface("IRenderer");function ln(e){return function(t){const s=function(...s){const i=new t(...s);return i.instructionType=e,i};s.register=function(e){c.singleton(an,s).register(e)};const n=i.getOwnKeys(t);for(const e of n)i.define(e,i.getOwn(e,t),s);const r=Object.getOwnPropertyDescriptors(t);return Object.keys(r).filter((e=>"prototype"!==e)).forEach((e=>{Reflect.defineProperty(s,e,r[e])})),s}}function hn(e,t,s){return"string"==typeof t?e.parse(t,s):t}function cn(e){return null!=e.viewModel?e.viewModel:e}let un=class{render(e,t,s,i,n){const r=cn(i);void 0!==r.$observers&&void 0!==r.$observers[n.to]?r.$observers[n.to].setValue(n.value,2):r[n.to]=n.value}};un=re([ln("re")],un);let dn=class{render(e,t,s,i,n){let r,o,a,l;const h=n.res,c=n.projections,u=s.container,d=function(e,t,s,i,n){const r=e.platform,o=e.container.createChild();return o.registerResolver(r.HTMLElement,o.registerResolver(r.Element,o.registerResolver(r.Node,o.registerResolver(gi,new y("ElementProvider",t))))),o.registerResolver(ii,new y("IController",e)),o.registerResolver(qi,new y("IInstruction",s)),o.registerResolver(vi,null==i?Bn:new y("IRenderLocation",i)),o.registerResolver(Qt,Ln),o.registerResolver(Vi,null==n?jn:new y("IAuSlotsInfo",n)),o}(s,i,n,i,null==c?void 0:new Ii(Object.keys(c)));switch(typeof h){case"string":if(r=u.find(Wt,h),null==r)throw new Error(`Element ${h} is not registered in ${s.name}.`);break;default:r=h}o=r.Type,a=d.invoke(o),d.registerResolver(o,new y(r.key,a)),l=Ks.forCustomElement(s.root,s.container,d,a,i,n,e,!0,r),e=l.flags,pi(i,r.key,l),t.renderChildren(e,n.instructions,s,l),s.addChild(l)}};dn=re([ln("ra")],dn);let pn=class{render(e,t,s,i,n){let r,o=s.container;switch(typeof n.res){case"string":if(r=o.find(Lt,n.res),null==r)throw new Error(`Attribute ${n.res} is not registered in ${s.name}.`);break;default:r=n.res}const a=Mn(r,s,i,n,void 0,void 0),l=Ks.forCustomAttribute(s.root,s.container,a,i,e,r);pi(i,r.key,l),t.renderChildren(e,n.instructions,s,l),s.addChild(l)}};pn=re([ln("rb")],pn);let gn=class{render(e,t,s,i,n){var r;let o,a=s.container;switch(typeof n.res){case"string":if(o=a.find(Lt,n.res),null==o)throw new Error(`Attribute ${n.res} is not registered in ${s.name}.`);break;default:o=n.res}const l=ls(n.def,a).getViewFactory(),h=xi(i),c=Mn(o,s,i,n,l,h),u=Ks.forCustomAttribute(s.root,s.container,c,i,e,o);pi(h,o.key,u),null===(r=c.link)||void 0===r||r.call(c,e,t,s,u,i,n),t.renderChildren(e,n.instructions,s,u),s.addChild(u)}};gn=re([ln("rc")],gn);let fn=class{constructor(e,t){this.parser=e,this.oL=t}render(e,t,s,i,n){i.remove();const r=n.instructions,o=n.toBindingContext,a=s.container;let l,h,c;for(let e=0,t=r.length;e<t;++e)l=r[e],h=hn(this.parser,l.from,48),c=new ht(h,l.to,this.oL,a,o),s.addBinding(38962===h.$kind?Cn(c,h,a):c)}};fn=re([ln("rd"),oe(0,D),oe(1,q)],fn);let vn=class{constructor(e,t){this.parser=e,this.observerLocator=t}render(e,t,s,i,n){const r=hn(this.parser,n.from,153),o=new Ke(r,cn(i),n.to,this.observerLocator,s.container);s.addBinding(38962===r.$kind?Cn(o,r,s.container):o)}};vn=re([ln("rh"),oe(0,D),oe(1,q)],vn);let mn=class{constructor(e){this.parser=e}render(e,t,s,i,n){const r=hn(this.parser,n.from,5376),o=new vt(r,function(e,t){if("element"===t)return e;switch(t){case"controller":return Wt.for(e);case"view":throw new Error("Not supported API");case"view-model":return Wt.for(e).viewModel;default:{const s=Lt.for(e,t);if(void 0!==s)return s.viewModel;const i=Wt.for(e,{name:t});if(void 0===i)throw new Error(`Attempted to reference "${t}", but it was not found amongst the target's API.`);return i.viewModel}}}(i,n.to),s.container);s.addBinding(38962===r.$kind?Cn(o,r,s.container):o)}};mn=re([ln("rj"),oe(0,D)],mn);let bn=class{constructor(e,t,s){this.parser=e,this.oL=t,this.platform=s}render(e,t,s,i,n){const r=s.container,o=hn(this.parser,n.from,2048),a=new ot(this.oL,o,cn(i),n.to,R.toView,r,this.platform.domWriteQueue),l=a.partBindings,h=l.length;let c,u=0;for(;h>u;++u)c=l[u],38962===c.sourceExpression.$kind&&(l[u]=Cn(c,c.sourceExpression,r));s.addBinding(a)}};bn=re([ln("rf"),oe(0,D),oe(1,q),oe(2,Ve)],bn);let yn=class{constructor(e,t,s){this.parser=e,this.oL=t,this.platform=s}render(e,t,s,i,n){const r=hn(this.parser,n.from,48|n.mode),o=new ft(r,cn(i),n.to,n.mode,this.oL,s.container,this.platform.domWriteQueue);s.addBinding(38962===r.$kind?Cn(o,r,s.container):o)}};yn=re([ln("rg"),oe(0,D),oe(1,q),oe(2,Ve)],yn);let wn=class{constructor(e,t,s){this.parser=e,this.oL=t,this.p=s}render(e,t,s,i,n){const r=hn(this.parser,n.from,539),o=new ft(r,cn(i),n.to,R.toView,this.oL,s.container,this.p.domWriteQueue);s.addBinding(o)}};wn=re([ln("rk"),oe(0,D),oe(1,q),oe(2,Ve)],wn);let xn=0;const kn=[];function Cn(e,t,s){for(;t instanceof U;)kn[xn++]=t,t=t.expression;for(;xn>0;){const t=kn[--xn],i=s.get(t.behaviorKey);i instanceof K&&(e=i.construct(e,t))}return kn.length=0,e}let $n=class{constructor(e,t,s){this.parser=e,this.oL=t,this.p=s}render(e,t,s,i,n){const r=s.container,o=i.nextSibling,a=i.parentNode,l=this.p.document,h=hn(this.parser,n.from,2048),c=h.parts,u=h.expressions,d=u.length;let p,g,f=0,v=c[0];for(""!==v&&a.insertBefore(l.createTextNode(v),o);d>f;++f)g=u[f],p=new lt(g,a.insertBefore(l.createTextNode(""),o),r,this.oL,this.p,n.strict),s.addBinding(38962===g.$kind?Cn(p,g,r):p),v=c[f+1],""!==v&&a.insertBefore(l.createTextNode(v),o);"AU-M"===i.nodeName&&i.remove()}};$n=re([ln("ha"),oe(0,D),oe(1,q),oe(2,Ve)],$n);let Sn=class{constructor(e,t){this.parser=e,this.eventDelegator=t}render(e,t,s,i,n){const r=hn(this.parser,n.from,80|n.strategy+6),o=new Ei(s.platform,n.to,n.strategy,r,i,n.preventDefault,this.eventDelegator,s.container);s.addBinding(38962===r.$kind?Cn(o,r,s.container):o)}};Sn=re([ln("hb"),oe(0,D),oe(1,Bi)],Sn);let Tn=class{render(e,t,s,i,n){i.setAttribute(n.to,n.value)}};Tn=re([ln("he")],Tn);let An=class{render(e,t,s,i,n){!function(e,t){const s=t.length;let i=0;for(let n=0;n<s;++n)32===t.charCodeAt(n)?(n!==i&&e.add(t.slice(i,n)),i=n+1):n+1===s&&e.add(t.slice(i))}(i.classList,n.value)}};An=re([ln("hf")],An);let En=class{render(e,t,s,i,n){i.style.cssText+=n.value}};En=re([ln("hg")],En);let On=class{constructor(e,t,s){this.parser=e,this.oL=t,this.p=s}render(e,t,s,i,n){const r=hn(this.parser,n.from,48|R.toView),o=new ft(r,i.style,n.to,R.toView,this.oL,s.container,this.p.domWriteQueue);s.addBinding(38962===r.$kind?Cn(o,r,s.container):o)}};On=re([ln("hd"),oe(0,D),oe(1,q),oe(2,Ve)],On);let Pn=class{constructor(e,t){this.parser=e,this.oL=t}render(e,t,s,i,n){const r=hn(this.parser,n.from,48|R.toView),o=new it(r,i,n.attr,n.to,R.toView,this.oL,s.container);s.addBinding(38962===r.$kind?Cn(o,r,s.container):o)}};Pn=re([ln("hc"),oe(0,D),oe(1,q)],Pn);class Rn{constructor(e){this.f=e}get $isResolver(){return!0}resolve(){const e=this.f;if(null===e)throw new Error("Cannot resolve ViewFactory before the provider was prepared.");if("string"!=typeof e.name||0===e.name.length)throw new Error("Cannot resolve ViewFactory without a (valid) name.");return e}}function Mn(e,t,s,i,n,r,o){const a=t.platform,l=t.container.createChild();return l.registerResolver(a.HTMLElement,l.registerResolver(a.Element,l.registerResolver(a.Node,l.registerResolver(gi,new y("ElementProvider",s))))),l.registerResolver(ii,new y("IController",t)),l.registerResolver(qi,new y("IInstruction",i)),l.registerResolver(vi,null==r?Bn:new y("IRenderLocation",r)),l.registerResolver(Qt,null==n?Ln:new Rn(n)),l.registerResolver(Vi,null==o?jn:new y("IAuSlotsInfo",o)),l.invoke(e.Type)}const Bn=new y("IRenderLocation"),Ln=new Rn(null),jn=new y("IAuSlotsInfo",new Ii(a));function Vn(e){return function(t){return Nn.define(e,t)}}class In{constructor(e,t,s,i,n){this.Type=e,this.name=t,this.aliases=s,this.key=i,this.type=n}static create(e,t){let s,i;return"string"==typeof e?(s=e,i={name:s}):(s=e.name,i=e),new In(t,n(Nn.getAnnotation(t,"name"),s),d(Nn.getAnnotation(t,"aliases"),i.aliases,t.aliases),Nn.keyFrom(s),n(Nn.getAnnotation(t,"type"),i.type,t.type,null))}register(e){const{Type:t,key:s,aliases:i}=this;c.singleton(s,t).register(e),c.aliasTo(s,t).register(e),j(i,Nn,s,e)}}const Nn={name:t.resource.keyFor("binding-command"),keyFrom:e=>`${Nn.name}:${e}`,isType:e=>"function"==typeof e&&i.hasOwn(Nn.name,e),define(e,s){const n=In.create(e,s);return i.define(Nn.name,n,n.Type),i.define(Nn.name,n,n),t.resource.appendTo(s,Nn.name),n.Type},getDefinition(e){const t=i.getOwn(Nn.name,e);if(void 0===t)throw new Error(`No definition found for type ${e.name}`);return t},annotate(e,s,n){i.define(t.annotation.keyFor(s),n,e)},getAnnotation:(e,s)=>i.getOwn(t.annotation.keyFor(s),e)};let qn=class{constructor(e){this.m=e,this.bindingType=49}static get inject(){return[Fe]}build(e){var t;let s;return s=null==e.bindable?null!==(t=this.m.map(e.node,e.attr.target))&&void 0!==t?t:S(e.attr.target):e.bindable.property,new zi(e.expr,s,R.oneTime)}};qn=re([Vn("one-time")],qn);let Dn=class{constructor(e){this.m=e,this.bindingType=50}static get inject(){return[Fe]}build(e){var t;let s;return s=null==e.bindable?null!==(t=this.m.map(e.node,e.attr.target))&&void 0!==t?t:S(e.attr.target):e.bindable.property,new zi(e.expr,s,R.toView)}};Dn=re([Vn("to-view")],Dn);let Fn=class{constructor(e){this.m=e,this.bindingType=51}static get inject(){return[Fe]}build(e){var t;let s;return s=null==e.bindable?null!==(t=this.m.map(e.node,e.attr.target))&&void 0!==t?t:S(e.attr.target):e.bindable.property,new zi(e.expr,s,R.fromView)}};Fn=re([Vn("from-view")],Fn);let zn=class{constructor(e){this.m=e,this.bindingType=52}static get inject(){return[Fe]}build(e){var t;let s;return s=null==e.bindable?null!==(t=this.m.map(e.node,e.attr.target))&&void 0!==t?t:S(e.attr.target):e.bindable.property,new zi(e.expr,s,R.twoWay)}};zn=re([Vn("two-way")],zn);let Un=class{constructor(e){this.m=e,this.bindingType=53}static get inject(){return[Fe]}build(e){var t;const s=e.attr.target,i=e.bindable;let n,r,o;return null==i?(r=this.m.isTwoWay(e.node,s)?R.twoWay:R.toView,o=null!==(t=this.m.map(e.node,s))&&void 0!==t?t:S(s)):(n=e.def.defaultBindingMode,r=i.mode===R.default||null==i.mode?null==n||n===R.default?R.toView:n:i.mode,o=i.property),new zi(e.expr,o,r)}};Un=re([Vn("bind")],Un);let Kn=class{constructor(){this.bindingType=153}build(e){const t=null===e.bindable?S(e.attr.target):e.bindable.property;return new Ki(e.expr,t)}};Kn=re([Vn("call")],Kn);let Wn=class{constructor(){this.bindingType=539}build(e){const t=null===e.bindable?S(e.attr.target):e.bindable.property;return new Ui(e.expr,t)}};Wn=re([Vn("for")],Wn);let Hn=class{constructor(){this.bindingType=4182}build(e){return new Ji(e.expr,e.attr.target,!0,z.none)}};Hn=re([Vn("trigger")],Hn);let Gn=class{constructor(){this.bindingType=4184}build(e){return new Ji(e.expr,e.attr.target,!1,z.bubbling)}};Gn=re([Vn("delegate")],Gn);let _n=class{constructor(){this.bindingType=4183}build(e){return new Ji(e.expr,e.attr.target,!1,z.capturing)}};_n=re([Vn("capture")],_n);let Qn=class{constructor(){this.bindingType=4128}build(e){return new rn(e.attr.target,e.expr,e.attr.target)}};Qn=re([Vn("attr")],Qn);let Xn=class{constructor(){this.bindingType=4128}build(e){return new rn("style",e.expr,e.attr.target)}};Xn=re([Vn("style")],Xn);let Yn=class{constructor(){this.bindingType=4128}build(e){return new rn("class",e.expr,e.attr.target)}};Yn=re([Vn("class")],Yn);let Zn=class{constructor(){this.bindingType=4128}build(e){return new Wi(e.expr,e.attr.target)}};Zn=re([Vn("ref")],Zn);const Jn=l.createInterface("ITemplateElementFactory",(e=>e.singleton(tr))),er={};let tr=class{constructor(e){this.p=e,this.template=e.document.createElement("template")}createTemplate(e){var t;if("string"==typeof e){let t=er[e];if(void 0===t){const s=this.template;s.innerHTML=e;const i=s.content.firstElementChild;null==i||"TEMPLATE"!==i.nodeName||null!=i.nextElementSibling?(this.template=this.p.document.createElement("template"),t=s):(s.content.removeChild(i),t=i),er[e]=t}return t.cloneNode(!0)}if("TEMPLATE"!==e.nodeName){const t=this.p.document.createElement("template");return t.content.appendChild(e),t}return null===(t=e.parentNode)||void 0===t||t.removeChild(e),e.cloneNode(!0)}};tr=re([oe(0,Ve)],tr);const sr=function(e){function t(e,s,i){l.inject(t)(e,s,i)}return t.$isResolver=!0,t.resolve=function(t,s){return s.root===s?s.getAll(e,!1):s.has(e,!1)?s.getAll(e,!1).concat(s.root.getAll(e,!1)):s.root.getAll(e,!1)},t};class ir{constructor(){this.debug=!1,this.resolveResources=!0}static register(e){return c.singleton(on,this).register(e)}compile(e,t,s){var i,n,r,o;const l=Ut.getOrCreate(e);if(null==l.template)return l;if(!1===l.needsCompile)return l;null!=s||(s=ar);const h=new nr(e,t,s,null,null,void 0),c="string"!=typeof l.template&&e.enhance?l.template:h.templateFactory.createTemplate(l.template),u="TEMPLATE"===c.nodeName&&null!=c.content,d=u?c.content:c,p=t.get(sr(yr)),g=p.length;let f=0;if(g>0)for(;g>f;)null===(n=(i=p[f]).beforeCompile)||void 0===n||n.call(i,c),++f;if(c.hasAttribute(vr))throw new Error("The root cannot be a local template itself.");return this.local(d,h),this.node(d,h),Ut.create({...e,name:e.name||Wt.generateName(),dependencies:(null!==(r=e.dependencies)&&void 0!==r?r:a).concat(null!==(o=h.deps)&&void 0!==o?o:a),instructions:h.rows,surrogates:u?this.surrogate(c,h):a,template:c,hasSlots:h.hasSlot,needsCompile:!1})}surrogate(e,t){var s;const i=[],n=e.attributes,r=t.exprParser;let o,a,l,h,c,u,d,p,g,f,v,m,b=n.length,y=0,w=null,x=null;for(;b>y;++y){if(o=n[y],a=o.name,l=o.value,h=t.attrParser.parse(a,l),v=h.target,m=h.rawValue,cr[v])throw new Error(`Attribute ${a} is invalid on surrogate.`);if(x=t.command(h),null!==x&&4096&x.bindingType)g=r.parse(m,x.bindingType),hr.node=e,hr.attr=h,hr.expr=g,hr.bindable=null,hr.def=null,i.push(x.build(hr));else if(w=t.attr(v),null===w)if(null===x)if(g=r.parse(m,2048),null!=g)e.removeAttribute(a),--y,--b,i.push(new Fi(g,null!==(s=t.attrMapper.map(e,v))&&void 0!==s?s:S(v)));else switch(a){case"class":i.push(new sn(m));break;case"style":i.push(new nn(m));break;default:i.push(new tn(m,a))}else g=r.parse(m,x.bindingType),hr.node=e,hr.attr=h,hr.expr=g,hr.bindable=null,hr.def=null,i.push(x.build(hr));else{if(w.isTemplateController)throw new Error(`Template controller ${v} is invalid on surrogate.`);d=pr.from(w,!0),f=!1===w.noMultiBindings&&null===x&&rr(m),f?u=this.multiBindings(e,m,w,t):(p=d.primary,null===x?(g=r.parse(m,2048),u=[null===g?new Hi(m,p.property):new Fi(g,p.property)]):(g=r.parse(m,x.bindingType),hr.node=e,hr.attr=h,hr.expr=g,hr.bindable=p,hr.def=w,u=[x.build(hr)])),e.removeAttribute(a),--y,--b,(null!=c?c:c=[]).push(new _i(this.resolveResources?w:w.name,null!=w.aliases&&w.aliases.includes(v)?v:void 0,u))}}return or(),null!=c?c.concat(i):i}node(e,t){switch(e.nodeType){case 1:switch(e.nodeName){case"LET":return this.declare(e,t);default:return this.element(e,t)}case 3:return this.text(e,t);case 11:{let s=e.firstChild;for(;null!==s;)s=this.node(s,t);break}}return e.nextSibling}declare(e,t){const s=e.attributes,i=s.length,n=[],r=t.exprParser;let o,a,l,h,c,u,d,p,g=!1,f=0;for(;i>f;++f)if(o=s[f],l=o.name,h=o.value,"to-binding-context"!==l){if(a=t.attrParser.parse(l,h),u=a.target,d=a.rawValue,c=t.command(a),null!==c){if(50===c.bindingType||53===c.bindingType){n.push(new Yi(r.parse(d,c.bindingType),S(u)));continue}throw new Error(`Invalid command ${a.command} for <let>. Only to-view/bind supported.`)}p=r.parse(d,2048),null===p&&t.logger.warn(`Property ${u} is declared with literal string ${d}. Did you mean ${u}.bind="${d}"?`),n.push(new Yi(null===p?new W(d):p,S(u)))}else g=!0;return t.rows.push([new Xi(n,g)]),this.mark(e).nextSibling}element(e,t){var s,i,n,r,l,h,c;const u=e.nextSibling,d=(null!==(s=e.getAttribute("as-element"))&&void 0!==s?s:e.nodeName).toLowerCase(),p=t.el(d),g=t.exprParser,f=this.debug?o:()=>{e.removeAttribute(b),--N,--I};let v,m,b,y,w,x,k,C,$,T,A,E,O,P,R,M,B,L,j,V=e.attributes,I=V.length,N=0,q=null,D=!1,F=null,z=!0,U=!1;for("slot"===d&&(t.root.hasSlot=!0),null!==p&&(z=null===(i=p.processContent)||void 0===i?void 0:i.call(p.Type,e,t.p),V=e.attributes,I=V.length);I>N;++N){switch(m=V[N],b=m.name,y=m.value,b){case"as-element":case"containerless":f(),U||(U="containerless"===b);continue}if(w=t.attrParser.parse(b,y),F=t.command(w),null!==F&&4096&F.bindingType)O=g.parse(y,F.bindingType),hr.node=e,hr.attr=w,hr.expr=O,hr.bindable=null,hr.def=null,(null!=x?x:x=[]).push(F.build(hr)),f();else if(B=w.target,L=w.rawValue,q=t.attr(B),null===q)if(null!==F)f(),null===p||(R=pr.from(p,!1),C=R.attrs[B],void 0===C)?(O=g.parse(L,F.bindingType),hr.node=e,hr.attr=w,hr.expr=O,hr.bindable=null,hr.def=null,(null!=x?x:x=[]).push(F.build(hr))):(y=0===y.length&&(55&F.bindingType)>0?S(b):y,O=g.parse(y,F.bindingType),hr.node=e,hr.attr=w,hr.expr=O,hr.bindable=C,hr.def=p,(null!=k?k:k=[]).push(F.build(hr)));else{if(null!==p&&(R=pr.from(p,!1),C=R.attrs[B],void 0!==C)){O=g.parse(L,2048),(null!=k?k:k=[]).push(null==O?new Hi(L,C.property):new Fi(O,C.property)),f();continue}O=g.parse(L,2048),null!=O&&(f(),(null!=x?x:x=[]).push(new Fi(O,null!==(n=t.attrMapper.map(e,B))&&void 0!==n?n:S(B))))}else R=pr.from(q,!0),D=!1===q.noMultiBindings&&null===F&&rr(y),D?T=this.multiBindings(e,y,q,t):(M=R.primary,null===F?(O=g.parse(y,2048),T=[null===O?new Hi(y,M.property):new Fi(O,M.property)]):(O=g.parse(y,F.bindingType),hr.node=e,hr.attr=w,hr.expr=O,hr.bindable=M,hr.def=q,T=[F.build(hr)])),f(),q.isTemplateController?(null!=A?A:A=[]).push(new Qi(lr,this.resolveResources?q:q.name,void 0,T)):(null!=$?$:$=[]).push(new _i(this.resolveResources?q:q.name,null!=q.aliases&&q.aliases.includes(B)?B:void 0,T))}if(or(),this.shouldReorderAttrs(e)&&null!=x&&x.length>1&&this.reorder(e,x),null!==p&&(P=new Gi(this.resolveResources?p:p.name,void 0,null!=k?k:a,null,U),"au-slot"===d)){const s=e.getAttribute("name")||"default",i=t.h("template"),n=t.child();let r=e.firstChild;for(;null!==r;)1===r.nodeType&&r.hasAttribute("au-slot")?e.removeChild(r):i.content.appendChild(r),r=e.firstChild;this.node(i.content,n),P.auSlot={name:s,fallback:Ut.create({name:Wt.generateName(),template:i,instructions:n.rows,needsCompile:!1})},e=this.marker(e,t)}if(null==x&&null==P&&null==$||(v=a.concat(null!=P?P:a,null!=$?$:a,null!=x?x:a),this.mark(e)),null!=A){let s;I=A.length-1,N=I,E=A[N],this.marker(e,t),"TEMPLATE"===e.nodeName?s=e:(s=t.h("template"),s.content.appendChild(e));const i=s,n=t.child(null==v?[]:[v]);let o,a,l,c,u,d,g,f,m;j=null===p||!p.containerless&&!U&&!1!==z,null!==p&&p.containerless&&this.marker(e,t);let b=0,y=0;if(j){if(null!==p){for(o=e.firstChild;null!==o;)1===o.nodeType?(a=o,o=o.nextSibling,l=a.getAttribute("au-slot"),null!==l&&(""===l&&(l="default"),a.removeAttribute("au-slot"),e.removeChild(a),(null!==(r=(h=null!=u?u:u={})[l])&&void 0!==r?r:h[l]=[]).push(a))):o=o.nextSibling;if(null!=u){for(l in c={},u){for(s=t.h("template"),d=u[l],b=0,y=d.length;y>b;++b)g=d[b],s.content.appendChild("TEMPLATE"===g.nodeName?g.attributes.length>0?g:g.content:g);m=t.child(),this.node(s.content,m),c[l]=Ut.create({name:Wt.generateName(),template:s,instructions:m.rows,needsCompile:!1})}P.projections=c}}if("TEMPLATE"===e.nodeName)this.node(e.content,n);else for(o=e.firstChild;null!==o;)o=this.node(o,n)}for(E.def=Ut.create({name:Wt.generateName(),template:i,instructions:n.rows,needsCompile:!1});N-- >0;){if(E=A[N],s=t.h("template"),f=t.h("au-m"),f.classList.add("au"),s.content.appendChild(f),E.def!==lr)throw new Error(`Invalid definition for processing ${E.res}.`);E.def=Ut.create({name:Wt.generateName(),template:s,needsCompile:!1,instructions:[[A[N+1]]]})}t.rows.push([E])}else if(null!=v&&t.rows.push(v),j=null===p||!p.containerless&&!U&&!1!==z,null!==p&&p.containerless&&this.marker(e,t),j&&e.childNodes.length>0){let s,i,n,r,o,a,h,u=e.firstChild,d=null,g=0,f=0;for(;null!==u;)if(1===u.nodeType){if(s=u,u=u.nextSibling,i=s.getAttribute("au-slot"),null!==i){if(null===p)throw new Error(`Projection with [au-slot="${i}"] is attempted on a non custom element ${e.nodeName}.`);""===i&&(i="default"),e.removeChild(s),s.removeAttribute("au-slot"),(null!==(l=(c=null!=n?n:n={})[i])&&void 0!==l?l:c[i]=[]).push(s)}}else u=u.nextSibling;if(null!=n){for(i in d={},n){for(a=t.h("template"),r=n[i],g=0,f=r.length;f>g;++g)o=r[g],a.content.appendChild("TEMPLATE"===o.nodeName?o.attributes.length>0?o:o.content:o);h=t.child(),this.node(a.content,h),d[i]=Ut.create({name:Wt.generateName(),template:a,instructions:h.rows,needsCompile:!1})}P.projections=d}for(u=e.firstChild;null!==u;)u=this.node(u,t)}return u}text(e,t){let s="",i=e;for(;null!==i&&3===i.nodeType;)s+=i.textContent,i=i.nextSibling;const n=t.exprParser.parse(s,2048);if(null===n)return i;const r=e.parentNode;for(r.insertBefore(this.mark(t.h("au-m")),e),t.rows.push([new Zi(n,!!t.def.isStrictBinding)]),e.textContent="",i=e.nextSibling;null!==i&&3===i.nodeType;)r.removeChild(i),i=e.nextSibling;return e.nextSibling}multiBindings(e,t,s,i){const n=pr.from(s,!0),r=t.length,o=[];let a,l,h,c,u,d,p=0,g=0;for(let f=0;f<r;++f)if(g=t.charCodeAt(f),92===g)++f;else if(58===g){for(a=t.slice(p,f);t.charCodeAt(++f)<=32;);for(p=f;f<r;++f)if(g=t.charCodeAt(f),92===g)++f;else if(59===g){l=t.slice(p,f);break}if(void 0===l&&(l=t.slice(p)),c=i.attrParser.parse(a,l),u=i.command(c),d=n.attrs[c.target],null==d)throw new Error(`Bindable ${c.target} not found on ${s.name}.`);for(null===u?(h=i.exprParser.parse(l,2048),o.push(null===h?new Hi(l,d.property):new Fi(h,d.property))):(h=i.exprParser.parse(l,u.bindingType),hr.node=e,hr.attr=c,hr.expr=h,hr.bindable=d,hr.def=s,o.push(u.build(hr)));f<r&&t.charCodeAt(++f)<=32;);p=f,a=void 0,l=void 0}return or(),o}local(e,t){const s=e,i=T(s.querySelectorAll("template[as-custom-element]")),n=i.length;if(0===n)return;if(n===s.childElementCount)throw new Error("The custom element does not have any content other than local template(s).");const r=new Set;for(const e of i){if(e.parentNode!==s)throw new Error("Local templates needs to be defined directly under root.");const i=mr(e,r),n=class{},o=e.content,a=T(o.querySelectorAll("bindable")),l=he.for(n),h=new Set,c=new Set;for(const e of a){if(e.parentNode!==o)throw new Error("Bindable properties of local templates needs to be defined directly under root.");const s=e.getAttribute("property");if(null===s)throw new Error(`The attribute 'property' is missing in ${e.outerHTML}`);const i=e.getAttribute("attribute");if(null!==i&&c.has(i)||h.has(s))throw new Error(`Bindable property and attribute needs to be unique; found property: ${s}, attribute: ${i}`);null!==i&&c.add(i),h.add(s),l.add({property:s,attribute:null!=i?i:void 0,mode:br(e)});const n=e.getAttributeNames().filter((e=>!fr.includes(e)));n.length>0&&t.logger.warn(`The attribute(s) ${n.join(", ")} will be ignored for ${e.outerHTML}. Only ${fr.join(", ")} are processed.`),o.removeChild(e)}t.addDep(Wt.define({name:i,template:e},n)),s.removeChild(e)}}shouldReorderAttrs(e){return"INPUT"===e.nodeName&&1===ur[e.type]}reorder(e,t){switch(e.nodeName){case"INPUT":{const e=t;let s,i,n,r=0;for(let t=0;t<e.length&&r<3;t++)switch(n=e[t],n.to){case"model":case"value":case"matcher":s=t,r++;break;case"checked":i=t,r++}void 0!==i&&void 0!==s&&i<s&&([e[s],e[i]]=[e[i],e[s]])}}}mark(e){return e.classList.add("au"),e}marker(e,t){const s=e.parentNode,i=t.h("au-m");return this.mark(s.insertBefore(i,e)),s.removeChild(e),i}}class nr{constructor(e,t,s,i,n,r){this.hasSlot=!1,this.commands=je();const o=null!==i;this.c=t,this.root=null===n?this:n,this.def=e,this.ci=s,this.parent=i,this.templateFactory=o?i.templateFactory:t.get(Jn),this.attrParser=o?i.attrParser:t.get($e),this.exprParser=o?i.exprParser:t.get(D),this.attrMapper=o?i.attrMapper:t.get(Fe),this.logger=o?i.logger:t.get(x),this.p=o?i.p:t.get(Ve),this.localEls=o?i.localEls:new Set,this.rows=null!=r?r:[]}addDep(e){var t,s;(null!==(t=(s=this.root).deps)&&void 0!==t?t:s.deps=[]).push(e),this.root.c.register(e)}h(e){const t=this.p.document.createElement(e);return"template"===e&&this.p.document.adoptNode(t.content),t}el(e){return this.c.find(Wt,e)}attr(e){return this.c.find(Lt,e)}child(e){return new nr(this.def,this.c,this.ci,this,this.root,e)}command(e){if(this.root!==this)return this.root.command(e);const t=e.command;if(null===t)return null;let s=this.commands[t];if(void 0===s){if(s=this.c.create(Nn,t),null===s)throw new Error(`Unknown binding command: ${t}`);this.commands[t]=s}return s}}function rr(e){const t=e.length;let s=0;for(let i=0;i<t;++i)if(s=e.charCodeAt(i),92===s)++i;else{if(58===s)return!0;if(36===s&&123===e.charCodeAt(i+1))return!1}return!1}function or(){hr.node=hr.attr=hr.expr=hr.bindable=hr.def=null}const ar={projections:null},lr={name:"unnamed"},hr={node:null,expr:null,attr:null,bindable:null,def:null},cr=Object.assign(je(),{id:!0,name:!0,"au-slot":!0,"as-element":!0}),ur={checkbox:1,radio:1},dr=new WeakMap;class pr{constructor(e,t,s){this.attrs=e,this.bindables=t,this.primary=s}static from(e,t){let s=dr.get(e);if(null==s){const i=e.bindables,n=je(),r=t?void 0===e.defaultBindingMode?R.default:e.defaultBindingMode:R.default;let o,a,l,h,c=!1;for(a in i){if(o=i[a],h=o.attribute,!0===o.primary){if(c)throw new Error(`Primary already exists on ${e.name}`);c=!0,l=o}else c||null!=l||(l=o);n[h]=ce.create(a,o)}null==o&&t&&(l=n.value=ce.create("value",{mode:r})),dr.set(e,s=new pr(n,i,l))}return s}}var gr;!function(e){e.property="property",e.attribute="attribute",e.mode="mode"}(gr||(gr={}));const fr=Object.freeze(["property","attribute","mode"]),vr="as-custom-element";function mr(e,t){const s=e.getAttribute(vr);if(null===s||""===s)throw new Error('The value of "as-custom-element" attribute cannot be empty for local template');if(t.has(s))throw new Error(`Duplicate definition of the local template named ${s}`);return t.add(s),e.removeAttribute(vr),s}function br(e){switch(e.getAttribute("mode")){case"oneTime":return R.oneTime;case"toView":return R.toView;case"fromView":return R.fromView;case"twoWay":return R.twoWay;case"default":default:return R.default}}const yr=l.createInterface("ITemplateCompilerHooks"),wr=new WeakMap,xr=t.resource.keyFor("compiler-hooks"),kr=Object.freeze({name:xr,define(e){let s=wr.get(e);return void 0===s&&(wr.set(e,s=new Cr(e)),i.define(xr,s,e),t.resource.appendTo(e,xr)),e}});class Cr{constructor(e){this.Type=e}get name(){return""}register(e){e.register(c.singleton(yr,this.Type))}}const $r=e=>{return void 0===e?t:t(e);function t(e){return kr.define(e)}};class Sr{constructor(e){this.mode=e,this.originalModes=new Map}bind(e,t,s,i){this.originalModes.set(i,i.mode),i.mode=this.mode}unbind(e,t,s,i){i.mode=this.originalModes.get(i),this.originalModes.delete(i)}}class Tr extends Sr{constructor(){super(R.oneTime)}}class Ar extends Sr{constructor(){super(R.toView)}}class Er extends Sr{constructor(){super(R.fromView)}}class Or extends Sr{constructor(){super(R.twoWay)}}H("oneTime")(Tr),H("toView")(Ar),H("fromView")(Er),H("twoWay")(Or);class Pr extends G{constructor(e,t){super(e,t),this.opts={delay:200},this.firstArg=null,this.task=null,this.taskQueue=e.locator.get(u).taskQueue,t.args.length>0&&(this.firstArg=t.args[0])}callSource(e){this.queueTask((()=>this.binding.callSource(e)))}handleChange(e,t,s){null!==this.task&&(this.task.cancel(),this.task=null),this.binding.handleChange(e,t,s)}updateSource(e,t){this.queueTask((()=>this.binding.updateSource(e,t)))}queueTask(e){const t=this.task;this.task=this.taskQueue.queueTask((()=>(this.task=null,e())),this.opts),null==t||t.cancel()}$bind(e,t,s){if(null!==this.firstArg){const i=Number(this.firstArg.evaluate(e,t,s,this.locator,null));this.opts.delay=isNaN(i)?200:i}this.binding.$bind(e,t,s)}$unbind(e){var t;null===(t=this.task)||void 0===t||t.cancel(),this.task=null,this.binding.$unbind(e)}}H("debounce")(Pr);let Rr=class{constructor(e){this.signaler=e,this.lookup=new Map}bind(e,t,s,i,...n){if(!("handleChange"in i))throw new Error("The signal behavior can only be used with bindings that have a 'handleChange' method");if(0===n.length)throw new Error("At least one signal name must be passed to the signal behavior, e.g. `expr & signal:'my-signal'`");this.lookup.set(i,n);for(const e of n)this.signaler.addSignalListener(e,i)}unbind(e,t,s,i){const n=this.lookup.get(i);this.lookup.delete(i);for(const e of n)this.signaler.removeSignalListener(e,i)}};Rr=re([oe(0,_)],Rr),H("signal")(Rr);class Mr extends G{constructor(e,t){super(e,t),this.opts={delay:200},this.firstArg=null,this.task=null,this.lastCall=0,this.delay=0,this.platform=e.locator.get(u),this.taskQueue=this.platform.taskQueue,t.args.length>0&&(this.firstArg=t.args[0])}callSource(e){this.queueTask((()=>this.binding.callSource(e)))}handleChange(e,t,s){null!==this.task&&(this.task.cancel(),this.task=null,this.lastCall=this.platform.performanceNow()),this.binding.handleChange(e,t,s)}updateSource(e,t){this.queueTask((()=>this.binding.updateSource(e,t)))}queueTask(e){const t=this.opts,s=this.platform,i=this.lastCall+t.delay-s.performanceNow();if(i>0){const n=this.task;t.delay=i,this.task=this.taskQueue.queueTask((()=>{this.lastCall=s.performanceNow(),this.task=null,t.delay=this.delay,e()}),t),null==n||n.cancel()}else this.lastCall=s.performanceNow(),e()}$bind(e,t,s){if(null!==this.firstArg){const i=Number(this.firstArg.evaluate(e,t,s,this.locator,null));this.opts.delay=this.delay=isNaN(i)?200:i}this.binding.$bind(e,t,s)}$unbind(e){var t;null===(t=this.task)||void 0===t||t.cancel(),this.task=null,super.$unbind(e)}}H("throttle")(Mr);class Br{constructor(){this.propertyKey="",this.type=6}getValue(e,t){return e.getAttribute(t)}setValue(e,t,s,i){null==e?s.removeAttribute(i):s.setAttribute(i,e)}}const Lr=new Br;let jr=class{bind(e,t,s,i){i.targetObserver=Lr}unbind(e,t,s,i){}};function Vr(e){const t=e.composedPath()[0];if(this.target===t)return this.selfEventCallSource(e)}jr=re([H("attr")],jr);let Ir=class{bind(e,t,s,i){if(!i.callSource||!i.targetEvent)throw new Error("Self binding behavior only supports events.");i.selfEventCallSource=i.callSource,i.callSource=Vr}unbind(e,t,s,i){i.callSource=i.selfEventCallSource,i.selfEventCallSource=null}};Ir=re([H("self")],Ir);const Nr=je();class qr{constructor(e){this.namespace=e,this.type=6}static forNs(e){var t;return null!==(t=Nr[e])&&void 0!==t?t:Nr[e]=new qr(e)}getValue(e,t){return e.getAttributeNS(this.namespace,t)}setValue(e,t,s,i){null==e?s.removeAttributeNS(this.namespace,i):s.setAttributeNS(this.namespace,i,e)}}function Dr(e,t){return e===t}class Fr{constructor(e,t,s,i){this.handler=s,this.observerLocator=i,this.value=void 0,this.oldValue=void 0,this.type=7,this.collectionObserver=void 0,this.valueObserver=void 0,this.f=0,this.obj=e}getValue(){return this.value}setValue(e,t){const s=this.value;e!==s&&(this.value=e,this.oldValue=s,this.f=t,this.observe(),this.synchronizeElement(),this.queue.add(this))}handleCollectionChange(e,t){this.synchronizeElement()}handleChange(e,t,s){this.synchronizeElement()}synchronizeElement(){const e=this.value,t=this.obj,s=Object.prototype.hasOwnProperty.call(t,"model")?t.model:t.value,i=void 0!==t.matcher?t.matcher:Dr;if("radio"===t.type)t.checked=!!i(e,s);else if(!0===e)t.checked=!0;else{let n=!1;if(e instanceof Array)n=-1!==e.findIndex((e=>!!i(e,s)));else if(e instanceof Set){for(const t of e)if(i(t,s)){n=!0;break}}else if(e instanceof Map)for(const t of e){const e=t[1];if(i(t[0],s)&&!0===e){n=!0;break}}t.checked=n}}handleEvent(){let e=this.oldValue=this.value;const t=this.obj,s=Object.prototype.hasOwnProperty.call(t,"model")?t.model:t.value,i=t.checked,n=void 0!==t.matcher?t.matcher:Dr;if("checkbox"===t.type){if(e instanceof Array){const t=e.findIndex((e=>!!n(e,s)));return void(i&&-1===t?e.push(s):i||-1===t||e.splice(t,1))}if(e instanceof Set){const t={};let r=t;for(const t of e)if(!0===n(t,s)){r=t;break}return void(i&&r===t?e.add(s):i||r===t||e.delete(r))}if(e instanceof Map){let t;for(const i of e){const e=i[0];if(!0===n(e,s)){t=e;break}}return void e.set(t,i)}e=i}else{if(!i)return;e=s}this.value=e,this.queue.add(this)}start(){this.handler.subscribe(this.obj,this),this.observe()}stop(){var e,t;this.handler.dispose(),null===(e=this.collectionObserver)||void 0===e||e.unsubscribe(this),this.collectionObserver=void 0,null===(t=this.valueObserver)||void 0===t||t.unsubscribe(this)}subscribe(e){this.subs.add(e)&&1===this.subs.count&&this.start()}unsubscribe(e){this.subs.remove(e)&&0===this.subs.count&&this.stop()}flush(){zr=this.oldValue,this.oldValue=this.value,this.subs.notify(this.value,zr,this.f)}observe(){var e,t,s,i,n,r,o;const a=this.obj;null===(n=null!==(e=this.valueObserver)&&void 0!==e?e:this.valueObserver=null!==(s=null===(t=a.$observers)||void 0===t?void 0:t.model)&&void 0!==s?s:null===(i=a.$observers)||void 0===i?void 0:i.value)||void 0===n||n.subscribe(this),null===(r=this.collectionObserver)||void 0===r||r.unsubscribe(this),this.collectionObserver=void 0,"checkbox"===a.type&&(null===(o=this.collectionObserver=function(e,t){if(e instanceof Array)return t.getArrayObserver(e);if(e instanceof Map)return t.getMapObserver(e);if(e instanceof Set)return t.getSetObserver(e)}(this.value,this.observerLocator))||void 0===o||o.subscribe(this))}}let zr;M(Fr),B(Fr);const Ur=Object.prototype.hasOwnProperty,Kr={childList:!0,subtree:!0,characterData:!0};function Wr(e,t){return e===t}class Hr{constructor(e,t,s,i){this.handler=s,this.observerLocator=i,this.value=void 0,this.oldValue=void 0,this.hasChanges=!1,this.type=7,this.arrayObserver=void 0,this.nodeObserver=void 0,this.observing=!1,this.obj=e}getValue(){return this.observing?this.value:this.obj.multiple?Array.from(this.obj.options).map((e=>e.value)):this.obj.value}setValue(e,t){this.oldValue=this.value,this.value=e,this.hasChanges=e!==this.oldValue,this.observeArray(e instanceof Array?e:null),0==(256&t)&&this.flushChanges(t)}flushChanges(e){this.hasChanges&&(this.hasChanges=!1,this.syncOptions())}handleCollectionChange(){this.syncOptions()}syncOptions(){var e;const t=this.value,s=this.obj,i=Array.isArray(t),n=null!==(e=s.matcher)&&void 0!==e?e:Wr,r=s.options;let o=r.length;for(;o-- >0;){const e=r[o],s=Ur.call(e,"model")?e.model:e.value;i?e.selected=-1!==t.findIndex((e=>!!n(s,e))):e.selected=!!n(s,t)}}syncValue(){const e=this.obj,t=e.options,s=t.length,i=this.value;let n=0;if(e.multiple){if(!(i instanceof Array))return!0;let r;const o=e.matcher||Wr,a=[];for(;n<s;)r=t[n],r.selected&&a.push(Ur.call(r,"model")?r.model:r.value),++n;for(n=0;n<i.length;){const e=i[n];-1===a.findIndex((t=>!!o(e,t)))?i.splice(n,1):++n}for(n=0;n<a.length;){const e=a[n];-1===i.findIndex((t=>!!o(e,t)))&&i.push(e),++n}return!1}let r=null;for(;n<s;){const e=t[n];if(e.selected){r=Ur.call(e,"model")?e.model:e.value;break}++n}return this.oldValue=this.value,this.value=r,!0}start(){(this.nodeObserver=new this.obj.ownerDocument.defaultView.MutationObserver(this.handleNodeChange.bind(this))).observe(this.obj,Kr),this.observeArray(this.value instanceof Array?this.value:null),this.observing=!0}stop(){var e;this.nodeObserver.disconnect(),null===(e=this.arrayObserver)||void 0===e||e.unsubscribe(this),this.nodeObserver=this.arrayObserver=void 0,this.observing=!1}observeArray(e){var t;if(null===(t=this.arrayObserver)||void 0===t||t.unsubscribe(this),this.arrayObserver=void 0,null!=e){if(!this.obj.multiple)throw new Error("Only null or Array instances can be bound to a multi-select.");(this.arrayObserver=this.observerLocator.getArrayObserver(e)).subscribe(this)}}handleEvent(){this.syncValue()&&this.queue.add(this)}handleNodeChange(){this.syncOptions();this.syncValue()&&this.queue.add(this)}subscribe(e){this.subs.add(e)&&1===this.subs.count&&(this.handler.subscribe(this.obj,this),this.start())}unsubscribe(e){this.subs.remove(e)&&0===this.subs.count&&(this.handler.dispose(),this.stop())}flush(){Gr=this.oldValue,this.oldValue=this.value,this.subs.notify(this.value,Gr,0)}}let Gr;M(Hr),B(Hr);class _r{constructor(e){this.obj=e,this.value="",this.oldValue="",this.styles={},this.version=0,this.hasChanges=!1,this.type=6}getValue(){return this.obj.style.cssText}setValue(e,t){this.value=e,this.hasChanges=e!==this.oldValue,0==(256&t)&&this.flushChanges(t)}getStyleTuplesFromString(e){const t=[],s=/url\([^)]+$/;let i,n,r,o,a=0,l="";for(;a<e.length;)i=e.indexOf(";",a),-1===i&&(i=e.length),l+=e.substring(a,i),a=i+1,s.test(l)?l+=";":(n=l.indexOf(":"),r=l.substring(0,n).trim(),o=l.substring(n+1).trim(),t.push([r,o]),l="");return t}getStyleTuplesFromObject(e){let t;const s=[];for(const i in e)if(t=e[i],null!=t)if("string"!=typeof t)s.push(...this.getStyleTuples(t));else{if(i.startsWith("--")){s.push([i,t]);continue}s.push([r(i),t])}return s}getStyleTuplesFromArray(e){const t=e.length;if(t>0){const s=[];for(let i=0;i<t;++i)s.push(...this.getStyleTuples(e[i]));return s}return a}getStyleTuples(e){return"string"==typeof e?this.getStyleTuplesFromString(e):e instanceof Array?this.getStyleTuplesFromArray(e):e instanceof Object?this.getStyleTuplesFromObject(e):a}flushChanges(e){if(this.hasChanges){this.hasChanges=!1;const e=this.value,t=this.styles,s=this.getStyleTuples(e);let i,n,r,o,a=this.version;this.oldValue=e;const l=s.length;for(let e=0;e<l;++e)n=s[e],r=n[0],o=n[1],this.setProperty(r,o),t[r]=a;if(this.styles=t,this.version+=1,0===a)return;for(i in a-=1,t)Object.prototype.hasOwnProperty.call(t,i)&&t[i]===a&&this.obj.style.removeProperty(i)}}setProperty(e,t){let s="";null!=t&&"function"==typeof t.indexOf&&t.includes("!important")&&(s="important",t=t.replace("!important","")),this.obj.style.setProperty(e,t,s)}bind(e){this.value=this.oldValue=this.obj.style.cssText}}class Qr{constructor(e,t,s){this.propertyKey=t,this.handler=s,this.value="",this.oldValue="",this.hasChanges=!1,this.type=7,this.obj=e}getValue(){return this.value}setValue(e,t){Object.is(e,this.value)||(this.oldValue=this.value,this.value=e,this.hasChanges=!0,this.handler.config.readonly||0!=(256&t)||this.flushChanges(t))}flushChanges(e){var t;this.hasChanges&&(this.hasChanges=!1,this.obj[this.propertyKey]=null!==(t=this.value)&&void 0!==t?t:this.handler.config.default,0==(2&e)&&this.queue.add(this))}handleEvent(){this.oldValue=this.value,this.value=this.obj[this.propertyKey],this.oldValue!==this.value&&(this.hasChanges=!1,this.queue.add(this))}subscribe(e){this.subs.add(e)&&1===this.subs.count&&(this.handler.subscribe(this.obj,this),this.value=this.oldValue=this.obj[this.propertyKey])}unsubscribe(e){this.subs.remove(e)&&0===this.subs.count&&this.handler.dispose()}flush(){Xr=this.oldValue,this.oldValue=this.value,this.subs.notify(this.value,Xr,0)}}let Xr;M(Qr),B(Qr);const Yr="http://www.w3.org/1999/xlink",Zr="http://www.w3.org/XML/1998/namespace",Jr="http://www.w3.org/2000/xmlns/",eo=Object.assign(je(),{"xlink:actuate":["actuate",Yr],"xlink:arcrole":["arcrole",Yr],"xlink:href":["href",Yr],"xlink:role":["role",Yr],"xlink:show":["show",Yr],"xlink:title":["title",Yr],"xlink:type":["type",Yr],"xml:lang":["lang",Zr],"xml:space":["space",Zr],xmlns:["xmlns",Jr],"xmlns:xlink":["xlink",Jr]}),to=new Q;to.type=6;class so{constructor(e){var t;this.type=null!==(t=e.type)&&void 0!==t?t:Qr,this.events=e.events,this.readonly=e.readonly,this.default=e.default}}class io{constructor(e,t,s,i){this.locator=e,this.platform=t,this.dirtyChecker=s,this.svgAnalyzer=i,this.allowDirtyCheck=!0,this.events=je(),this.globalEvents=je(),this.overrides=je(),this.globalOverrides=je();const n=["change","input"],r={events:n,default:""};this.useConfig({INPUT:{value:r,valueAsNumber:{events:n,default:0},checked:{type:Fr,events:n},files:{events:n,readonly:!0}},SELECT:{value:{type:Hr,events:["change"],default:""}},TEXTAREA:{value:r}});const o={events:["change","input","blur","keyup","paste"],default:""},a={events:["scroll"],default:0};this.useConfigGlobal({scrollTop:a,scrollLeft:a,textContent:o,innerHTML:o}),this.overrideAccessorGlobal("css","style","class"),this.overrideAccessor({INPUT:["value","checked","model"],SELECT:["value"],TEXTAREA:["value"]})}static register(e){c.aliasTo(X,io).register(e),c.singleton(X,io).register(e)}handles(e,t){return e instanceof this.platform.Node}useConfig(e,t,s){var i,n;const r=this.events;let o;if("string"==typeof e)o=null!==(i=r[e])&&void 0!==i?i:r[e]=je(),null==o[t]?o[t]=new so(s):no(e,t);else for(const s in e){o=null!==(n=r[s])&&void 0!==n?n:r[s]=je();const i=e[s];for(t in i)null==o[t]?o[t]=new so(i[t]):no(s,t)}}useConfigGlobal(e,t){const s=this.globalEvents;if("object"==typeof e)for(const t in e)null==s[t]?s[t]=new so(e[t]):no("*",t);else null==s[e]?s[e]=new so(t):no("*",e)}getAccessor(e,t,s){var i;if(t in this.globalOverrides||t in(null!==(i=this.overrides[e.tagName])&&void 0!==i?i:A))return this.getObserver(e,t,s);switch(t){case"src":case"href":case"role":return Lr;default:{const s=eo[t];return void 0!==s?qr.forNs(s[1]):Le(e,t,this.svgAnalyzer)?Lr:to}}}overrideAccessor(e,t){var s,i,n,r;let o;if("string"==typeof e)o=null!==(s=(n=this.overrides)[e])&&void 0!==s?s:n[e]=je(),o[t]=!0;else for(const t in e)for(const s of e[t])o=null!==(i=(r=this.overrides)[t])&&void 0!==i?i:r[t]=je(),o[s]=!0}overrideAccessorGlobal(...e){for(const t of e)this.globalOverrides[t]=!0}getObserver(e,t,s){var i,n;switch(t){case"role":return Lr;case"class":return new ps(e);case"css":case"style":return new _r(e)}const r=null!==(n=null===(i=this.events[e.tagName])||void 0===i?void 0:i[t])&&void 0!==n?n:this.globalEvents[t];if(null!=r)return new r.type(e,t,new Mi(r),s,this.locator);const o=eo[t];if(void 0!==o)return qr.forNs(o[1]);if(Le(e,t,this.svgAnalyzer))return Lr;if(t in e.constructor.prototype){if(this.allowDirtyCheck)return this.dirtyChecker.createProperty(e,t);throw new Error(`Unable to observe property ${String(t)}. Register observation mapping with .useConfig().`)}return new Y(e,t)}}function no(e,t){throw new Error(`Mapping for property ${String(t)} of <${e} /> already exists`)}io.inject=[E,Ve,Z,Ie];let ro=class{constructor(e){this.observerLocator=e}bind(e,t,s,i,...n){if(0===n.length)throw new Error("The updateTrigger binding behavior requires at least one event name argument: eg <input value.bind=\"firstName & updateTrigger:'blur'\">");if(i.mode!==R.twoWay&&i.mode!==R.fromView)throw new Error("The updateTrigger binding behavior can only be applied to two-way/ from-view bindings on input/select elements.");const r=this.observerLocator.getObserver(i.target,i.targetProperty);if(!r.handler)throw new Error("The updateTrigger binding behavior can only be applied to two-way/ from-view bindings on input/select elements.");i.targetObserver=r;const o=r.handler;r.originalHandler=o,r.handler=new Mi(new so({default:o.config.default,events:n,readonly:o.config.readonly}))}unbind(e,t,s,i){i.targetObserver.handler.dispose(),i.targetObserver.handler=i.targetObserver.originalHandler,i.targetObserver.originalHandler=null}};ro=re([H("updateTrigger"),oe(0,q)],ro);let oo=class{constructor(e,t){this.element=e,this.p=t,this.needsApply=!1}binding(){this.valueChanged()}valueChanged(){this.$controller.isActive?this.apply():this.needsApply=!0}attached(){this.needsApply&&(this.needsApply=!1,this.apply());const e=this.element;e.addEventListener("focus",this),e.addEventListener("blur",this)}afterDetachChildren(){const e=this.element;e.removeEventListener("focus",this),e.removeEventListener("blur",this)}handleEvent(e){"focus"===e.type?this.value=!0:this.isElFocused||(this.value=!1)}apply(){const e=this.element,t=this.isElFocused,s=this.value;s&&!t?e.focus():!s&&t&&e.blur()}get isElFocused(){return this.element===this.p.document.activeElement}};re([ae({mode:R.twoWay})],oo.prototype,"value",void 0),oo=re([Rt("focus"),oe(0,gi),oe(1,Ve)],oo);let ao=class{constructor(e,t,s){this.el=e,this.p=t,this.isActive=!1,this.task=null,this.$val="",this.$prio="",this.update=()=>{this.task=null,Boolean(this.value)!==this.isToggled&&(this.isToggled===this.base?(this.isToggled=!this.base,this.$val=this.el.style.getPropertyValue("display"),this.$prio=this.el.style.getPropertyPriority("display"),this.el.style.setProperty("display","none","important")):(this.isToggled=this.base,this.el.style.setProperty("display",this.$val,this.$prio),""===this.el.getAttribute("style")&&this.el.removeAttribute("style")))},this.isToggled=this.base="hide"!==s.alias}binding(){this.isActive=!0,this.update()}detaching(){var e;this.isActive=!1,null===(e=this.task)||void 0===e||e.cancel(),this.task=null}valueChanged(){this.isActive&&null===this.task&&(this.task=this.p.domWriteQueue.queueTask(this.update))}};re([ae],ao.prototype,"value",void 0),ao=re([Rt("show"),J("hide"),oe(0,gi),oe(1,Ve),oe(2,qi)],ao);let lo=class{constructor(e,t,s){this.factory=e,this.originalLoc=t,this.p=s,this.id=b("au$component"),this.strict=!1,this.currentTarget=s.document.createElement("div"),this.view=this.factory.create(),wi(this.view.nodes,t)}attaching(e,t,s){null==this.callbackContext&&(this.callbackContext=this.$controller.scope.bindingContext);const i=this.currentTarget=this.resolveTarget();return this.view.setHost(i),this.$activating(e,i,s)}detaching(e,t,s){return this.$deactivating(e,this.currentTarget,s)}targetChanged(){const{$controller:e}=this;if(!e.isActive)return;const t=this.currentTarget,s=this.currentTarget=this.resolveTarget();if(t===s)return;this.view.setHost(s);const i=C(this.$deactivating(null,s,e.flags),(()=>this.$activating(null,s,e.flags)));i instanceof Promise&&i.catch((e=>{throw e}))}$activating(e,t,s){const{activating:i,callbackContext:n,view:r}=this;return r.setHost(t),C(null==i?void 0:i.call(n,t,r),(()=>this.activate(e,t,s)))}activate(e,t,s){const{$controller:i,view:n}=this;return null!==e?C(n.activate(null!=e?e:n,i,s,i.scope),(()=>this.$activated(t))):(n.nodes.appendTo(t),this.$activated(t))}$activated(e){const{activated:t,callbackContext:s,view:i}=this;return null==t?void 0:t.call(s,e,i)}$deactivating(e,t,s){const{deactivating:i,callbackContext:n,view:r}=this;return C(null==i?void 0:i.call(n,t,r),(()=>this.deactivate(e,t,s)))}deactivate(e,t,s){const{$controller:i,view:n}=this;return null!==e?C(n.deactivate(e,i,s),(()=>this.$deactivated(t))):(n.nodes.remove(),this.$deactivated(t))}$deactivated(e){const{deactivated:t,callbackContext:s,view:i}=this;return null==t?void 0:t.call(s,e,i)}resolveTarget(){const e=this.p,t=e.document;let s=this.target,i=this.renderContext;if(""===s){if(this.strict)throw new Error("Empty querySelector");return t.body}if("string"==typeof s){let n=t;"string"==typeof i&&(i=t.querySelector(i)),i instanceof e.Node&&(n=i),s=n.querySelector(s)}if(s instanceof e.Node)return s;if(null==s){if(this.strict)throw new Error("Portal target not found");return t.body}return s}dispose(){this.view.dispose(),this.view=void 0,this.callbackContext=null}accept(e){var t;if(!0===(null===(t=this.view)||void 0===t?void 0:t.accept(e)))return!0}};re([ae({primary:!0})],lo.prototype,"target",void 0),re([ae({callback:"targetChanged"})],lo.prototype,"renderContext",void 0),re([ae()],lo.prototype,"strict",void 0),re([ae()],lo.prototype,"deactivating",void 0),re([ae()],lo.prototype,"activating",void 0),re([ae()],lo.prototype,"deactivated",void 0),re([ae()],lo.prototype,"activated",void 0),re([ae()],lo.prototype,"callbackContext",void 0),lo=re([Mt("portal"),oe(0,Qt),oe(1,vi),oe(2,Ve)],lo);class ho{constructor(e,t,s){this.factory=e,this.flags=s,this.id=b("au$component"),this.view=this.factory.create().setLocation(t)}attaching(e,t,s){const{$controller:i}=this;return this.view.activate(e,i,s|this.flags,i.scope,i.hostScope)}detaching(e,t,s){return this.view.deactivate(e,this.$controller,s)}dispose(){this.view.dispose(),this.view=void 0}accept(e){var t;if(!0===(null===(t=this.view)||void 0===t?void 0:t.accept(e)))return!0}}class co extends ho{constructor(e,t){super(e,t,512)}}co.inject=[Qt,vi];class uo extends ho{constructor(e,t){super(e,t,128)}}uo.inject=[Qt,vi],Mt("frequent-mutations")(co),Mt("observe-shallow")(uo);let po=class{constructor(e,t,s){this.ifFactory=e,this.location=t,this.work=s,this.id=b("au$component"),this.elseFactory=void 0,this.elseView=void 0,this.ifView=void 0,this.view=void 0,this.value=!1,this.cache=!0,this.pending=void 0,this.wantsDeactivate=!1,this.swapId=0}created(){this.ctrl=this.$controller}attaching(e,t,s){let i;const n=this.swapId++,r=()=>!this.wantsDeactivate&&this.swapId===n+1;return C(this.pending,(()=>{var t;r()&&(this.pending=void 0,i=this.view=this.value?this.ifView=this.cache&&null!=this.ifView?this.ifView:this.ifFactory.create(s):this.elseView=this.cache&&null!=this.elseView?this.elseView:null===(t=this.elseFactory)||void 0===t?void 0:t.create(s),null!=i&&(i.setLocation(this.location),this.pending=C(i.activate(e,this.ctrl,s,this.ctrl.scope,this.ctrl.hostScope),(()=>{r()&&(this.pending=void 0)}))))}))}detaching(e,t,s){return this.wantsDeactivate=!0,C(this.pending,(()=>{var t;this.wantsDeactivate=!1,this.pending=void 0,null===(t=this.view)||void 0===t||t.deactivate(e,this.ctrl,s)}))}valueChanged(e,t,s){if(!this.ctrl.isActive)return;if((e=!!e)===(t=!!t))return;this.work.start();const i=this.view,n=this.swapId++,r=()=>!this.wantsDeactivate&&this.swapId===n+1;let o;return C(C(this.pending,(()=>this.pending=C(null==i?void 0:i.deactivate(i,this.ctrl,s),(()=>{var t;if(r()&&(o=this.view=e?this.ifView=this.cache&&null!=this.ifView?this.ifView:this.ifFactory.create(s):this.elseView=this.cache&&null!=this.elseView?this.elseView:null===(t=this.elseFactory)||void 0===t?void 0:t.create(s),null!=o))return o.setLocation(this.location),C(o.activate(o,this.ctrl,s,this.ctrl.scope,this.ctrl.hostScope),(()=>{r()&&(this.pending=void 0)}))})))),(()=>this.work.finish()))}dispose(){var e,t;null===(e=this.ifView)||void 0===e||e.dispose(),null===(t=this.elseView)||void 0===t||t.dispose(),this.ifView=this.elseView=this.view=void 0}accept(e){var t;if(!0===(null===(t=this.view)||void 0===t?void 0:t.accept(e)))return!0}};re([ae],po.prototype,"value",void 0),re([ae({set:e=>""===e||!!e&&"false"!==e})],po.prototype,"cache",void 0),po=re([Mt("if"),oe(0,Qt),oe(1,vi),oe(2,li)],po);let go=class{constructor(e){this.factory=e,this.id=b("au$component")}link(e,t,s,i,n,r){const o=s.children,a=o[o.length-1];if(a instanceof po)a.elseFactory=this.factory;else{if(!(a.viewModel instanceof po))throw new Error("Unsupported IfBehavior");a.viewModel.elseFactory=this.factory}}};function fo(e){e.dispose()}go=re([Mt({name:"else"}),oe(0,Qt)],go);let vo=class{constructor(e,t,s){this.location=e,this.parent=t,this.factory=s,this.id=b("au$component"),this.hasPendingInstanceMutation=!1,this.observer=void 0,this.views=[],this.key=void 0,this.normalizedItems=void 0}binding(e,t,s){this.checkCollectionObserver(s);const i=this.parent.bindings;let n;for(let e=0,t=i.length;e<t;++e)if(n=i[e],n.target===this&&"items"===n.targetProperty){this.forOf=n.sourceExpression;break}this.local=this.forOf.declaration.evaluate(s,this.$controller.scope,null,n.locator,null)}attaching(e,t,s){return this.normalizeToArray(s),this.activateAllViews(e,s)}detaching(e,t,s){return this.checkCollectionObserver(s),this.deactivateAllViews(e,s)}itemsChanged(e){const{$controller:t}=this;if(!t.isActive)return;this.checkCollectionObserver(e|=t.flags),this.normalizeToArray(e);const s=C(this.deactivateAllViews(null,e),(()=>this.activateAllViews(null,e)));s instanceof Promise&&s.catch((e=>{throw e}))}handleCollectionChange(e,t){const{$controller:s}=this;if(s.isActive)if(this.normalizeToArray(t|=s.flags),void 0===e){const e=C(this.deactivateAllViews(null,t),(()=>this.activateAllViews(null,t)));e instanceof Promise&&e.catch((e=>{throw e}))}else{const s=this.views.length;if(ee(e),e.deletedItems.length>0){e.deletedItems.sort(O);const i=C(this.deactivateAndRemoveViewsByKey(e,t),(()=>this.createAndActivateAndSortViewsByKey(s,e,t)));i instanceof Promise&&i.catch((e=>{throw e}))}else this.createAndActivateAndSortViewsByKey(s,e,t)}}checkCollectionObserver(e){const t=this.observer;if(4&e)void 0!==t&&t.unsubscribe(this);else if(this.$controller.isActive){const e=this.observer=te(this.items);t!==e&&t&&t.unsubscribe(this),e&&e.subscribe(this)}}normalizeToArray(e){const t=this.items;if(t instanceof Array)return void(this.normalizedItems=t);if(void 0===this.forOf)return;const s=[];this.forOf.iterate(e,t,((e,t,i)=>{s[t]=i})),this.normalizedItems=s}activateAllViews(e,t){let s,i,n,r;const{$controller:o,factory:a,local:l,location:h,items:c}=this,u=o.scope,d=o.hostScope,p=this.forOf.count(t,c),g=this.views=Array(p);if(this.forOf.iterate(t,c,((c,f,v)=>{n=g[f]=a.create(t).setLocation(h),n.nodes.unlink(),r=V.fromParent(u,se.create(l,v)),wo(r.overrideContext,f,p),i=n.activate(null!=e?e:n,o,t,r,d),i instanceof Promise&&(null!=s?s:s=[]).push(i)})),void 0!==s)return 1===s.length?s[0]:Promise.all(s)}deactivateAllViews(e,t){let s,i,n;const{views:r,$controller:o}=this;for(let a=0,l=r.length;a<l;++a)n=r[a],n.release(),i=n.deactivate(null!=e?e:n,o,t),i instanceof Promise&&(null!=s?s:s=[]).push(i);if(void 0!==s)return 1===s.length?s[0]:Promise.all(s)}deactivateAndRemoveViewsByKey(e,t){let s,i,n;const{$controller:r,views:o}=this,a=e.deletedItems,l=a.length;let h=0;for(;h<l;++h)n=o[a[h]],n.release(),i=n.deactivate(n,r,t),i instanceof Promise&&(null!=s?s:s=[]).push(i);h=0;let c=0;for(;h<l;++h)c=a[h]-h,o.splice(c,1);if(void 0!==s)return 1===s.length?s[0]:Promise.all(s)}createAndActivateAndSortViewsByKey(e,t,s){var i;let n,r,o,a;const{$controller:l,factory:h,local:c,normalizedItems:u,location:d,views:p}=this,g=t.length;for(let e=0;e<g;++e)-2===t[e]&&(o=h.create(s),p.splice(e,0,o));if(p.length!==g)throw new Error(`viewsLen=${p.length}, mapLen=${g}`);const f=l.scope,v=l.hostScope,m=t.length;ie(p,t);const b=function(e){const t=e.length;t>mo&&(mo=t,bo=new Int32Array(t),yo=new Int32Array(t));let s=0,i=0,n=0,r=0,o=0,a=0,l=0,h=0;for(;r<t;r++)if(i=e[r],-2!==i){if(o=bo[s],n=e[o],-2!==n&&n<i){yo[r]=o,bo[++s]=r;continue}for(a=0,l=s;a<l;)h=a+l>>1,n=e[bo[h]],-2!==n&&n<i?a=h+1:l=h;n=e[bo[a]],(i<n||-2===n)&&(a>0&&(yo[r]=bo[a-1]),bo[a]=r)}r=++s;const c=new Int32Array(r);i=bo[s-1];for(;s-- >0;)c[s]=i,i=yo[i];for(;r-- >0;)bo[r]=0;return c}(t),y=b.length;let w,x=y-1,k=m-1;for(;k>=0;--k)o=p[k],w=p[k+1],o.nodes.link(null!==(i=null==w?void 0:w.nodes)&&void 0!==i?i:d),-2===t[k]?(a=V.fromParent(f,se.create(c,u[k])),wo(a.overrideContext,k,m),o.setLocation(d),r=o.activate(o,l,s,a,v),r instanceof Promise&&(null!=n?n:n=[]).push(r)):x<0||1===y||k!==b[x]?(wo(o.scope.overrideContext,k,m),o.nodes.insertBefore(o.location)):(e!==m&&wo(o.scope.overrideContext,k,m),--x);if(void 0!==n)return 1===n.length?n[0]:Promise.all(n)}dispose(){this.views.forEach(fo),this.views=void 0}accept(e){const{views:t}=this;if(void 0!==t)for(let s=0,i=t.length;s<i;++s)if(!0===t[s].accept(e))return!0}};re([ae],vo.prototype,"items",void 0),vo=re([Mt("repeat"),oe(0,vi),oe(1,ii),oe(2,Qt)],vo);let mo=16,bo=new Int32Array(mo),yo=new Int32Array(mo);function wo(e,t,s){const i=0===t,n=t===s-1,r=t%2==0;e.$index=t,e.$first=i,e.$last=n,e.$middle=!i&&!n,e.$even=r,e.$odd=!r,e.$length=s}let xo=class{constructor(e,t){this.factory=e,this.location=t,this.id=b("au$component"),this.id=b("au$component"),this.view=this.factory.create().setLocation(t)}valueChanged(e,t,s){const i=this.$controller,n=this.view.bindings;let r,o=0,a=0;if(i.isActive&&null!=n)for(r=V.fromParent(i.scope,void 0===e?{}:e),a=n.length;a>o;++o)n[o].$bind(2,r,i.hostScope)}attaching(e,t,s){const{$controller:i,value:n}=this,r=V.fromParent(i.scope,void 0===n?{}:n);return this.view.activate(e,i,s,r,i.hostScope)}detaching(e,t,s){return this.view.deactivate(e,this.$controller,s)}dispose(){this.view.dispose(),this.view=void 0}accept(e){var t;if(!0===(null===(t=this.view)||void 0===t?void 0:t.accept(e)))return!0}};re([ae],xo.prototype,"value",void 0),xo=re([Mt("with"),oe(0,Qt),oe(1,vi)],xo);let ko=class{constructor(e,t){this.factory=e,this.location=t,this.id=b("au$component"),this.cases=[],this.activeCases=[],this.promise=void 0}link(e,t,s,i,n,r){this.view=this.factory.create(e,this.$controller).setLocation(this.location)}attaching(e,t,s){const i=this.view,n=this.$controller;return this.queue((()=>i.activate(e,n,s,n.scope,n.hostScope))),this.queue((()=>this.swap(e,s,this.value))),this.promise}detaching(e,t,s){return this.queue((()=>this.view.deactivate(e,this.$controller,s))),this.promise}dispose(){var e;null===(e=this.view)||void 0===e||e.dispose(),this.view=void 0}valueChanged(e,t,s){this.$controller.isActive&&this.queue((()=>this.swap(null,s,this.value)))}caseChanged(e,t){this.queue((()=>this.handleCaseChange(e,t)))}handleCaseChange(e,t){const s=e.isMatch(this.value,t),i=this.activeCases,n=i.length;if(!s)return n>0&&i[0].id===e.id?this.clearActiveCases(null,t):void 0;if(n>0&&i[0].id<e.id)return;const r=[];let o=e.fallThrough;if(o){const t=this.cases;for(let s=t.indexOf(e),i=t.length;s<i&&o;s++){const e=t[s];r.push(e),o=e.fallThrough}}else r.push(e);return C(this.clearActiveCases(null,t,r),(()=>(this.activeCases=r,this.activateCases(null,t))))}swap(e,t,s){const i=[];let n=!1;for(const e of this.cases)if((n||e.isMatch(s,t))&&(i.push(e),n=e.fallThrough),i.length>0&&!n)break;const r=this.defaultCase;return 0===i.length&&void 0!==r&&i.push(r),C(this.activeCases.length>0?this.clearActiveCases(e,t,i):void 0,(()=>{if(this.activeCases=i,0!==i.length)return this.activateCases(e,t)}))}activateCases(e,t){const s=this.$controller;if(!s.isActive)return;const i=this.activeCases,n=i.length;if(0===n)return;const r=s.scope,o=s.hostScope;return 1===n?i[0].activate(e,t,r,o):$(...i.map((s=>s.activate(e,t,r,o))))}clearActiveCases(e,t,s=[]){const i=this.activeCases,n=i.length;if(0!==n){if(1===n){const n=i[0];return s.includes(n)?void 0:(i.length=0,n.deactivate(e,t))}return C($(...i.reduce(((i,n)=>(s.includes(n)||i.push(n.deactivate(e,t)),i)),[])),(()=>{i.length=0}))}}queue(e){let t;t=this.promise=C(C(this.promise,e),(()=>{this.promise===t&&(this.promise=void 0)}))}accept(e){return!0===this.$controller.accept(e)||(!!this.activeCases.some((t=>t.accept(e)))||void 0)}};re([ae],ko.prototype,"value",void 0),ko=re([Mt("switch"),oe(0,Qt),oe(1,vi)],ko);let Co=class{constructor(e,t,s,i){this.factory=e,this.locator=t,this.id=b("au$component"),this.fallThrough=!1,this.debug=i.config.level<=1,this.logger=i.scopeTo(`${this.constructor.name}-#${this.id}`),this.view=this.factory.create().setLocation(s)}link(e,t,s,i,n,r){const o=s.parent,a=null==o?void 0:o.viewModel;if(!(a instanceof ko))throw new Error("The parent switch not found; only `*[switch] > *[case|default-case]` relation is supported.");this.$switch=a,this.linkToSwitch(a)}detaching(e,t,s){return this.deactivate(e,s)}isMatch(e,t){this.debug&&this.logger.debug("isMatch()");const s=this.value;return Array.isArray(s)?(void 0===this.observer&&(this.observer=this.observeCollection(t,s)),s.includes(e)):s===e}valueChanged(e,t,s){var i;Array.isArray(e)?(null===(i=this.observer)||void 0===i||i.unsubscribe(this),this.observer=this.observeCollection(s,e)):void 0!==this.observer&&this.observer.unsubscribe(this),this.$switch.caseChanged(this,s)}handleCollectionChange(e,t){this.$switch.caseChanged(this,t)}activate(e,t,s,i){const n=this.view;if(!n.isActive)return n.activate(null!=e?e:n,this.$controller,t,s,i)}deactivate(e,t){const s=this.view;if(s.isActive)return s.deactivate(null!=e?e:s,this.$controller,t)}dispose(){var e,t;null===(e=this.observer)||void 0===e||e.unsubscribe(this),null===(t=this.view)||void 0===t||t.dispose(),this.view=void 0}linkToSwitch(e){e.cases.push(this)}observeCollection(e,t){const s=this.locator.getArrayObserver(t);return s.subscribe(this),s}accept(e){var t;return!0===this.$controller.accept(e)||(null===(t=this.view)||void 0===t?void 0:t.accept(e))}};re([ae],Co.prototype,"value",void 0),re([ae({set:e=>{switch(e){case"true":return!0;case"false":return!1;default:return!!e}},mode:R.oneTime})],Co.prototype,"fallThrough",void 0),Co=re([Mt("case"),oe(0,Qt),oe(1,q),oe(2,vi),oe(3,x)],Co);let $o=class extends Co{linkToSwitch(e){if(void 0!==e.defaultCase)throw new Error("Multiple 'default-case's are not allowed.");e.defaultCase=this}};$o=re([Mt("default-case")],$o);let So=class{constructor(e,t,s,i){this.factory=e,this.location=t,this.platform=s,this.id=b("au$component"),this.preSettledTask=null,this.postSettledTask=null,this.logger=i.scopeTo("promise.resolve")}link(e,t,s,i,n,r){this.view=this.factory.create(e,this.$controller).setLocation(this.location)}attaching(e,t,s){const i=this.$controller;return C(this.view.activate(e,i,s,this.viewScope=V.fromParent(i.scope,{}),i.hostScope),(()=>this.swap(e,s)))}valueChanged(e,t,s){this.$controller.isActive&&this.swap(null,s)}swap(e,t){var s,i;const n=this.value;if(!(n instanceof Promise))return void this.logger.warn(`The value '${String(n)}' is not a promise. No change will be done.`);const r=this.platform.domWriteQueue,o=this.fulfilled,a=this.rejected,l=this.pending,h=this.viewScope,c=this.$controller.hostScope;let u;const d={reusable:!1},p=()=>{$(u=(this.preSettledTask=r.queueTask((()=>$(null==o?void 0:o.deactivate(e,t),null==a?void 0:a.deactivate(e,t),null==l?void 0:l.activate(e,t,h,c))),d)).result,n.then((s=>{if(this.value!==n)return;const i=()=>{this.postSettlePromise=(this.postSettledTask=r.queueTask((()=>$(null==l?void 0:l.deactivate(e,t),null==a?void 0:a.deactivate(e,t),null==o?void 0:o.activate(e,t,h,c,s))),d)).result};1===this.preSettledTask.status?u.then(i):(this.preSettledTask.cancel(),i())}),(s=>{if(this.value!==n)return;const i=()=>{this.postSettlePromise=(this.postSettledTask=r.queueTask((()=>$(null==l?void 0:l.deactivate(e,t),null==o?void 0:o.deactivate(e,t),null==a?void 0:a.activate(e,t,h,c,s))),d)).result};1===this.preSettledTask.status?u.then(i):(this.preSettledTask.cancel(),i())})))};1===(null===(s=this.postSettledTask)||void 0===s?void 0:s.status)?this.postSettlePromise.then(p):(null===(i=this.postSettledTask)||void 0===i||i.cancel(),p())}detaching(e,t,s){var i,n;return null===(i=this.preSettledTask)||void 0===i||i.cancel(),null===(n=this.postSettledTask)||void 0===n||n.cancel(),this.preSettledTask=this.postSettledTask=null,this.view.deactivate(e,this.$controller,s)}dispose(){var e;null===(e=this.view)||void 0===e||e.dispose(),this.view=void 0}};re([ae],So.prototype,"value",void 0),So=re([Mt("promise"),oe(0,Qt),oe(1,vi),oe(2,Ve),oe(3,x)],So);let To=class{constructor(e,t){this.factory=e,this.id=b("au$component"),this.view=this.factory.create().setLocation(t)}link(e,t,s,i,n,r){Oo(s).pending=this}activate(e,t,s,i){const n=this.view;if(!n.isActive)return n.activate(n,this.$controller,t,s,i)}deactivate(e,t){const s=this.view;if(s.isActive)return s.deactivate(s,this.$controller,t)}detaching(e,t,s){return this.deactivate(e,s)}dispose(){var e;null===(e=this.view)||void 0===e||e.dispose(),this.view=void 0}};re([ae({mode:R.toView})],To.prototype,"value",void 0),To=re([Mt("pending"),oe(0,Qt),oe(1,vi)],To);let Ao=class{constructor(e,t){this.factory=e,this.id=b("au$component"),this.view=this.factory.create().setLocation(t)}link(e,t,s,i,n,r){Oo(s).fulfilled=this}activate(e,t,s,i,n){this.value=n;const r=this.view;if(!r.isActive)return r.activate(r,this.$controller,t,s,i)}deactivate(e,t){const s=this.view;if(s.isActive)return s.deactivate(s,this.$controller,t)}detaching(e,t,s){return this.deactivate(e,s)}dispose(){var e;null===(e=this.view)||void 0===e||e.dispose(),this.view=void 0}};re([ae({mode:R.toView})],Ao.prototype,"value",void 0),Ao=re([Mt("then"),oe(0,Qt),oe(1,vi)],Ao);let Eo=class{constructor(e,t){this.factory=e,this.id=b("au$component"),this.view=this.factory.create().setLocation(t)}link(e,t,s,i,n,r){Oo(s).rejected=this}activate(e,t,s,i,n){this.value=n;const r=this.view;if(!r.isActive)return r.activate(r,this.$controller,t,s,i)}deactivate(e,t){const s=this.view;if(s.isActive)return s.deactivate(s,this.$controller,t)}detaching(e,t,s){return this.deactivate(e,s)}dispose(){var e;null===(e=this.view)||void 0===e||e.dispose(),this.view=void 0}};function Oo(e){const t=e.parent,s=null==t?void 0:t.viewModel;if(s instanceof So)return s;throw new Error("The parent promise.resolve not found; only `*[promise.resolve] > *[pending|then|catch]` relation is supported.")}function Po(e,t,s,i){if("string"==typeof t)return function(e,t,s,i){const n=[],r=[],o=[],a=e.document.createElement(t);let l=!1;s&&Object.keys(s).forEach((e=>{const t=s[e];Di(t)?(l=!0,n.push(t)):a.setAttribute(e,t)}));l&&(a.className="au",r.push(n));i&&Mo(e,a,i,r,o);return new Ro(a,r,o)}(e,t,s,i);if(Wt.isType(t))return function(e,t,s,i){const n=Wt.getDefinition(t),r=[],o=[r],a=[],l=[],h=n.bindables,c=e.document.createElement(n.name);c.className="au",a.includes(t)||a.push(t);r.push(new Gi(n,void 0,l,null,!1)),s&&Object.keys(s).forEach((e=>{const t=s[e];Di(t)?l.push(t):l.push(void 0===h[e]?new tn(t,e):new Hi(t,e))}));i&&Mo(e,c,i,o,a);return new Ro(c,o,a)}(e,t,s,i);throw new Error("Invalid tagOrType.")}re([ae({mode:R.toView})],Eo.prototype,"value",void 0),Eo=re([Mt("catch"),oe(0,Qt),oe(1,vi)],Eo);class Ro{constructor(e,t,s){this.node=e,this.instructions=t,this.dependencies=s,this.lazyDefinition=void 0,this.childFor=new WeakMap}get definition(){return void 0===this.lazyDefinition&&(this.lazyDefinition=Ut.create({name:Wt.generateName(),template:this.node,needsCompile:"string"==typeof this.node,instructions:this.instructions,dependencies:this.dependencies})),this.lazyDefinition}getContext(e){const t=this.childFor;let s=t.get(e);return null==s&&t.set(e,(s=e.createChild()).register(...this.dependencies)),ls(this.definition,s)}createView(e){return this.getViewFactory(e).create()}getViewFactory(e){return this.getContext(e).getViewFactory()}mergeInto(e,t,s){e.appendChild(this.node),t.push(...this.instructions),s.push(...this.dependencies)}}function Mo(e,t,s,i,n){for(let r=0,o=s.length;r<o;++r){const o=s[r];switch(typeof o){case"string":t.appendChild(e.document.createTextNode(o));break;case"object":o instanceof e.Node?t.appendChild(o):"mergeInto"in o&&o.mergeInto(t,i,n)}}}function Bo(e,t){const s=t.to;return void 0!==s&&"subject"!==s&&"composing"!==s&&(e[s]=t),e}let Lo=class{constructor(e,t){this.p=e,this.id=b("au$component"),this.subject=void 0,this.composing=!1,this.view=void 0,this.lastSubject=void 0,this.properties=t.instructions.reduce(Bo,{})}attaching(e,t,s){const{subject:i,view:n}=this;return void 0===n||this.lastSubject!==i?(this.lastSubject=i,this.composing=!0,this.compose(void 0,i,e,s)):this.compose(n,i,e,s)}detaching(e,t,s){return this.deactivate(this.view,e,s)}subjectChanged(e,t,s){const{$controller:i}=this;if(!i.isActive)return;if(this.lastSubject===e)return;this.lastSubject=e,this.composing=!0;const n=C(this.deactivate(this.view,null,s|=i.flags),(()=>this.compose(void 0,e,null,s)));n instanceof Promise&&n.catch((e=>{throw e}))}compose(e,t,s,i){return C(void 0===e?C(t,(e=>this.resolveView(e,i))):e,(e=>this.activate(e,s,i)))}deactivate(e,t,s){return null==e?void 0:e.deactivate(null!=t?t:e,this.$controller,s)}activate(e,t,s){const{$controller:i}=this;return C(null==e?void 0:e.activate(null!=t?t:e,i,s,i.scope,i.hostScope),(()=>{this.composing=!1}))}resolveView(e,t){const s=this.provideViewFor(e,t);if(s)return s.setLocation(this.$controller.location),s.lockScope(this.$controller.scope),s}provideViewFor(e,t){if(e){if(function(e){return"lockScope"in e}(e))return e;if("createView"in e)return e.createView(this.$controller.container);if("create"in e)return e.create(t);if("template"in e){return ls(Ut.getOrCreate(e),this.$controller.container).getViewFactory().create(t)}return Po(this.p,e,this.properties,this.$controller.host.childNodes).createView(this.$controller.container)}}dispose(){var e;null===(e=this.view)||void 0===e||e.dispose(),this.view=void 0}accept(e){var t;if(!0===(null===(t=this.view)||void 0===t?void 0:t.accept(e)))return!0}};re([ae],Lo.prototype,"subject",void 0),re([ae({mode:R.fromView})],Lo.prototype,"composing",void 0),Lo=re([qt({name:"au-render",template:null,containerless:!0}),oe(0,Ve),oe(1,qi)],Lo);let jo=class{constructor(e,t,s,i,n,r){this.container=e,this.parent=t,this.host=s,this.p=i,this.instruction=n,this.contextFactory=r,this.scopeBehavior="auto",this.task=null,this.c=void 0,this.loc=n.containerless?xi(this.host):void 0}static get inject(){return[m,ii,gi,Ve,qi,P(Io)]}get composition(){return this.c}attaching(e,t,s){return this.queue(new No(this.view,this.viewModel,this.model,e,void 0))}detaching(e){var t;null===(t=this.task)||void 0===t||t.cancel(),this.task=null;const s=this.c;if(null!=s)return this.c=void 0,s.deactivate(e)}propertyChanged(e){const t=this.task;this.task=this.p.domWriteQueue.queueTask((()=>C(this.queue(new No(this.view,this.viewModel,this.model,void 0,e)),(()=>{this.task=null})))),null==t||t.cancel()}queue(e){const t=this.contextFactory,s=this.c;return"model"===e.src&&null!=s?s.update(e.model):C(t.create(e),(i=>{if(t.isCurrent(i))return C(this.compose(i),(n=>{if(t.isCurrent(i))return C(n.activate(),(()=>t.isCurrent(i)?(this.c=n,null==s?void 0:s.deactivate(e.initiator)):C(n.controller.deactivate(n.controller,this.$controller,4),(()=>n.controller.dispose()))));n.controller.dispose()}))}))}compose(e){let t,s,i;const{view:n,viewModel:r,model:o,initiator:a}=e.change,{container:l,host:h,$controller:c,contextFactory:u,loc:d}=this,p=this.getDef(r),g=l.createChild(),f=null==d?h.parentNode:d.parentNode;if(null!==p){if(p.containerless)throw new Error("Containerless custom element is not supported by <au-compose/>");null==d?(s=h,i=()=>{}):(s=f.insertBefore(this.p.document.createElement(p.name),d),i=()=>{s.remove()}),t=this.getVm(g,r,s)}else s=null==d?h:d,t=this.getVm(g,r,s);const v=()=>{if(null!==p){const n=Ks.forCustomElement(null,l,g,t,s,null,0,!0,p);return new Fo(n,(()=>n.activate(null!=a?a:n,c,2)),(e=>C(n.deactivate(null!=e?e:n,c,4),i)),(e=>{var s;return null===(s=t.activate)||void 0===s?void 0:s.call(t,e)}),e)}{const i=ls(Ut.create({name:Wt.generateName(),template:n}),g),r=i.getViewFactory(),o=Ks.forSyntheticView(u.isFirst(e)?c.root:null,i,r,2,c),l="auto"===this.scopeBehavior?V.fromParent(this.parent.scope,t):V.create(t);return ki(s)?o.setLocation(s):o.setHost(s),new Fo(o,(()=>o.activate(null!=a?a:o,c,2,l,null)),(e=>o.deactivate(null!=e?e:o,c,4)),(e=>{var s;return null===(s=t.activate)||void 0===s?void 0:s.call(t,e)}),e)}};return"activate"in t?C(t.activate(o),(()=>v())):v()}getVm(e,t,s){if(null==t)return new Vo;if("object"==typeof t)return t;const i=this.p,n=ki(s),r=new y("ElementResolver",n?null:s);e.registerResolver(gi,r),e.registerResolver(i.Node,r),e.registerResolver(i.Element,r),e.registerResolver(i.HTMLElement,r),e.registerResolver(vi,new y("IRenderLocation",n?s:null));const o=e.invoke(t);return e.registerResolver(t,new y("au-compose.viewModel",o)),o}getDef(e){const t="function"==typeof e?e:null==e?void 0:e.constructor;return Wt.isType(t)?Wt.getDefinition(t):null}};re([ae],jo.prototype,"view",void 0),re([ae],jo.prototype,"viewModel",void 0),re([ae],jo.prototype,"model",void 0),re([ae({set:e=>{if("scoped"===e||"auto"===e)return e;throw new Error('Invalid scope behavior config. Only "scoped" or "auto" allowed.')}})],jo.prototype,"scopeBehavior",void 0),jo=re([qt("au-compose")],jo);class Vo{}class Io{constructor(){this.id=0}isFirst(e){return 0===e.id}isCurrent(e){return e.id===this.id-1}create(e){return C(e.load(),(e=>new Do(this.id++,e)))}}class No{constructor(e,t,s,i,n){this.view=e,this.viewModel=t,this.model=s,this.initiator=i,this.src=n}load(){return this.view instanceof Promise||this.viewModel instanceof Promise?Promise.all([this.view,this.viewModel]).then((([e,t])=>new qo(e,t,this.model,this.initiator,this.src))):new qo(this.view,this.viewModel,this.model,this.initiator,this.src)}}class qo{constructor(e,t,s,i,n){this.view=e,this.viewModel=t,this.model=s,this.initiator=i,this.src=n}}class Do{constructor(e,t){this.id=e,this.change=t}}class Fo{constructor(e,t,s,i,n){this.controller=e,this.start=t,this.stop=s,this.update=i,this.context=n,this.state=0}activate(){if(0!==this.state)throw new Error(`Composition has already been activated/deactivated. Id: ${this.controller.id}`);return this.state=1,this.start()}deactivate(e){switch(this.state){case 1:return this.state=-1,this.stop(e);case-1:throw new Error("Composition has already been deactivated.");default:this.state=-1}}}class zo{constructor(e,t,s){var i,n;let r;this.hdrContext=s,this.hostScope=null,this.outerScope=null,this.hasProjection=!1;const o=t.auSlot,a=null===(n=null===(i=s.instruction)||void 0===i?void 0:i.projections)||void 0===n?void 0:n[o.name];null==a?r=ls(o.fallback,s.controller.container).getViewFactory():(r=ls(a,s.parent.controller.container).getViewFactory(),this.hasProjection=!0),this.view=r.create().setLocation(e)}static get inject(){return[vi,qi,ni]}binding(e,t,s){this.hostScope=this.$controller.scope.parentScope,this.outerScope=this.hasProjection?this.hdrContext.controller.scope.parentScope:this.hostScope}attaching(e,t,s){var i;return this.view.activate(e,this.$controller,s,null!==(i=this.outerScope)&&void 0!==i?i:this.hostScope,this.hostScope)}detaching(e,t,s){return this.view.deactivate(e,this.$controller,s)}dispose(){this.view.dispose(),this.view=void 0}accept(e){var t;if(!0===(null===(t=this.view)||void 0===t?void 0:t.accept(e)))return!0}}qt({name:"au-slot",template:null,containerless:!0})(zo);const Uo=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,Ko=l.createInterface("ISanitizer",(e=>e.singleton(class{sanitize(e){return e.replace(Uo,"")}})));let Wo=class{constructor(e){this.sanitizer=e}toView(e){return null==e?null:this.sanitizer.sanitize(e)}};Wo=re([oe(0,Ko)],Wo),ne("sanitize")(Wo);let Ho=class{constructor(e){this.viewLocator=e}toView(e,t){return this.viewLocator.getViewComponentForObject(e,t)}};Ho=re([oe(0,ss)],Ho),ne("view")(Ho);const Go=Pr,_o=Tr,Qo=Ar,Xo=Er,Yo=Rr,Zo=Mr,Jo=Or,ea=ir,ta=io,sa=[ea,ta],ia=De,na=Me,ra=Re,oa=Pe,aa=Oe,la=[oa,aa],ha=[na,ra],ca=Kn,ua=Un,da=Wn,pa=Fn,ga=qn,fa=Dn,va=zn,ma=Zn,ba=Hn,ya=Gn,wa=_n,xa=Qn,ka=Yn,Ca=Xn,$a=[ua,ga,pa,fa,va,ca,da,ma,ba,ya,wa,ka,Ca,xa],Sa=Wo,Ta=Ho,Aa=po,Ea=go,Oa=vo,Pa=xo,Ra=jr,Ma=Ir,Ba=ro,La=Lo,ja=[Go,_o,Qo,Xo,Yo,Zo,Jo,Sa,Ta,co,uo,Aa,Ea,Oa,Pa,ko,Co,$o,So,To,Ao,Eo,Ra,Ma,Ba,La,jo,lo,oo,ao,zo],Va=vn,Ia=pn,Na=dn,qa=bn,Da=wn,Fa=fn,za=yn,Ua=mn,Ka=un,Wa=gn,Ha=Sn,Ga=Pn,_a=Tn,Qa=An,Xa=En,Ya=On,Za=$n,Ja=[za,Da,Va,Ua,qa,Ka,Na,Ia,Wa,Fa,Ha,Ga,_a,Qa,Xa,Ya,Za],el={register:e=>e.register(...sa,...ja,...la,...$a,...Ja),createContainer(){return this.register(l.createContainer())}},tl=l.createInterface("IAurelia");class sl{constructor(e=l.createContainer()){if(this.container=e,this._isRunning=!1,this._isStarting=!1,this._isStopping=!1,this._root=void 0,this.next=void 0,this.startPromise=void 0,this.stopPromise=void 0,e.has(tl,!0))throw new Error("An instance of Aurelia is already registered with the container or an ancestor of it.");e.register(c.instance(tl,this)),e.registerResolver(ai,this.rootProvider=new y("IAppRoot"))}get isRunning(){return this._isRunning}get isStarting(){return this._isStarting}get isStopping(){return this._isStopping}get root(){if(null==this._root){if(null==this.next)throw new Error("root is not defined");return this.next}return this._root}register(...e){return this.container.register(...e),this}app(e){return this.next=new ci(e,this.initPlatform(e.host),this.container,this.rootProvider,!1),this}enhance(e){return this.next=new ci(e,this.initPlatform(e.host),this.container,this.rootProvider,!0),this}async waitForIdle(){const e=this.root.platform;await e.domWriteQueue.yield(),await e.domReadQueue.yield(),await e.taskQueue.yield()}initPlatform(t){let s;if(this.container.has(Ve,!1))s=this.container.get(Ve);else{if(null===t.ownerDocument.defaultView)throw new Error("Failed to initialize the platform object. The host element's ownerDocument does not have a defaultView");s=new e(t.ownerDocument.defaultView),this.container.register(c.instance(Ve,s))}return s}start(e=this.next){if(null==e)throw new Error("There is no composition root");return this.startPromise instanceof Promise?this.startPromise:this.startPromise=C(this.stop(),(()=>(Reflect.set(e.host,"$aurelia",this),this.rootProvider.prepare(this._root=e),this._isStarting=!0,C(e.activate(),(()=>{this._isRunning=!0,this._isStarting=!1,this.startPromise=void 0,this.dispatchEvent(e,"au-started",e.host)})))))}stop(e=!1){if(this.stopPromise instanceof Promise)return this.stopPromise;if(!0===this._isRunning){const t=this._root;return this._isRunning=!1,this._isStopping=!0,this.stopPromise=C(t.deactivate(),(()=>{Reflect.deleteProperty(t.host,"$aurelia"),e&&t.dispose(),this._root=void 0,this.rootProvider.dispose(),this._isStopping=!1,this.dispatchEvent(t,"au-stopped",t.host)}))}}dispose(){if(this._isRunning||this._isStopping)throw new Error("The aurelia instance must be fully stopped before it can be disposed");this.container.dispose()}dispatchEvent(e,t,s){const i=new e.platform.window.CustomEvent(t,{detail:this,bubbles:!0,cancelable:!0});s.dispatchEvent(i)}}const il=l.createInterface("IDialogService"),nl=l.createInterface("IDialogController"),rl=l.createInterface("IDialogDomRenderer"),ol=l.createInterface("IDialogDom"),al=l.createInterface("IDialogGlobalSettings");class ll{constructor(e,t){this.wasCancelled=e,this.dialog=t}static create(e,t){return new ll(e,t)}}class hl{constructor(e,t){this.status=e,this.value=t}static create(e,t){return new hl(e,t)}}var cl;!function(e){e.Ok="ok",e.Error="error",e.Cancel="cancel",e.Abort="abort"}(cl||(cl={}));class ul{constructor(e,t){this.p=e,this.ctn=t,this.closed=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}static get inject(){return[Ve,m]}activate(e){var t;const s=this.ctn.createChild(),{model:i,template:n,rejectOnCancel:r}=e,o=s.get(rl),a=null!==(t=e.host)&&void 0!==t?t:this.p.document.body,l=this.dom=o.render(a,e),h=s.has(fi,!0)?s.get(fi):null,u=l.contentHost;return this.settings=e,null!=h&&h.contains(a)||s.register(c.instance(fi,a)),s.register(c.instance(gi,u),c.instance(ol,l)),new Promise((t=>{var n,r;const o=Object.assign(this.cmp=this.getOrCreateVm(s,e,u),{$dialog:this});t(null===(r=null===(n=o.canActivate)||void 0===n?void 0:n.call(o,i))||void 0===r||r)})).then((t=>{var o;if(!0!==t){if(l.dispose(),r)throw pl(null,"Dialog activation rejected");return ll.create(!0,this)}const a=this.cmp;return C(null===(o=a.activate)||void 0===o?void 0:o.call(a,i),(()=>{var t;const i=this.controller=Ks.forCustomElement(null,s,s,a,u,null,0,!0,Ut.create(null!==(t=this.getDefinition(a))&&void 0!==t?t:{name:Wt.generateName(),template:n}));return C(i.activate(i,null,2),(()=>{var t;return l.overlay.addEventListener(null!==(t=e.mouseEvent)&&void 0!==t?t:"click",this),ll.create(!1,this)}))}))}),(e=>{throw l.dispose(),e}))}deactivate(e,t){if(this.closingPromise)return this.closingPromise;let s=!0;const{controller:i,dom:n,cmp:r,settings:{mouseEvent:o,rejectOnCancel:a}}=this,l=hl.create(e,t),h=new Promise((h=>{var c,u;h(C(null===(u=null===(c=r.canDeactivate)||void 0===c?void 0:c.call(r,l))||void 0===u||u,(h=>{var c;if(!0!==h){if(s=!1,this.closingPromise=void 0,a)throw pl(null,"Dialog cancellation rejected");return hl.create("abort")}return C(null===(c=r.deactivate)||void 0===c?void 0:c.call(r,l),(()=>C(i.deactivate(i,null,4),(()=>(n.dispose(),n.overlay.removeEventListener(null!=o?o:"click",this),a||"error"===e?this.reject(pl(t,"Dialog cancelled with a rejection on cancel")):this.resolve(l),l)))))})))})).catch((e=>{throw this.closingPromise=void 0,e}));return this.closingPromise=s?h:void 0,h}ok(e){return this.deactivate("ok",e)}cancel(e){return this.deactivate("cancel",e)}error(e){const t=function(e){const t=new Error;return t.wasCancelled=!1,t.value=e,t}(e);return new Promise((e=>{var s,i;return e(C(null===(i=(s=this.cmp).deactivate)||void 0===i?void 0:i.call(s,hl.create("error",t)),(()=>C(this.controller.deactivate(this.controller,null,4),(()=>{this.dom.dispose(),this.reject(t)})))))}))}handleEvent(e){this.settings.overlayDismiss&&!this.dom.contentHost.contains(e.target)&&this.cancel()}getOrCreateVm(e,t,s){const i=t.component;if(null==i)return new dl;if("object"==typeof i)return i;const n=this.p,r=new y("ElementResolver",s);return e.registerResolver(gi,r),e.registerResolver(n.Node,r),e.registerResolver(n.Element,r),e.registerResolver(n.HTMLElement,r),e.invoke(i)}getDefinition(e){const t="function"==typeof e?e:null==e?void 0:e.constructor;return Wt.isType(t)?Wt.getDefinition(t):null}}class dl{}function pl(e,t){const s=new Error(t);return s.wasCancelled=!0,s.value=e,s}class gl{constructor(e,t,s){this.container=e,this.p=t,this.defaultSettings=s,this.dlgs=[]}get controllers(){return this.dlgs.slice(0)}get top(){const e=this.dlgs;return e.length>0?e[e.length-1]:null}static get inject(){return[m,Ve,al]}static register(e){e.register(c.singleton(il,this),yt.beforeDeactivate(il,(e=>C(e.closeAll(),(e=>{if(e.length>0)throw new Error(`There are still ${e.length} open dialog(s).`)})))))}open(e){return(t=new Promise((t=>{var s;const i=fl.from(this.defaultSettings,e),n=null!==(s=i.container)&&void 0!==s?s:this.container.createChild();t(C(i.load(),(e=>{const t=n.invoke(ul);return n.register(c.instance(nl,t)),n.register(c.callback(ul,(()=>{throw new Error("Invalid injection of DialogController. Use IDialogController instead.")}))),C(t.activate(e),(e=>{if(!e.wasCancelled){1===this.dlgs.push(t)&&this.p.window.addEventListener("keydown",this);const e=()=>this.remove(t);t.closed.then(e,e)}return e}))})))}))).whenClosed=vl,t;var t}closeAll(){return Promise.all(Array.from(this.dlgs).map((e=>e.settings.rejectOnCancel?e.cancel().then((()=>null)):e.cancel().then((t=>"cancel"===t.status?null:e))))).then((e=>e.filter((e=>!!e))))}remove(e){const t=this.dlgs,s=t.indexOf(e);s>-1&&this.dlgs.splice(s,1),0===t.length&&this.p.window.removeEventListener("keydown",this)}handleEvent(e){const t=function(e){if("Escape"===(e.code||e.key)||27===e.keyCode)return"Escape";if("Enter"===(e.code||e.key)||13===e.keyCode)return"Enter";return}(e);if(null==t)return;const s=this.top;if(null===s||0===s.settings.keyboard.length)return;const i=s.settings.keyboard;"Escape"===t&&i.includes(t)?s.cancel():"Enter"===t&&i.includes(t)&&s.ok()}}class fl{static from(...e){return Object.assign(new fl,...e).validate().normalize()}load(){const e=this,t=this.component,s=this.template,i=$(null==t?void 0:C(t(),(t=>{e.component=t})),"function"==typeof s?C(s(),(t=>{e.template=t})):void 0);return i instanceof Promise?i.then((()=>e)):e}validate(){if(null==this.component&&null==this.template)throw new Error('Invalid Dialog Settings. You must provide "component", "template" or both.');return this}normalize(){return null==this.keyboard&&(this.keyboard=this.lock?[]:["Enter","Escape"]),"boolean"!=typeof this.overlayDismiss&&(this.overlayDismiss=!this.lock),this}}function vl(e,t){return this.then((s=>s.dialog.closed.then(e,t)),t)}class ml{constructor(){this.lock=!0,this.startingZIndex=1e3,this.rejectOnCancel=!1}static register(e){c.singleton(al,this).register(e)}}const bl="position:absolute;width:100%;height:100%;top:0;left:0;";class yl{constructor(e){this.p=e,this.wrapperCss=`${bl} display:flex;`,this.overlayCss=bl,this.hostCss="position:relative;margin:auto;"}static register(e){c.singleton(rl,this).register(e)}render(e){const t=this.p.document,s=(e,s)=>{const i=t.createElement(e);return i.style.cssText=s,i},i=e.appendChild(s("au-dialog-container",this.wrapperCss)),n=i.appendChild(s("au-dialog-overlay",this.overlayCss)),r=i.appendChild(s("div",this.hostCss));return new wl(i,n,r)}}yl.inject=[Ve];class wl{constructor(e,t,s){this.wrapper=e,this.overlay=t,this.contentHost=s}dispose(){this.wrapper.remove()}}function xl(e,t){return{settingsProvider:e,register:s=>s.register(...t,yt.beforeCreate((()=>e(s.get(al))))),customize:(e,s)=>xl(e,null!=s?s:t)}}const kl=xl((()=>{throw new Error("Invalid dialog configuration. Specify the implementations for <IDialogService>, <IDialogGlobalSettings> and <IDialogDomRenderer>, or use the DialogDefaultConfiguration export.")}),[class{static register(e){e.register(c.singleton(al,this))}}]),Cl=xl(o,[gl,ml,yl]);export{Ss as AdoptedStyleSheetsStyles,ci as AppRoot,yt as AppTask,Me as AtPrefixedTriggerAttributePattern,na as AtPrefixedTriggerAttributePatternRegistration,jr as AttrBindingBehavior,Ra as AttrBindingBehaviorRegistration,Qn as AttrBindingCommand,xa as AttrBindingCommandRegistration,ke as AttrSyntax,it as AttributeBinding,rn as AttributeBindingInstruction,Ga as AttributeBindingRendererRegistration,qr as AttributeNSAccessor,Ee as AttributePattern,jo as AuCompose,Lo as AuRender,La as AuRenderRegistration,zo as AuSlot,Ii as AuSlotsInfo,sl as Aurelia,he as Bindable,ce as BindableDefinition,ue as BindableObserver,pr as BindablesInfo,Nn as BindingCommand,In as BindingCommandDefinition,Sr as BindingModeBehavior,ms as CSSModulesProcessorRegistry,Ke as CallBinding,Kn as CallBindingCommand,ca as CallBindingCommandRegistration,Ki as CallBindingInstruction,Va as CallBindingRendererRegistration,_n as CaptureBindingCommand,wa as CaptureBindingCommandRegistration,Co as Case,Fr as CheckedObserver,Ct as Children,St as ChildrenDefinition,Tt as ChildrenObserver,ps as ClassAttributeAccessor,Yn as ClassBindingCommand,ka as ClassBindingCommandRegistration,Re as ColonPrefixedBindAttributePattern,ra as ColonPrefixedBindAttributePatternRegistration,Ms as ComputedWatcher,Ks as Controller,Lt as CustomAttribute,Bt as CustomAttributeDefinition,Ia as CustomAttributeRendererRegistration,Wt as CustomElement,Ut as CustomElementDefinition,Na as CustomElementRendererRegistration,Br as DataAttributeAccessor,Pr as DebounceBindingBehavior,Go as DebounceBindingBehaviorRegistration,Un as DefaultBindingCommand,ua as DefaultBindingCommandRegistration,$a as DefaultBindingLanguage,la as DefaultBindingSyntax,$o as DefaultCase,sa as DefaultComponents,wl as DefaultDialogDom,yl as DefaultDialogDomRenderer,ml as DefaultDialogGlobalSettings,Ja as DefaultRenderers,ja as DefaultResources,Gn as DelegateBindingCommand,ya as DelegateBindingCommandRegistration,hl as DialogCloseResult,kl as DialogConfiguration,ul as DialogController,cl as DialogDeactivationStatuses,Cl as DialogDefaultConfiguration,ll as DialogOpenResult,gl as DialogService,Oe as DotSeparatedAttributePattern,aa as DotSeparatedAttributePatternRegistration,go as Else,Ea as ElseRegistration,Li as EventDelegator,Mi as EventSubscriber,Bs as ExpressionWatcher,oo as Focus,Wn as ForBindingCommand,da as ForBindingCommandRegistration,Ci as FragmentNodeSequence,co as FrequentMutations,Er as FromViewBindingBehavior,Xo as FromViewBindingBehaviorRegistration,Fn as FromViewBindingCommand,pa as FromViewBindingCommandRegistration,Ao as FulfilledTemplateController,_i as HydrateAttributeInstruction,Gi as HydrateElementInstruction,Xi as HydrateLetElementInstruction,Qi as HydrateTemplateController,ai as IAppRoot,mt as IAppTask,Fe as IAttrMapper,$e as IAttributeParser,Ce as IAttributePattern,Vi as IAuSlotsInfo,tl as IAurelia,ii as IController,nl as IDialogController,ol as IDialogDom,rl as IDialogDomRenderer,al as IDialogGlobalSettings,il as IDialogService,Bi as IEventDelegator,fi as IEventTarget,Ti as IHistory,ni as IHydrationContext,qi as IInstruction,Ls as ILifecycleHooks,Si as ILocation,gi as INode,ta as INodeObserverLocatorRegistration,Ve as IPlatform,ji as IProjections,vi as IRenderLocation,an as IRenderer,Ie as ISVGAnalyzer,Ko as ISanitizer,$s as IShadowDOMGlobalStyles,ys as IShadowDOMStyleFactory,Cs as IShadowDOMStyles,we as ISyntaxInterpreter,on as ITemplateCompiler,yr as ITemplateCompilerHooks,ea as ITemplateCompilerRegistration,Jn as ITemplateElementFactory,Qt as IViewFactory,ss as IViewLocator,$i as IWindow,li as IWorkTracker,po as If,Aa as IfRegistration,Ni as InstructionType,ot as InterpolationBinding,qa as InterpolationBindingRendererRegistration,Fi as InterpolationInstruction,ge as Interpretation,Ui as IteratorBindingInstruction,Da as IteratorBindingRendererRegistration,ht as LetBinding,Yi as LetBindingInstruction,Fa as LetElementRendererRegistration,Ns as LifecycleHooks,Vs as LifecycleHooksDefinition,js as LifecycleHooksEntry,Ei as Listener,Ji as ListenerBindingInstruction,Ha as ListenerBindingRendererRegistration,so as NodeObserverConfig,io as NodeObserverLocator,mi as NodeType,Ne as NoopSVGAnalyzer,uo as ObserveShallow,Tr as OneTimeBindingBehavior,_o as OneTimeBindingBehaviorRegistration,qn as OneTimeBindingCommand,ga as OneTimeBindingCommandRegistration,To as PendingTemplateController,lo as Portal,So as PromiseTemplateController,ft as PropertyBinding,zi as PropertyBindingInstruction,za as PropertyBindingRendererRegistration,Pe as RefAttributePattern,oa as RefAttributePatternRegistration,vt as RefBinding,ma as RefBindingCommandRegistration,Wi as RefBindingInstruction,Ua as RefBindingRendererRegistration,Eo as RejectedTemplateController,Ro as RenderPlan,vo as Repeat,Oa as RepeatRegistration,De as SVGAnalyzer,ia as SVGAnalyzerRegistration,Wo as SanitizeValueConverter,Sa as SanitizeValueConverterRegistration,Hr as SelectValueObserver,Ir as SelfBindingBehavior,Ma as SelfBindingBehaviorRegistration,tn as SetAttributeInstruction,_a as SetAttributeRendererRegistration,sn as SetClassAttributeInstruction,Qa as SetClassAttributeRendererRegistration,Hi as SetPropertyInstruction,Ka as SetPropertyRendererRegistration,nn as SetStyleAttributeInstruction,Xa as SetStyleAttributeRendererRegistration,ws as ShadowDOMRegistry,ha as ShortHandBindingSyntax,Rr as SignalBindingBehavior,Yo as SignalBindingBehaviorRegistration,el as StandardConfiguration,_r as StyleAttributeAccessor,Xn as StyleBindingCommand,Ca as StyleBindingCommandRegistration,As as StyleConfiguration,Ts as StyleElementStyles,en as StylePropertyBindingInstruction,Ya as StylePropertyBindingRendererRegistration,ko as Switch,ir as TemplateCompiler,kr as TemplateCompilerHooks,Wa as TemplateControllerRendererRegistration,Zi as TextBindingInstruction,Za as TextBindingRendererRegistration,Mr as ThrottleBindingBehavior,Zo as ThrottleBindingBehaviorRegistration,Ar as ToViewBindingBehavior,Qo as ToViewBindingBehaviorRegistration,Dn as ToViewBindingCommand,fa as ToViewBindingCommandRegistration,Hn as TriggerBindingCommand,ba as TriggerBindingCommandRegistration,Or as TwoWayBindingBehavior,Jo as TwoWayBindingBehaviorRegistration,zn as TwoWayBindingCommand,va as TwoWayBindingCommandRegistration,ro as UpdateTriggerBindingBehavior,Ba as UpdateTriggerBindingBehaviorRegistration,Qr as ValueAttributeObserver,Xt as ViewFactory,is as ViewLocator,ei as ViewModelKind,Ho as ViewValueConverter,Ta as ViewValueConverterRegistration,es as Views,Nt as Watch,xo as With,Pa as WithRegistration,sr as allResources,Te as attributePattern,ae as bindable,Vn as bindingCommand,xt as children,Ft as containerless,xi as convertToRenderLocation,Po as createElement,vs as cssModules,Rt as customAttribute,qt as customElement,yi as getEffectiveParentNode,di as getRef,ls as getRenderContext,Xs as isCustomElementController,Ys as isCustomElementViewModel,Di as isInstruction,os as isRenderContext,ki as isRenderLocation,Ds as lifecycleHooks,Gt as processContent,ln as renderer,wi as setEffectiveParentNode,pi as setRef,bs as shadowCSS,$r as templateCompilerHooks,Mt as templateController,Dt as useShadowDOM,ts as view,jt as watch};
