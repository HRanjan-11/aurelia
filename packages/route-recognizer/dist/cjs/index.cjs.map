{"version":3,"file":"index.cjs","sources":["../../src/index.ts"],"sourcesContent":[null],"names":["ConfigurableRoute","constructor","path","caseSensitive","handler","this","Endpoint","route","paramNames","RecognizedRoute","endpoint","params","Candidate","chars","states","skippedStates","result","head","length","_a","advance","ch","stateToAdd","matchCount","state","$process","nextState","skippedState","isMatch","add","concat","segment","isOptional","nextStates","Error","separator","isSeparator","$nextState","isDynamic","push","remove","finalize","collectSkippedStates","getParams","name","i","ii","compareTo","b","statesA","statesB","iA","iB","Math","max","stateA","stateB","segmentA","segmentB","kind","skippedStatesA","skippedStatesB","skippedStatesALen","skippedStatesBLen","skippedStateA","skippedStateB","hasEndpoint","candidate","compareChains","a","RecognizeResult","rootState","candidates","isEmpty","getSolution","filter","sort","splice","indexOf","slice","RouteRecognizer","State","cache","Map","routeOrRoutes","Array","$add","clear","$route","parts","split","isNotEmpty","part","append","charAt","endsWith","DynamicSegment","appendTo","StarSegment","StaticSegment","setEndpoint","recognize","get","set","$recognize","decodeURI","startsWith","prevState","value","optional","undefined","find","s","equals","includes","SegmentKind","toUpperCase","toLowerCase"],"mappings":"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"}