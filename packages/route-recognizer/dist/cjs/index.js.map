{"version":3,"file":"index.js","sources":["../../src/index.ts"],"sourcesContent":[null],"names":["ConfigurableRoute","constructor","path","caseSensitive","handler","this","Endpoint","route","paramNames","RecognizedRoute","endpoint","params","Candidate","chars","states","skippedStates","result","head","length","advance","ch","stateToAdd","matchCount","state","$process","nextState","skippedState","isMatch","add","concat","segment","isOptional","nextStates","Error","separator","isSeparator","$nextState","isDynamic","push","remove","finalize","collectSkippedStates","getParams","name","i","ii","compareTo","b","statesA","statesB","iA","iB","Math","max","stateA","stateB","segmentA","segmentB","kind","skippedStatesA","skippedStatesB","skippedStatesALen","skippedStatesBLen","skippedStateA","skippedStateB","hasEndpoint","candidate","compareChains","a","RecognizeResult","rootState","candidates","isEmpty","getSolution","filter","sort","splice","indexOf","slice","RouteRecognizer","State","Map","routeOrRoutes","Array","$add","cache","clear","$route","parts","split","isNotEmpty","part","append","charAt","endsWith","DynamicSegment","appendTo","StarSegment","StaticSegment","setEndpoint","recognize","get","set","$recognize","decodeURI","startsWith","prevState","value","optional","undefined","find","s","equals","includes","SegmentKind","toUpperCase","toLowerCase"],"mappings":"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"}