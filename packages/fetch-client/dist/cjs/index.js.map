{"version":3,"file":"index.js","sources":["../../src/util.ts","../../src/retry-interceptor.ts","../../src/http-client-configuration.ts","../../src/http-client.ts"],"sourcesContent":[null,null,null,null],"names":["json","body","replacer","JSON","stringify","undefined","retryStrategy","fixed","incremental","exponential","random","defaultRetryConfig","maxRetries","interval","strategy","RetryInterceptor","constructor","retryConfig","this","Error","request","counter","requestClone","clone","response","Reflect","deleteProperty","responseError","error","httpClient","Promise","resolve","then","result","doRetry","delay","calculateDelay","setTimeout","isNaN","newRequest","beforeRetry","retryableRequest","fetch","minRandomInterval","maxRandomInterval","retryStrategies","retryCount","Math","HttpClientConfiguration","withBaseUrl","baseUrl","withDefaults","defaults","withInterceptor","interceptor","interceptors","push","useStandardConfiguration","standardConfig","credentials","Object","assign","rejectErrorResponses","rejectOnError","withRetry","config","withDispatcher","dispatcher","ok","absoluteUrlRegexp","IHttpClient","DI","createInterface","x","singleton","HttpClient","activeRequestCount","isRequesting","isConfigured","configure","normalizedConfig","requestInitConfiguration","c","prototype","isPrototypeOf","call","Headers","headers","length","filter","retryInterceptorIndex","findIndex","input","init","trackRequestStart","buildRequest","processRequest","Response","Request","processResponse","trackRequestEnd","requestContentType","parsedDefaultHeaders","parseHeaderValues","get","bodyObj","requestInit","getRequestUrl","has","set","isJSON","setDefaultHeaders","Blob","type","post","callFetch","put","patch","delete","evt","ownerDocument","defaultView","CustomEvent","bubbles","cancelable","dispatchEvent","applyInterceptors","successName","errorName","interceptorArgs","reduce","chain","successHandler","errorHandler","value","identity","reason","thrower","method","parsedHeaders","$headers","name","hasOwnProperty","url","test","defaultHeaders","$defaultHeaders","str","parse","err"],"mappings":"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"}