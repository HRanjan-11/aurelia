{"version":3,"file":"index.js","sources":["../../src/history.ts","../../../../node_modules/tslib/tslib.es6.js","../../src/middleware.ts","../../src/logging.ts","../../src/store.ts","../../src/test-helpers.ts","../../src/decorator.ts","../../src/index.ts"],"sourcesContent":[null,"/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __createBinding(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n",null,null,null,null,null,null],"names":["jump","state","n","isStateHistory","Error","jumpToFuture","jumpToPast","past","length","index","future","present","newPast","slice","newPresent","newFuture","nextStateHistory","presentStateHistory","nextPresent","applyLimits","limit","history","Array","isArray","__decorate","decorators","target","key","desc","c","arguments","r","Object","getOwnPropertyDescriptor","d","Reflect","decorate","i","defineProperty","__param","paramIndex","decorator","DEFAULT_LOCAL_STORAGE_KEY","MiddlewarePlacement","logMiddleware","_","settings","cons","STORE","container","get","IPlatform","console","logType","undefined","localStorageMiddleware","localStorage","IWindow","setItem","JSON","stringify","rehydrateFromLocalStorage","storedState","getItem","parse","_a","LogLevel","getLogType","options","definition","defaultLevel","logDefinitions","hasOwnProperty","values","includes","PerformanceMeasurement","UnregisteredActionError","constructor","reducer","super","name","DevToolsRemoteDispatchError","ActionRegistrationError","ReducerNoStateError","Store","initialState","logger","window","this","Map","isUndoable","undoable","_state","BehaviorSubject","asObservable","devToolsOptions","disable","setupDevTools","registerHistoryMethods","registerMiddleware","placement","middlewares","set","unregisterMiddleware","has","delete","isMiddlewareRegistered","middleware","registerAction","actions","type","unregisterAction","isActionRegistered","from","find","action","resetToState","next","dispatch","params","lookupAction","Promise","reject","queueDispatch","pipe","pipeline","dispatchPipe","async","nextReducer","nextParams","push","result","resolve","dispatchQueue","handleQueue","queueItem","internalDispatch","e","shift","unregisteredAction","a","performance","mark","pipedActions","map","callingAction","join","reduce","p","concat","logDispatchedActions","info","beforeMiddleswaresResult","executeMiddlewares","getValue","Before","clearMarks","clearMeasures","resultingState","After","measurePerformance","StartEnd","measure","measures","getEntriesByName","duration","All","marks","getEntriesByType","totalDuration","startTime","updateDevToolsState","filter","prev","curr","propagateError","__REDUX_DEVTOOLS_EXTENSION__","debug","devToolsAvailable","devTools","connect","init","subscribe","message","payload","byName","args","arg","catch","parsedState","send","ILogger","dispatchify","store","skip","_skip","take","_take","delay","_delay","executeSteps","shouldLogResults","steps","logStep","step","stepIdx","res","group","log","groupEnd","tryStep","err","lastStep","currentStep","forEach","defaultSelector","connectTo","_settings","selector","getSource","source","Observable","createSelectors","isSelectorObj","fallbackSelector","entries","targets","changeHandlers","onChanged","propertyChanged","originalSetup","setup","prototype","binding","originalTeardown","teardown","bound","Controller","getCached","_stateSubscriptions","s","lastTargetIdx","oldState","accu","handlerName","idx","apply","sub","Subscription","closed","unsubscribe","StoreConfiguration","withInitialState","withOptions","register","initState","Registration","instance"],"mappings":"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"}